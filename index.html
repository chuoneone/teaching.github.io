<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>國中學習系統</title>
    
    <!-- 外部資源連結 (保留兩份檔案的引用) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="icon" type="image/png" href="images/dog.png">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&family=Noto+Sans+TC&display=swap" rel="stylesheet">

    <!-- Google Analytics (合併設定) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5BBHYN77N9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // 設定兩個 ID，確保舊的與新的追蹤都能運作 (視需求可保留一個即可)
      gtag('config', 'G-WMNZ6FESH7'); 
      gtag('config', 'G-5BBHYN77N9');
    </script>

    <style>
      /* --- 歡迎頁面專用樣式 (Landing View) --- */
      /* 注意：這裡使用 #landing-view scope 來避免影響主頁面 */
      
      body.landing-mode {
        /* 只有在歡迎頁模式下，Body 才有星空背景 */
        min-height: 100vh;
        margin: 0;
        padding: 0;
        background: radial-gradient(circle at 60% 20%, #2b5876 0%, #22223e 70%, #0d133d 100%);
        overflow-x: hidden;
      }

      .space-bg {
        pointer-events: none;
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        z-index: 0;
      }
      
      .star {
        animation: twinkle 2.5s infinite alternate;
        opacity: 0.72;
      }
      .star2 { animation-delay: 0.5s;}
      .star3 { animation-delay: 1.2s;}
      .star4 { animation-delay: 1.9s;}
      
      @keyframes twinkle {
        0% { opacity: 0.4;}
        100% { opacity: 1;}
      }

      .landing-center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 90vh;
        position: relative;
        z-index: 2;
      }

      .landing-img {
        width: 240px;
        height: 240px;
        object-fit: cover;
        border-radius: 50%;
        margin-bottom: 40px;        
        transition: box-shadow 0.4s, filter 0.4s;
        cursor: pointer;
        will-change: transform, opacity;
        animation: pulse 1.5s infinite;
        background: none;
        box-shadow: none;
        border: none;
      }

      .landing-img.flying {
        animation: fly-left-up 0.8s cubic-bezier(.42,1.1,.74,1.05) forwards;
        filter: blur(2px) brightness(1.15);
      }

      @keyframes fly-left-up {
        0% { transform: translate(0,0) scale(1) rotate(0deg); opacity: 1;}
        80% { transform: translate(-350px, -120px) scale(0.5) rotate(-10deg); opacity: 0.9;}
        100% { transform: translate(-600px, -350px) scale(0.18) rotate(-18deg); opacity: 0;}
      }

      .click-hint {
        color: #a8faff;
        font-size: 1.05rem;
        font-family: 'Share Tech Mono', monospace;
        margin-bottom: 18px;
        animation: pulse 1.5s infinite;
        letter-spacing: 2px;
        text-align: center;
      }

      .arrow-bounce {
        width: 0; height: 0;
        border-left: 18px solid transparent;
        border-right: 18px solid transparent;
        border-top: 28px solid #00ffff;
        margin: -10px auto 16px auto;
        animation: arrowBounce 1s infinite alternate;
        opacity: 0.8;
      }

      @keyframes arrowBounce {
        0% { transform: translateY(0);}
        100% { transform: translateY(10px);}
      }

      .intro-text1 {
        font-family: 'Orbitron', 'Segoe UI', Arial, sans-serif;
        font-size: clamp(2rem, 6vw, 3.6rem);
        background: linear-gradient(100deg, #00ffff, #ff00ff, #00ffff);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        -webkit-text-fill-color: transparent;
        letter-spacing: 3px;
        text-align: center;
        margin: 60px auto 36px auto;
        opacity: 0;
        transform: scale(0.86);
        text-shadow: 0 0 2px #0ff, 0 0 4px #0ff, 0 0 6px #ff00ff;
        animation: introPop 1.15s cubic-bezier(.52,1.7,.52,.9) 0.18s forwards;
        filter: drop-shadow(0 4px 16px #ffee9940);
      }

      @keyframes introPop {
        0% { opacity: 0; transform: scale(0.86);}
        70% { opacity: 1; transform: scale(1.06);}
        100% { opacity: 1; transform: scale(1);}
      }

      /* 控制顯示與隱藏的 class */
      .hidden {
          display: none !important;
      }
    </style>
</head>

<!-- 初始載入時給 body 加上 landing-mode 樣式 -->
<body class="landing-mode">

  <!-- ================= 第一部分：歡迎頁面 (Landing View) ================= -->
  <div id="landing-view">
      <svg class="space-bg" viewBox="0 0 1920 1080" preserveAspectRatio="none">
        <circle class="star" cx="300" cy="90" r="2.2" fill="#fff" />
        <circle class="star star2" cx="1220" cy="300" r="1.6" fill="#fff" />
        <circle class="star star3" cx="900" cy="900" r="1.9" fill="#fff" />
        <circle class="star star4" cx="1500" cy="400" r="2.5" fill="#eaf3ff" />
        <circle class="star" cx="600" cy="800" r="1.2" fill="#fff" />
        <circle class="star2" cx="1800" cy="950" r="1.4" fill="#b9e4ff" />
        <circle class="star3" cx="1700" cy="180" r="1.8" fill="#fffbe0" />
        <circle class="star4" cx="400" cy="980" r="1.5" fill="#ffeac2" />
      </svg>
      
      <div class="landing-center">
          <div class="intro-text1" style="margin-top: 30px;">
              歡迎進入學習系統
          </div>
          <div class="click-hint">點擊下方按鈕開始！(Enter)</div>
          <div class="arrow-bounce"></div>

          <img 
            src="images/dog.png"
            alt="Logo" 
            class="landing-img" 
            id="rocketDog"
          >
          <div class="slogan" style="color: white; margin-top: 20px; font-family: 'Noto Sans TC', sans-serif;">一起探索、一起進步、一起變強！</div>
      </div>
  </div>

  <!-- ================= 第二部分：主功能頁面 (Main View) ================= -->
  <!-- 初始狀態為 hidden，等待 JS 切換 -->
  <div id="main-view" class="hidden">
      <header class="navbar">
          <div class="logo">SPED</div>
          <nav>
              <ul class="nav-links">
                  <li><a href="#" onclick="location.reload()">HOME</a></li> <!-- 若要回到首頁動畫可 reload -->
                  <li><a href="tt.html" onclick="trackEvent('button_click', 'navbar_link', 'emotion_log')">情緒紀錄</a></li>

                  <li><a href="7.html" onclick="trackEvent('button_click', 'subject_nav', 'g7-math')">7數</a></li>
                  <li><a href="8.html" onclick="trackEvent('button_click', 'subject_nav', 'g8-math')">8數</a></li>
                  <li><a href="9.html" onclick="trackEvent('button_click', 'subject_nav', 'g9-math')">9數</a></li>
                  <li><a href="7eng.html" onclick="trackEvent('button_click', 'subject_nav', 'g7-english')">7英</a></li>
                  <li><a href="8eng.html" onclick="trackEvent('button_click', 'subject_nav', 'g8-english')">8英</a></li>
                  <li><a href="9eng.html" onclick="trackEvent('button_click', 'subject_nav', 'g9-english')">9英</a></li>
                  <li><a href="7ch.html" onclick="trackEvent('button_click', 'subject_nav', 'g7-chinese')">7國</a></li>
                  <li><a href="8ch.html" onclick="trackEvent('button_click', 'subject_nav', 'g8-chinese')">8國</a></li>
                  <li><a href="9ch.html" onclick="trackEvent('button_click', 'subject_nav', 'g9-chinese')">9國</a></li>

                  <li><a href="bigtest.html" onclick="trackEvent('button_click', 'category_nav', 'exam_prep')">會考專區</a></li>
                  <li><a href="learningstrategy.html" onclick="trackEvent('button_click', 'category_nav', 'learning_strategy')">學習策略</a></li>
                  
                  <li><a href="socialskill.html" onclick="trackEvent('button_click', 'category_nav', 'social_skills')">社會技巧</a></li>
              </ul>
          </nav>
          <div class="menu-toggle" onclick="toggleMenu()">
              <i class="fas fa-bars"></i>
          </div>
      </header>

      <div class="intro-text">請選擇科目......</div>

      <main class="button-section">
          <div class="grade-row">
              <a href="7ch.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g7-chinese')"><i class="fas fa-book"></i> 7年級國文</a>
              <a href="7.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g7-math')"><i class="fas fa-calculator"></i> 7年級數學</a>
              <a href="7eng.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g7-english')"><i class="fas fa-language"></i> 7年級英文</a>
          </div>
          <div class="grade-row">
              <a href="8ch.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g8-chinese')"><i class="fas fa-book"></i> 8年級國文</a>
              <a href="8.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g8-math')"><i class="fas fa-calculator"></i> 8年級數學</a>
              <a href="8eng.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g8-english')"><i class="fas fa-language"></i> 8年級英文</a>
          </div>
          <div class="grade-row">
              <a href="9ch.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g9-chinese')"><i class="fas fa-book"></i> 9年級國文</a>
              <a href="9.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g9-math')"><i class="fas fa-calculator"></i> 9年級數學</a>
              <a href="9eng.html" class="big-button" onclick="trackEvent('button_click', 'subject_nav', 'g9-english')"><i class="fas fa-language"></i> 9年級英文</a>
          </div>

          <div class="grade-row">
              <a href="learningstrategy.html" class="big-button" onclick="trackEvent('button_click', 'category_nav', 'learning_strategy')"><i class="fas fa-lightbulb"></i> 學習策略</a>
              <a href="socialskill.html" class="big-button" onclick="trackEvent('button_click', 'category_nav', 'social_skills')"><i class="fas fa-user-group"></i>社會技巧</a>
              <a href="bigtest.html" class="big-button" onclick="trackEvent('button_click', 'category_nav', 'exam_prep')"><i class="fas fa-pen-alt"></i> 會考專區</a>
          </div>

          <br><br>

          <div class="countdown-container">
              <h2 class="countdown-title"><i class="fas fa-clock"></i>寒假還有...</h2>
              <div class="countdown-timer" id="countdown">
                  <span id="days">00</span><span class="label">天</span>
                  <span id="hours">00</span><span class="label">時</span>
                  <span id="minutes">00</span><span class="label">分</span>
                  <span id="seconds">00</span><span class="label">秒</span>
              </div>
          </div>

          <div class="single-row">
              <div class="social-group">
                  <h3 style="text-align: center;"><i class="fas fa-cogs"></i> 小工具</h3>
                  <div class="btn-group">
                      <a href="https://play.blooket.com/play" target="_blank" class="btn" onclick="trackEvent('button_click', 'tool_link', 'blooket')">Blooket</a>
                      <a href="https://www.gimkit.com/join?class=60a1e3ba9eaadc0022adafb6" target="_blank" class="btn" onclick="trackEvent('button_click', 'tool_link', 'gimkit')">Gimkit</a>
                      <a href="https://chuone.my.canva.site/counter" target="_blank" class="btn" onclick="trackEvent('button_click', 'tool_link', 'timer')">計時器</a>
                      <a href="teacher.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'tool_link', 'teacher_toolbox')">備課幫手</a>
                  </div>
              </div>

              <div class="social-group">
                  <h3 style="text-align: center;"><i class="fas fa-running"></i> 基本練功</h3>
                  <div class="btn-group">
                      <a href="test2.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'basic_skill', 'addition_subtraction')">加減法</a>
                      <a href="test.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'basic_skill', 'multiplication_table')">99乘法</a>
                      <a href="math/game1.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'basic_skill', 'pos_neg_addition')">正負數加減</a>
                      <a href="https://five-flamingo-d65.notion.site/1eb4c52ff8d08068abfbdbf7ba7bb48e" target="_blank" class="btn" onclick="trackEvent('button_click', 'basic_skill', 'character_practice')">基礎字練習</a>
                  </div>
              </div>

              <div class="social-group">
                  <h3 style="text-align: center;"><i class="fas fa-school"></i> 情境英文</h3>
                  <div class="btn-group">
                      <a href="https://wordwall.net/play/93118/185/701" target="_blank" class="btn" onclick="trackEvent('button_click', 'scenario_english', 'common_phrases')">常用片語</a>
                      <a href="RPG/index.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'scenario_english', 'dog_adventure_rpg')">狗子冒險去</a>
                      <a href="traveleng.html" target="_blank" class="btn" onclick="trackEvent('button_click', 'scenario_english', 'travel_english')">旅遊</a>
                  </div>
              </div>
          </div>

          <footer>

            <br>
            <p style="display: inline;">Created by Chu Pei Yi</p>
          </footer>
      </main>
  </div>

  <!-- 外部腳本 -->
  <script src="main.js"></script>
  <script src="tracking.js"></script>

  <!-- 頁面切換腳本 -->
  <script>
    const rocket = document.getElementById('rocketDog');
    const landingView = document.getElementById('landing-view');
    const mainView = document.getElementById('main-view');

    // 切換到主畫面的函式
    function enterSystem() {
      // 1. 播放飛行特效
      rocket.classList.add('flying');
      
      // 2. 等待 800 毫秒後切換
      setTimeout(() => {
        // 隱藏登入畫面
        landingView.style.display = 'none';
        
        // 移除 Body 的 landing-mode 樣式 (讓主頁面 CSS 接管背景)
        document.body.classList.remove('landing-mode');
        
        // 顯示主畫面
        mainView.classList.remove('hidden');
        
        // 觸發一個 resize 事件，確保 RWD 佈局重新計算 (預防萬一)
        window.dispatchEvent(new Event('resize'));
      }, 800);
    }

    // 點擊事件
    rocket.addEventListener('click', enterSystem);

    // 鍵盤事件
    document.addEventListener('keydown', function(e){
      // 只有在 landing view 顯示時才觸發
      if(e.key === "Enter" && landingView.style.display !== 'none') {
        enterSystem();
      }
    });
  </script>
</body>
</html>