<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å¤©æ·¨æ²™ç§‹æ€é¸æ“‡é¡Œ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600&display=swap');

    body {
      background-color: #f8f4e6;
      color: #4b3621;
      font-family: 'Noto Serif TC', serif;
      padding: 20px;
    }
    h1 {
      font-size: 2.5em;
      text-align: center;
      margin-bottom: 30px;
    }
    .question-box {
      display: none;
      background-color: #fff7e6;
      border: 2px solid #c2a875;
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
    }
    .active {
      display: block;
    }
    .question-box p {
      font-size: 1.8em;
      margin-bottom: 20px;
      font-weight: bold;
    }
    .option-button {
      display: block;
      width: 100%;
      background-color: #e6d3b3;
      color: #4b3621;
      border: 2px solid #c2a875;
      border-radius: 10px;
      padding: 12px;
      font-size: 1.3em;
      margin: 18px 0;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    .option-button:hover {
      background-color: #f2e1c1;
      transform: scale(1.02);
    }
    button {
      background-color: #a67c52;
      color: white;
      border: none;
      padding: 12px 20px;
      margin: 10px 10px 0 0;
      cursor: pointer;
      font-weight: bold;
      border-radius: 8px;
      font-size: 1em;
    }
    #result-box {
      display: none;
      border: 2px solid #a67c52;
      padding: 30px;
      background-color: #fffdf8;
      color: #4b3621;
    }
    .explanation-box {
      border: 2px solid #d4b085;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      background-color: #fffaf0;
    }
    .explanation-box p {
      font-size: 1.2em;
    }
    .celebration {
      animation: celebration 1s ease-in-out infinite alternate;
    }
    @keyframes celebration {
      from { text-shadow: 0 0 10px #a67c52; }
      to { text-shadow: 0 0 20px #ffd700; color: #c03030; }
    }
  </style>
</head>
<body>
  <h1>å¤©æ·¨æ²™ç§‹æ€é¸æ“‡é¡Œ</h1>
  <div id="quiz-container"></div>
  <div id="result-box">
    <h2 id="result-title">ä½œç­”çµæœ</h2>
    <div id="score"></div>
    <div id="wrong-list"></div>
    <button onclick="retryWrong()" data-track-cat="quiz_action" data-track-lbl="retry_wrong">é‡æ¸¬éŒ¯é¡Œ</button>
    <button onclick="retryAll()" data-track-cat="quiz_action" data-track-lbl="retry_all">å…¨éƒ¨é‡æ¸¬</button>
  </div>

  <script>
    const questions = [
      {
        q: 'ï¼ˆ  ï¼‰ä½œè€…é€éæå¯«ã€Œæ¯è—¤è€æ¨¹æ˜é´‰ï¼Œå°æ©‹æµæ°´äººå®¶ã€ç‡Ÿé€ å‡ºä½•ç¨®æ°›åœï¼Ÿ',
        options: ['A. å®‰è©³å¯§éœ', 'B. æ­¡æ¨‚å–œæ‚…', 'C. ç·Šå¼µåˆºæ¿€', 'D. ç†±é¬§å–§å›‚'],
        answer: 0,
        explanation: 'é€™å¥æå¯«äº†å‚æ™šæ™‚åˆ†çš„å¯§éœé„‰æ‘æ™¯è±¡ï¼Œç‡Ÿé€ å‡ºå®‰è©³ã€éœè¬çš„æ°›åœã€‚'
      },
      {
        q: 'ï¼ˆ  ï¼‰ã€Œå¤•é™½è¥¿ä¸‹ï¼Œæ–·è…¸äººåœ¨å¤©æ¶¯ã€ä¸­çš„ã€Œæ–·è…¸äººã€æœ€å¯èƒ½è¡¨ç¾å‡ºä»€éº¼æƒ…æ„Ÿï¼Ÿ',
        options: ['A. å°è‡ªç„¶çš„è®šç¾', 'B. å°å®¶é„‰çš„æ€å¿µ', 'C. å°è¦ªäººçš„æ‡·ç–‘', 'D. å°æ„›æƒ…çš„æ­¡å–œ'],
        answer: 1,
        explanation: 'ã€Œæ–·è…¸äººã€æŒ‡æ¥µåº¦æ‚²å‚·ã€æ€å¿µçš„äººï¼Œè¡¨ç¾å‡ºå°å®¶é„‰æˆ–è¦ªäººçš„å¼·çƒˆæ€å¿µã€‚'
      },
      {
        q: 'ï¼ˆ  ï¼‰ã€ˆå¤©æ·¨æ²™ï¼ç§‹æ€ã€‰çš„æ™¯ç‰©æ’åˆ—æ–¹å¼æœ‰ä½•ç‰¹è‰²ï¼Ÿ',
        options: ['A. é †æ™‚åºæå¯«æ—©ä¸­æ™š', 'B. ç”±å‹•åˆ°éœ', 'C. ç”±é åˆ°è¿‘', 'D. å¾æ•´é«”åˆ°å±€éƒ¨'],
        answer: 3,
        explanation: 'å…¨æ›²ç”±å¤§æ™¯ã€Œæ¯è—¤è€æ¨¹æ˜é´‰ã€åˆ°å°æ™¯ã€Œæ–·è…¸äººåœ¨å¤©æ¶¯ã€ï¼Œå‘ˆç¾ç”±æ•´é«”åˆ°å±€éƒ¨çš„å¯«æ³•ã€‚'
      },
      {
        q: 'ï¼ˆ  ï¼‰ã€Œæ¯è—¤ã€ã€ã€Œè€æ¨¹ã€ã€ã€Œæ˜é´‰ã€çš„æå¯«å…±åŒç‡Ÿé€ å‡ºä½•ç¨®å­£ç¯€æ°›åœï¼Ÿ',
        options: ['A. æ˜¥å¤©çš„ç”Ÿæ°£ç›ç„¶', 'B. å¤å¤©çš„ç†±çƒˆå¥”æ”¾', 'C. ç§‹å¤©çš„è•­ç‘Ÿæ·’æ¶¼', 'D. å†¬å¤©çš„å¯’å†·æ²‰å¯‚'],
        answer: 2,
        explanation: 'é€™äº›æ„è±¡çš†èˆ‡ç§‹å¤©çš„è•­æ¢æ™¯è±¡ç›¸ç¬¦ï¼Œç‡Ÿé€ å‡ºæ·’æ¶¼çš„ç§‹æ„ã€‚'
      },
      {
        q: 'ï¼ˆ  ï¼‰å…¨è©©ä»¥ä¸€äººç¨±ç‚ºã€Œæ–·è…¸äººã€ï¼Œå…¶æ„ç¾©ç‚ºä½•ï¼Ÿ',
        options: ['A. è¡¨ç¾ä¸»äººå…¬çš„èº«ä¸–åå·', 'B. å°‡æ™¯ç‰©è½‰åŒ–ç‚ºäººç‰©æƒ…æ„Ÿçš„å»¶ä¼¸', 'C. è®šç¾æµæµªè€…çš„å …å¼·', 'D. æè¿°è‹±é›„çš„å­¤ç¨'],
        answer: 1,
        explanation: 'è©©æœ«ä»¥ã€Œæ–·è…¸äººã€é»å‡ºä¸»è§’å…§å¿ƒæƒ…æ„Ÿï¼Œå°‡ä¹‹å‰çš„æ™¯è±¡èˆ‡äººç‰©æƒ…æ„Ÿçµåˆã€‚'
      }
    ];

    let current = 0;
    let userAnswers = [];
    let wrongAnswers = [];
    let currentList = [...questions];

    function createQuiz(questionsToRender) {
      const container = document.getElementById('quiz-container');
      container.innerHTML = '';

      questionsToRender.forEach((q, index) => {
        const box = document.createElement('div');
        box.className = 'question-box';
        if (index === 0) box.classList.add('active');

        const question = document.createElement('p');
        question.innerText = `${index + 1}. ${q.q.replace(/[ï¼ˆ|ï¼‰]/g, '')}`;
        box.appendChild(question);

        q.options.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.className = 'option-button';
          btn.innerText = opt;
          
          // è‡ªå‹•åŠ å…¥è¿½è¹¤å±¬æ€§
          btn.setAttribute('data-track-cat', 'quiz_option');
          btn.setAttribute('data-track-lbl', `q${index + 1}_option_${i}`);

          btn.onclick = () => {
            const buttons = box.querySelectorAll('.option-button');
            buttons.forEach(b => b.disabled = true);
            btn.style.backgroundColor = i === q.answer ? '#b5d7a8' : '#e8a1a1';
            userAnswers[index] = i;
            if (q.answer !== i) wrongAnswers.push(index);
          };
          box.appendChild(btn);
        });

        const nav = document.createElement('div');
        if (index > 0) {
          const prevBtn = document.createElement('button');
          prevBtn.innerText = 'ä¸Šä¸€é¡Œ';
          prevBtn.onclick = () => showQuestion(index - 1);
          
          // åŠ å…¥è¿½è¹¤
          prevBtn.setAttribute('data-track-cat', 'quiz_nav');
          prevBtn.setAttribute('data-track-lbl', 'prev_btn');
          nav.appendChild(prevBtn);
        }
        if (index < questionsToRender.length - 1) {
          const nextBtn = document.createElement('button');
          nextBtn.innerText = 'ä¸‹ä¸€é¡Œ';
          nextBtn.onclick = () => showQuestion(index + 1);

          // åŠ å…¥è¿½è¹¤
          nextBtn.setAttribute('data-track-cat', 'quiz_nav');
          nextBtn.setAttribute('data-track-lbl', 'next_btn');
          nav.appendChild(nextBtn);
        } else {
          const submitBtn = document.createElement('button');
          submitBtn.innerText = 'äº¤å·';
          submitBtn.onclick = () => showResult(questionsToRender);

          // åŠ å…¥è¿½è¹¤
          submitBtn.setAttribute('data-track-cat', 'quiz_action');
          submitBtn.setAttribute('data-track-lbl', 'submit_quiz');
          nav.appendChild(submitBtn);
        }
        box.appendChild(nav);
        container.appendChild(box);
      });
    }

    function showQuestion(index) {
      const boxes = document.getElementsByClassName('question-box');
      for (let i = 0; i < boxes.length; i++) boxes[i].classList.remove('active');
      boxes[index].classList.add('active');
    }

    function showResult(list) {
      document.getElementById('result-box').style.display = 'block';
      const score = list.length - wrongAnswers.length;
      const scoreEl = document.getElementById('score');
      const title = document.getElementById('result-title');
      const wrongDiv = document.getElementById('wrong-list');

      if (score === list.length) {
        title.classList.add('celebration');
        title.innerText = 'ğŸ‰ æ­å–œä½ å…¨ç­”å°äº†ï¼ğŸ‰';
        wrongDiv.innerHTML = '';
      } else {
        title.classList.remove('celebration');
        title.innerText = 'ä½œç­”çµæœ';
        wrongDiv.innerHTML = '<h3>éŒ¯èª¤é¡Œç›®è§£æï¼š</h3>';
        wrongAnswers.forEach(i => {
          const wrong = document.createElement('div');
          wrong.className = 'explanation-box';
          wrong.innerHTML = `<p><strong>${i + 1}. ${list[i].q.replace(/[ï¼ˆ|ï¼‰]/g, '')}</strong><br>
            ä½ çš„ç­”æ¡ˆï¼š${list[i].options[userAnswers[i]]}<br>
            æ­£ç¢ºç­”æ¡ˆï¼š${list[i].options[list[i].answer]}<br>
            <span class="explanation">è§£æï¼š${list[i].explanation}</span></p>`;
          wrongDiv.appendChild(wrong);
        });
      }

      scoreEl.innerHTML = `<p style="font-size: 1.4em;"><strong>ä½ ç­”å°äº† ${score} é¡Œï¼Œå…± ${list.length} é¡Œã€‚</strong></p>`;
    }

    function retryWrong() {
      if (wrongAnswers.length === 0) return;
      const retryList = wrongAnswers.map(i => currentList[i]);
      current = 0;
      userAnswers = [];
      wrongAnswers = [];
      document.getElementById('result-box').style.display = 'none';
      currentList = retryList;
      createQuiz(currentList);
    }

    function retryAll() {
      current = 0;
      userAnswers = [];
      wrongAnswers = [];
      currentList = [...questions];
      document.getElementById('result-box').style.display = 'none';
      createQuiz(currentList);
    }

    createQuiz(questions);
  </script>
  
  <script src="tracking.js"></script>
</body>
</html>
<footer>
    <br>
    <p style="text-align: center;">Created by Chu Pei Yi</p>
</footer>