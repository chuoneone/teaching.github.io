<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIT3 ç¿’ä½œ</title>
    <link rel="icon" href="dog.png" type="image/png">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter for English, Noto Sans TC for Chinese -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* è‡ªå®šç¾©æ¨£å¼ */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }

        /* äº’å‹•å–®å­—æ¨£å¼ */
        .word {
            position: relative;
            cursor: pointer;
            border-bottom: 1px dotted #a8a29e; /* stone-400 */
            transition: color 0.2s;
        }

        .word:hover {
            color: #d97706; /* amber-600 */
        }

        /* ä¸­æ–‡ç¿»è­¯æç¤ºæ¡† (Tooltip) */
        .word .tooltip {
            visibility: hidden;
            width: max-content;
            background-color: #1f2937; /* gray-800 */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none; /* é¿å…æç¤ºæ¡†å¹²æ“¾æ»‘é¼ äº‹ä»¶ */
        }

        .word:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        /* å°è¦½åˆ†é æ¨£å¼ */
        .nav-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1.125rem; /* text-lg */
            font-weight: 700; /* font-bold */
            color: #a8a29e; /* stone-400 */
            border-bottom: 3px solid transparent;
            transition: color 0.2s, border-color 0.2s;
        }
        
        .nav-tab:hover {
            color: #78716c; /* stone-500 */
        }
        
        .nav-tab.active {
            color: #d97706; /* amber-600 */
            border-bottom-color: #d97706; /* amber-600 */
        }
    </style>
</head>
<body class="bg-amber-50 flex items-center justify-center min-h-screen p-4">

    <!-- æ¸¬é©—ä¸»å®¹å™¨ -->
    <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full max-w-3xl">
        
        <!-- å°è¦½åˆ†é  -->
        <div id="nav-tabs" class="flex border-b border-stone-200 mb-4">
            <!-- å°è¦½æŒ‰éˆ•å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <h1 id="main-title" class="text-2xl sm:text-3xl font-bold text-stone-800 text-center mb-2">UNIT3 ç¿’ä½œ</h1>
        <h2 id="section-title" class="text-xl sm:text-2xl font-bold text-amber-700 text-center mb-4"></h2>
        
        <!-- é€²åº¦æ¢ -->
        <div class="w-full bg-stone-200 rounded-full h-2.5 mb-6">
            <div id="progress-bar" class="bg-amber-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
        
        <!-- é¡Œç›®å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆæ–¼æ­¤ -->
        <div id="questions-wrapper"></div>

        <!-- åŠŸèƒ½æŒ‰éˆ•èˆ‡åˆ†æ•¸é¡¯ç¤ºå€ -->
        <div id="controls" class="mt-8 text-center">
            <!-- æŒ‰éˆ•å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>
        <div id="score-display" class="mt-6 text-center hidden"></div>
    </div>

    <!-- æç¤ºè¨Šæ¯ Modal -->
    <div id="alert-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-20">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center">
            <p id="alert-message" class="text-lg text-gray-800 mb-4"></p>
            <button id="close-alert-btn" class="bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 transition-colors">çŸ¥é“äº†</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- è³‡æ–™å®šç¾©å€ ---
            const translations = {
                "what's": "ä»€éº¼æ˜¯", "what": "ä»€éº¼", "the": "é€™å€‹", "today": "ä»Šå¤©", "it's": "å®ƒæ˜¯", "may": "äº”æœˆ",
                "time": "æ™‚é–“", "day": "å¤©", "month": "æœˆä»½", "date": "æ—¥æœŸ", "when": "ä½•æ™‚", "is": "æ˜¯", "her": "å¥¹çš„",
                "school": "å­¸æ ¡", "november": "åä¸€æœˆ", "on": "åœ¨", "in": "åœ¨...è£¡é¢", "your": "ä½ çš„", "birthday": "ç”Ÿæ—¥",
                "oh": "å“¦", "also": "ä¹Ÿ", "new": "æ–°çš„", "year's": "å¹´çš„", "at": "åœ¨", "nine": "ä¹", "thirty": "ä¸‰å",
                "january": "ä¸€æœˆ", "first": "ç¬¬ä¸€", "december": "åäºŒæœˆ", "this": "é€™å€‹", "boy": "ç”·å­©", "has": "æœ‰",
                "beautiful": "ç¾éº—çš„", "eyes": "çœ¼ç›", "and": "å’Œ", "long": "é•·çš„", "hair": "é ­é«®", "i": "æˆ‘",
                "like": "å–œæ­¡", "him": "ä»–(å—æ ¼)", "very": "éå¸¸", "much": "å¾ˆå¤š", "he": "ä»–(ä¸»æ ¼)", "his": "ä»–çš„", "he's": "ä»–æ˜¯",
                "hi": "å—¨", "i'm": "æˆ‘æ˜¯", "nice": "é«˜èˆˆçš„", "to": "å»", "meet": "é‡è¦‹", "you": "ä½ ", "too": "ä¹Ÿ", "see": "çœ‹åˆ°",
                "you're": "ä½ æ˜¯", "welcome": "ä¸å®¢æ°£", "excuse": "è«‹å•", "me": "æˆ‘", "are": "æ˜¯", "mr.": "å…ˆç”Ÿ", "walker": "æ²ƒå…‹",
                "yes": "æ˜¯çš„", "larry": "è³´ç‘", "no": "ä¸æ˜¯", "not": "ä¸", "friend": "æœ‹å‹", "who's": "èª°æ˜¯", "that": "é‚£å€‹",
                "girl": "å¥³å­©", "she": "å¥¹", "really": "çœŸçš„", "tall": "é«˜çš„", "a": "ä¸€å€‹", "happy": "å¿«æ¨‚çš„", "she's": "å¥¹æ˜¯",
                "ariel": "æ„›éº—å…’", "our": "æˆ‘å€‘çš„", "classmate": "åŒå­¸", "eric's": "è‰¾ç‘å…‹çš„", "aunt": "é˜¿å§¨", "writer": "ä½œå®¶",
                "doctor": "é†«ç”Ÿ", "housewife": "å®¶åº­ä¸»å©¦", "how": "å¦‚ä½•", "old": "å¹´è€çš„", "alice": "æ„›éº—çµ²", "brad": "å¸ƒèŠå¾·",
                "they": "ä»–å€‘", "my": "æˆ‘çš„", "family": "å®¶åº­", "ten": "å", "twelve": "åäºŒ", "cook": "å»šå¸«", "nurse": "è­·å£«",
                "they're": "ä»–å€‘æ˜¯", "erasers": "æ©¡çš®æ“¦", "where": "åœ¨å“ªè£¡", "those": "é‚£äº›", "these": "é€™äº›", "pens": "ç­†(è¤‡æ•¸)", 
                "aren't": "ä¸æ˜¯", "for": "çµ¦/ç‚ºäº†", "desk": "æ›¸æ¡Œ", "where's": "åœ¨å“ªè£¡", "notebook": "ç­†è¨˜æœ¬", "from": "å¾", 
                "uncle": "å”å”/ä¼¯ä¼¯", "under": "åœ¨...ä¸‹é¢", "chair": "æ¤…å­", "enough": "è¶³å¤ çš„", "one": "ä¸€", "person": "äºº", 
                "favorite": "æœ€å–œæ­¡çš„", "color": "é¡è‰²", "gray": "ç°è‰²", "purple": "ç´«è‰²", "table": "æ¡Œå­", "isn't": "ä¸æ˜¯", 
                "red": "ç´…è‰²", "watch": "æ‰‹éŒ¶", "special": "ç‰¹åˆ¥çš„", "parents": "çˆ¶æ¯", "home": "å®¶", "we": "æˆ‘å€‘", "park": "å…¬åœ’", 
                "house": "æˆ¿å­", "maybe": "ä¹Ÿè¨±", "kitchen": "å»šæˆ¿",
                
                // --- C å¤§é¡Œå–®å­— ---
                "jenny": "çå¦®", "bag": "åŒ…åŒ…", "sofa": "æ²™ç™¼", "sure": "ç¢ºå®šçš„", "look": "çœ‹", "sign": "æ¨™ç¤º",
                "now": "ç¾åœ¨", "please": "è«‹", "write": "å¯«", "down": "ä¸‹", "name": "åå­—", "sorry": "æŠ±æ­‰",
                "can't": "ä¸èƒ½", "turn": "è¼ªæµ", "can": "èƒ½", "wait": "ç­‰å¾…", "here": "é€™è£¡", "wash": "æ´—", "dog": "ç‹—",
                
                // --- A å¤§é¡Œå–®å­— ---
                "use": "ä½¿ç”¨", "hurry": "å¿«é»", "talk": "èªªè©±", "follow": "è·Ÿéš¨", "fight": "æ‰“æ¶", 
                "bus": "å…¬è»Š", "let's": "è®“æˆ‘å€‘", "phone": "é›»è©±", "class": "èª²å ‚", "don't": "ä¸è¦",

                // --- B å¤§é¡Œå–®å­— (æ–°å¢) ---
                "wake": "é†’ä¾†", "up": "èµ·ä¾†", "george": "å–¬æ²»", "careful": "å°å¿ƒçš„", "near": "é è¿‘", "mean": "å…‡æƒ¡çš„",
                "guys": "å„ä½/å¤§å®¶", "come in": "é€²ä¾†", "thanks": "è¬è¬",
                "vivian": "è–‡è–‡å®‰", "who": "èª°", "two": "å…©å€‹", "men": "ç”·äºº(è¤‡æ•¸)", "man": "ç”·äºº(å–®æ•¸)", "door": "é–€", 
                "father": "çˆ¶è¦ª", "woman": "å¥³äºº(å–®æ•¸)", "women": "å¥³äºº(è¤‡æ•¸)",

                // --- D å¤§é¡Œå–®å­— (æ–°å¢) ---
                "sister": "å§Šå¦¹", "paul": "ä¿ç¾…", "vic": "ç¶­å…‹", "fred": "å¼—é›·å¾·", "roy": "ç¾…ä¼Š", "play": "ç©", 
                "rita": "éº—å¡”", "son": "å…’å­", "close": "é—œä¸Š", "comic": "æ¼«ç•«", "books": "æ›¸(è¤‡æ•¸)", "bed": "åºŠ", 
                "go": "å»", "kim": "é‡‘", "husband": "ä¸ˆå¤«", "police": "è­¦å¯Ÿ", "officer": "å®˜å“¡", 
                "markers": "éº¥å…‹ç­†(è¤‡æ•¸)", "okay": "å¥½çš„", "car": "è»Š", "its": "å®ƒçš„(æ‰€æœ‰æ ¼)", "them": "ä»–å€‘(å—æ ¼)",
                "their": "ä»–å€‘çš„(æ‰€æœ‰æ ¼)", "us": "æˆ‘å€‘(å—æ ¼)",

                // --- F å¤§é¡Œå–®å­— (æ–°å¢) ---
                "hello": "å“ˆå›‰", "harry's": "å“ˆåˆ©çš„", "party": "æ´¾å°", "ride": "é¨", "bikes": "è…³è¸è»Š(è¤‡æ•¸)",
                "dad": "çˆ¸çˆ¸", "safe": "å®‰å…¨çš„", "take": "æ‹¿å–/æ‹", "pictures": "ç…§ç‰‡(è¤‡æ•¸)", "rule": "è¦å‰‡", "open": "æ‰“é–‹",

                // --- G å¤§é¡Œå–®å­— (æ–°å¢) ---
                "picture": "åœ–ç‰‡", "place": "åœ°æ–¹", "museum": "åšç‰©é¤¨", "people": "äººå€‘", "eat": "åƒ",
                "drink": "å–", "room": "æˆ¿é–“"
            };

            // --- å¤§é¡Œ A (æ–°é¡Œç›®) ---
            const quizDataA = [
                {
                    question: "Please ______ me.",
                    options: ["use", "hurry", "follow", "fight"],
                    answer: "C",
                    hint: "ç•¶ä½ å¸Œæœ›åˆ¥äººè·Ÿè‘—ä½ æ™‚ï¼Œä½ æœƒèªª 'Please follow me' (è«‹è·Ÿè‘—æˆ‘)ã€‚"
                },
                {
                    question: "The bus is here. Let's ______.",
                    options: ["talk", "wash", "hurry", "follow"],
                    answer: "C",
                    hint: "å…¬è»Šä¾†äº†ï¼Œæ‰€ä»¥æ‡‰è©²è¦ã€Œå¿«é»ã€(hurry)ã€‚"
                },
                {
                    question: "Please don't ______.",
                    options: ["fight", "use", "talk", "wash"],
                    answer: "A",
                    hint: "é€™æ˜¯ä¸€å€‹ç¥ˆä½¿å¥ï¼Œè¦æ±‚åˆ¥äººä¸è¦åšæŸäº‹ã€‚ã€Œæ‰“æ¶ã€(fight) æ˜¯é¸é …ä¸­å”¯ä¸€é©åˆçš„æƒ…å¢ƒã€‚"
                },
                {
                    question: "Don't ______ the phone in class.",
                    options: ["wash", "use", "fight", "talk"],
                    answer: "B",
                    hint: "åœ¨èª²å ‚ä¸Šï¼Œè€å¸«é€šå¸¸æœƒèªªã€Œä¸è¦ä½¿ç”¨(use)æ‰‹æ©Ÿã€ã€‚"
                }
            ];

            // --- å¤§é¡Œ B (æ–°é¡Œç›®) ---
            const quizDataB = [
                {
                    question: "______ up, George. It's time for class.",
                    options: ["Wake", "Work", "Walk", "Wash"],
                    answer: "A",
                    hint: "ã€ŒWake upã€æ˜¯ã€Œèµ·åºŠã€çš„ç‰‡èªï¼Œç¬¦åˆã€Œä¸Šèª²æ™‚é–“åˆ°äº†ã€çš„æƒ…å¢ƒã€‚"
                },
                {
                    question: "Be ______. Don't go near that mean dog.",
                    options: ["careful", "cool", "happy", "tall"],
                    answer: "A",
                    hint: "ç‹—ç‹—å¾ˆå…‡ (mean dog)ï¼Œæ‰€ä»¥è¦ã€Œå°å¿ƒã€(careful)ã€‚"
                },
                {
                    question: "A: Hey, ______. Welcome to my house. Come in. B: Thanks.",
                    options: ["boy", "girls", "guys", "man"],
                    answer: "C",
                    hint: "ã€ŒGuysã€æ˜¯ã€Œå„ä½ã€å¤§å®¶ã€çš„å£èªç”¨æ³•ï¼Œç”¨ä¾†ç¨±å‘¼ä¸€ç¾¤äººã€‚"
                },
                {
                    question: "A: Vivian, who are the two ______ at the door? B: They are my father and my uncle.",
                    options: ["man", "men", "woman", "women"],
                    answer: "B",
                    hint: "ã€Œtwoã€è¡¨ç¤ºè¤‡æ•¸ã€‚ã€Œmanã€(ç”·äºº) çš„è¤‡æ•¸æ˜¯ã€Œmenã€ã€‚"
                }
            ];

            // --- å¤§é¡Œ C (åŸé¡Œç›®) ---
            const quizDataC = [
                {
                    question: "A: Is Jenny at home? B: ______ Maybe she is. Her bag is on the sofa.",
                    options: ["I'm not sure.", "Look at the sign.", "Where is she now?", "Please write down her name."],
                    answer: "A",
                    hint: "B å›ç­”ã€Œä¹Ÿè¨±å¥¹åœ¨ã€ï¼Œè¡¨ç¤ºä¸ç¢ºå®šï¼Œæ‰€ä»¥ (A)ã€Œæˆ‘ä¸ç¢ºå®šã€æ˜¯æœ€å¥½çš„ç­”æ¡ˆã€‚"
                },
                {
                    question: "A: ______ B: Sorry, I can't. It's your turn.",
                    options: ["Can you see me?", "Can you wait for me here?", "Can you wait for your turn?", "Can you wash the dog for me?"],
                    answer: "D",
                    hint: "B å›ç­”ã€ŒæŠ±æ­‰ï¼Œæˆ‘ä¸èƒ½ã€‚è¼ªåˆ°ä½ äº†ã€‚ã€ï¼Œè¡¨ç¤º A è«‹æ±‚ B åšæŸäº‹ã€‚ (D)ã€Œä½ èƒ½å¹«æˆ‘æ´—ç‹—å—ï¼Ÿã€æ˜¯ä¸€å€‹è«‹æ±‚ï¼Œç¬¦åˆæƒ…å¢ƒã€‚"
                }
            ];

            // --- å¤§é¡Œ D (æ–°é¡Œç›®) ---
            const quizDataD = [
                {
                    question: "______ (This watch) is from my sister.",
                    options: ["He", "She", "It", "They"],
                    answer: "C",
                    hint: "ã€ŒThis watchã€(é€™éš»æ‰‹éŒ¶) æ˜¯å–®æ•¸ç‰©å“ï¼Œä¸»æ ¼ä»£åè©ç”¨ Itã€‚"
                },
                {
                    question: "Jenny and Paul are ______ (Vic and Fred's) parents.",
                    options: ["his", "her", "our", "their"],
                    answer: "D",
                    hint: "ã€ŒVic and Fred'sã€(ç¶­å…‹å’Œå¼—é›·å¾·çš„) æ˜¯è¤‡æ•¸æ‰€æœ‰æ ¼ï¼Œä»£åè©ç”¨ theirã€‚"
                },
                {
                    question: "Talk to ______ (Roy and I), please.",
                    options: ["we", "us", "our", "them"],
                    answer: "B",
                    hint: "ã€ŒRoy and Iã€(ç¾…ä¼Šå’Œæˆ‘) æ˜¯è¤‡æ•¸ï¼Œåœ¨å‹•è© 'Talk to' å¾Œé¢è¦ç”¨å—æ ¼ usã€‚"
                },
                {
                    question: "Let's not play with ______ (Rita's son).",
                    options: ["he", "his", "him", "her"],
                    answer: "C",
                    hint: "ã€ŒRita's sonã€(éº—å¡”çš„å…’å­) æ˜¯å–®æ•¸ç”·æ€§ï¼Œåœ¨ä»‹ä¿‚è© 'with' å¾Œé¢è¦ç”¨å—æ ¼ himã€‚"
                },
                {
                    question: "Please close ______ (the comic books) and go to bed.",
                    options: ["it", "its", "they", "them"],
                    answer: "D",
                    hint: "ã€Œthe comic booksã€(é€™äº›æ¼«ç•«æ›¸) æ˜¯è¤‡æ•¸ç‰©å“ï¼Œåœ¨å‹•è© 'close' å¾Œé¢è¦ç”¨å—æ ¼ themã€‚"
                },
                {
                    question: "Look at ______ (the girl). She is very tall.",
                    options: ["she", "her", "his", "him"],
                    answer: "B",
                    hint: "ã€Œthe girlã€(é‚£å€‹å¥³å­©) æ˜¯å–®æ•¸å¥³æ€§ï¼Œåœ¨å‹•è© 'Look at' å¾Œé¢è¦ç”¨å—æ ¼ herã€‚"
                },
                {
                    question: "______ (Kim's husband) is a police officer.",
                    options: ["He", "His", "Him", "She"],
                    answer: "A",
                    hint: "ã€ŒKim's husbandã€(é‡‘çš„ä¸ˆå¤«) æ˜¯å–®æ•¸ç”·æ€§ï¼Œç•¶ä½œå¥å­ä¸»è©è¦ç”¨ä¸»æ ¼ Heã€‚"
                },
                {
                    question: "A: Where are ______ (the markers)? B: On the table.",
                    options: ["it", "its", "they", "them"],
                    answer: "C",
                    hint: "ã€Œthe markersã€(é€™äº›éº¥å…‹ç­†) æ˜¯è¤‡æ•¸ç‰©å“ï¼Œç•¶ä½œå¥å­ä¸»è©ç”¨ä¸»æ ¼ theyã€‚"
                },
                {
                    question: "A: Can you go wash ______ (your car)? B: Okay.",
                    options: ["it", "its", "he", "him"],
                    answer: "A",
                    hint: "ã€Œyour carã€(ä½ çš„è»Š) æ˜¯å–®æ•¸ç‰©å“ï¼Œåœ¨å‹•è© 'wash' å¾Œé¢è¦ç”¨å—æ ¼ itã€‚"
                }
            ];

            // --- å¤§é¡Œ F (æ–°é¡Œç›®) ---
            const quizDataF = [
                {
                    question: "A: Hello. Is this Harry's welcome party? B: Yes. ______",
                    options: ["Don't open it.", "Let's follow the rule.", "Please come in.", "Be safe."],
                    answer: "C",
                    hint: "å°æ–¹åœ¨æ´¾å°é–€å£ï¼ŒB å›ç­”ã€ŒYesã€(æ˜¯çš„)ï¼Œæ¥è‘—æ‡‰è©²æœƒé‚€è«‹å°æ–¹ã€Œè«‹é€²ã€(Please come in.)ã€‚"
                },
                {
                    question: "A: Can we ride our bikes to the park, Dad? B: Sure. ______",
                    options: ["Don't open it.", "Let's follow the rule.", "Please come in.", "Be safe."],
                    answer: "D",
                    hint: "çˆ¸çˆ¸åŒæ„å­©å­å€‘é¨è…³è¸è»Šå»å…¬åœ’ï¼Œæ¥è‘—æé†’ä»–å€‘ã€Œæ³¨æ„å®‰å…¨ã€(Be safe.) æ˜¯æœ€åˆç†çš„ã€‚"
                },
                {
                    question: "A: Look at the sign. We can't take pictures here. B: I see. ______",
                    options: ["Don't open it.", "Let's follow the rule.", "Please come in.", "Be safe."],
                    answer: "B",
                    hint: "A æåˆ°å‘Šç¤ºç‰Œèªªä¸èƒ½æ‹ç…§ï¼ŒB è¡¨ç¤ºçŸ¥é“äº† (I see)ï¼Œæ¥è‘—æ‡‰è©²æœƒèªªã€Œæˆ‘å€‘éµå®ˆè¦å®šå§ã€(Let's follow the rule.)ã€‚"
                }
            ];

            // --- å¤§é¡Œ G (æ–°é¡Œç›®) ---
            const quizDataG = [
                {
                    question: "A: Look at this picture. What is this ______? B: It is a museum.",
                    options: ["place", "park", "house", "room"],
                    answer: "A",
                    hint: "B å›ç­”ã€ŒIt is a museumã€(å®ƒæ˜¯ä¸€é–“åšç‰©é¤¨)ã€‚ã€Œmuseumã€æ˜¯ä¸€ç¨®ã€Œplaceã€(åœ°æ–¹)ã€‚"
                },
                {
                    question: "A: Can people eat ______ drink in the museum?",
                    options: ["and", "so", "or", "but"],
                    answer: "C",
                    hint: "è©¢å•æ˜¯å¦èƒ½ã€Œåƒã€æˆ–ã€å–ã€ï¼Œç”¨ or ä¾†é€£æ¥å…©å€‹å‹•è©ã€‚"
                },
                {
                    question: "A: (Can people eat or drink in the museum?) B: No, ______ ______.",
                    options: ["it, can't", "they, can", "we, don't", "they, can't"],
                    answer: "D",
                    hint: "A å•çš„æ˜¯ã€Œpeopleã€(äººå€‘)ï¼Œæ˜¯è¤‡æ•¸ä¸»è©ï¼Œæ‰€ä»¥ç”¨ theyã€‚A ç”¨ 'Can' é–‹é ­å•å¥ï¼ŒB å›ç­”ã€ŒNoã€ï¼Œæ‰€ä»¥è¦ç”¨ can'tã€‚"
                }
            ];
            
            const allQuizData = {
                A: quizDataA,
                B: quizDataB,
                C: quizDataC,
                D: quizDataD,
                F: quizDataF,
                G: quizDataG
            };

            // --- ç‹€æ…‹è®Šæ•¸ ---
            let currentSection = 'A'; // é è¨­å¾ A å¤§é¡Œé–‹å§‹
            let currentQuestionIndex = 0;
            let score = 0;

            // --- DOM å…ƒç´  ---
            const questionsWrapper = document.getElementById('questions-wrapper');
            const controlsContainer = document.getElementById('controls');
            const scoreDisplay = document.getElementById('score-display');
            const progressBar = document.getElementById('progress-bar');
            const mainTitle = document.getElementById('main-title');
            const sectionTitle = document.getElementById('section-title');
            const navTabsContainer = document.getElementById('nav-tabs');
            const alertModal = document.getElementById('alert-modal');
            const alertMessage = document.getElementById('alert-message');
            const closeAlertBtn = document.getElementById('close-alert-btn');

            // --- åŠŸèƒ½å‡½å¼å€ ---

            /**
             * å°‡æ–‡å­—è½‰æ›ç‚ºåŒ…å«äº’å‹•å¼å–®å­—çš„ HTML
             */
            function createInteractiveText(text) {
                const parts = text.split(/([a-zA-Z'â€™]+)/);
                return parts.map(part => {
                    const cleanPart = part.toLowerCase().replace(/â€™/g, "'");
                    if (translations[cleanPart]) {
                        return `<span class="word">${part}<span class="tooltip">${translations[cleanPart]}</span></span>`;
                    }
                    return part;
                }).join('');
            }

            /**
             * ä½¿ç”¨ç€è¦½å™¨ API æœ—è®€æ–‡å­—
             */
            function speak(text) {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.9;
                    window.speechSynthesis.speak(utterance);
                } else {
                    console.error("æ­¤ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åˆæˆåŠŸèƒ½ã€‚");
                }
            }

            /**
             * å»ºç«‹å–‡å­åœ–ç¤º (SVG)
             */
            function createSpeakerIcon(textToSpeak) {
                const svgNS = "http://www.w3.org/2000/svg";
                const svg = document.createElementNS(svgNS, "svg");
                svg.setAttribute("class", "h-5 w-5 text-amber-600 hover:text-amber-800 cursor-pointer flex-shrink-0");
                svg.setAttribute("viewBox", "0 0 20 20");
                svg.setAttribute("fill", "currentColor");
                
                const path = document.createElementNS(svgNS, "path");
                path.setAttribute("fill-rule", "evenodd");
                path.setAttribute("d", "M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.016 5.39a.75.75 0 01.016 1.046l-1.04 1.04a.75.75 0 11-1.06-1.06l1.04-1.04a.75.75 0 011.044-.026zM14.07 3.33a.75.75 0 01.016 1.046l-1.04 1.04a.75.75 0 01-1.06-1.06l1.04-1.04a.75.75 0 011.044-.026z");
                path.setAttribute("clip-rule", "evenodd");
                
                svg.appendChild(path);
                
                // é»æ“Šåœ–ç¤ºæ™‚æœ—è®€æ–‡å­—ï¼Œä¸¦åœæ­¢äº‹ä»¶å†’æ³¡
                svg.onclick = (e) => { 
                    e.stopPropagation(); 
                    speak(textToSpeak); 
                };
                
                return svg;
            }
            
            /**
             * é¡¯ç¤ºæŒ‡å®šç´¢å¼•çš„é¡Œç›®
             */
            function displayQuestion(index) {
                questionsWrapper.innerHTML = '';
                controlsContainer.innerHTML = '';
                
                const currentQuizData = allQuizData[currentSection];
                sectionTitle.textContent = `å¤§é¡Œ ${currentSection}`;

                const progressPercentage = (index / currentQuizData.length) * 100;
                progressBar.style.width = `${progressPercentage}%`;

                const q = currentQuizData[index];
                const questionBlock = document.createElement('div');
                questionBlock.id = `q-${index}`;

                const questionText = document.createElement('p');
                // æ”¹ç‚º flex ä½ˆå±€ä»¥å®¹ç´å–‡å­
                questionText.className = 'text-lg text-stone-700 mb-4 flex items-center gap-2'; 
                
                // å»ºç«‹å•é¡Œçš„å–‡å­åœ–ç¤º
                const questionSpeakerIcon = createSpeakerIcon(q.question.replace(/______/g, '')); // æœ—è®€æ™‚ç§»é™¤ç©ºæ ¼
                
                // å»ºç«‹å•é¡Œæ–‡å­—çš„ span
                const questionTextSpan = document.createElement('span');
                questionTextSpan.innerHTML = `<strong>${index + 1}.</strong> ${createInteractiveText(q.question)}`;
                
                // ä¾åºåŠ å…¥
                questionText.appendChild(questionSpeakerIcon);
                questionText.appendChild(questionTextSpan);
                
                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-3';
                
                q.options.forEach((option, i) => {
                    const optionChar = String.fromCharCode(65 + i);
                    const optionContainer = document.createElement('div');
                    optionContainer.className = 'flex items-center p-3 border border-stone-300 rounded-lg transition-all cursor-pointer hover:bg-amber-50';
                    
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.id = `q${index}-opt${optionChar}`;
                    radio.name = `q${index}`;
                    radio.value = optionChar;
                    radio.className = 'h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300';

                    const label = document.createElement('label');
                    label.htmlFor = `q${index}-opt${optionChar}`;
                    // æ”¹ç‚º flex ä½ˆå±€ä»¥å®¹ç´å–‡å­
                    label.className = 'ml-3 block text-md text-stone-900 flex-1 cursor-pointer flex items-center gap-2';

                    // å»ºç«‹é¸é …çš„å–‡å­åœ–ç¤º
                    const optionSpeakerIcon = createSpeakerIcon(option);

                    // å»ºç«‹é¸é …æ–‡å­—çš„ span
                    const optionTextSpan = document.createElement('span');
                    optionTextSpan.innerHTML = `(${optionChar}) ${createInteractiveText(option)}`;

                    // ä¾åºåŠ å…¥
                    label.appendChild(optionSpeakerIcon);
                    label.appendChild(optionTextSpan);

                    optionContainer.onclick = () => { radio.checked = true; };
                    optionContainer.appendChild(radio);
                    optionContainer.appendChild(label);
                    optionsGrid.appendChild(optionContainer);
                });

                const hintContainer = document.createElement('div');
                hintContainer.className = 'mt-4';
                const hintButton = document.createElement('button');
                hintButton.className = 'text-sm text-amber-600 hover:text-amber-800';
                hintButton.textContent = 'ğŸ’¡ æç¤º';
                const hintText = document.createElement('p');
                hintText.className = 'hint-content hidden mt-2 text-sm text-stone-600 bg-yellow-100 p-2 rounded-md';
                hintText.textContent = q.hint;
                hintButton.onclick = () => hintText.classList.toggle('hidden');
                hintContainer.appendChild(hintButton);
                hintContainer.appendChild(hintText);
                
                questionBlock.appendChild(questionText);
                questionBlock.appendChild(optionsGrid);
                questionBlock.appendChild(hintContainer);
                questionsWrapper.appendChild(questionBlock);

                const submitButton = document.createElement('button');
                submitButton.className = 'w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-600 transition-colors focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-opacity-50';
                submitButton.textContent = 'æª¢æŸ¥ç­”æ¡ˆ';
                submitButton.onclick = () => checkCurrentAnswer(index);
                controlsContainer.appendChild(submitButton);
            }

            /**
             * æª¢æŸ¥ç•¶å‰é¡Œç›®çš„ç­”æ¡ˆ
             */
            function checkCurrentAnswer(index) {
                const selectedRadio = document.querySelector(`input[name="q${index}"]:checked`);

                if (!selectedRadio) {
                    alertMessage.textContent = 'è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼';
                    alertModal.classList.remove('hidden');
                    return;
                }
                
                const currentQuizData = allQuizData[currentSection];
                const q = currentQuizData[index];
                const questionBlock = document.getElementById(`q-${index}`);
                questionBlock.querySelectorAll('input[type="radio"]').forEach(radio => { radio.disabled = true; });
                questionBlock.querySelectorAll('div.flex.items-center').forEach(div => { div.onclick = null; div.classList.remove('hover:bg-amber-50'); div.style.cursor = 'default'; });


                const correctOptionValue = q.answer;
                const correctLabel = document.querySelector(`label[for="q${index}-opt${correctOptionValue}"]`);
                const userLabel = selectedRadio.nextElementSibling;
                
                if (selectedRadio.value === correctOptionValue) {
                    score++;
                    userLabel.parentElement.classList.add('bg-yellow-100', 'border-yellow-400', 'ring-2', 'ring-yellow-300');
                    userLabel.innerHTML += ' <span class="text-green-600 font-bold">âœ”ï¸</span>';
                } else {
                    userLabel.parentElement.classList.add('bg-red-100', 'border-red-400', 'ring-2', 'ring-red-300');
                    userLabel.innerHTML += ' <span class="text-red-600 font-bold">âŒ</span>';
                    correctLabel.parentElement.classList.add('bg-yellow-100', 'border-yellow-400');
                }

                controlsContainer.innerHTML = '';
                const nextButton = document.createElement('button');
                nextButton.className = 'w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-600 transition-colors';

                if (currentQuestionIndex < currentQuizData.length - 1) {
                    nextButton.textContent = 'ä¸‹ä¸€é¡Œ';
                    nextButton.onclick = () => {
                        currentQuestionIndex++;
                        displayQuestion(currentQuestionIndex);
                    };
                } else {
                    nextButton.textContent = 'å®Œæˆæ¸¬é©—';
                    nextButton.onclick = showFinalScore;
                }
                controlsContainer.appendChild(nextButton);
            }

            /**
             * é¡¯ç¤ºæœ€çµ‚åˆ†æ•¸
             */
            function showFinalScore() {
                const currentQuizData = allQuizData[currentSection];
                progressBar.style.width = '100%';
                questionsWrapper.innerHTML = '';
                controlsContainer.innerHTML = '';
                mainTitle.textContent = 'æ¸¬é©—å®Œæˆï¼';

                scoreDisplay.innerHTML = `
                    <p class="text-xl text-stone-600">ä½ çš„æœ€çµ‚åˆ†æ•¸</p>
                    <p class="text-5xl my-4 text-stone-800">${score} / ${currentQuizData.length}</p>
                `;
                scoreDisplay.classList.remove('hidden');

                const restartButton = document.createElement('button');
                restartButton.className = 'mt-6 w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-600 transition-colors';
                restartButton.textContent = 'é‡æ–°æ¸¬é©—æ­¤å¤§é¡Œ';
                restartButton.onclick = restartSection; // æ”¹ç‚ºé‡æ–°é–‹å§‹æœ¬å¤§é¡Œ
                scoreDisplay.appendChild(restartButton);
            }
            
            /**
             * é‡æ–°é–‹å§‹ç›®å‰çš„å¤§é¡Œ
             */
            function restartSection() {
                score = 0;
                currentQuestionIndex = 0;
                scoreDisplay.classList.add('hidden');
                mainTitle.textContent = 'UNIT3 ç¿’ä½œ';
                displayQuestion(0);
            }

            /**
             * åˆ‡æ›å¤§é¡Œ
             */
            function switchSection(sectionId) {
                currentSection = sectionId;
                
                // æ›´æ–°åˆ†é æ¨£å¼
                navTabsContainer.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.dataset.tab === sectionId) {
                        tab.classList.add('active');
                    }
                });
                
                // é‡ç½®ä¸¦é¡¯ç¤ºæ–°å¤§é¡Œ
                restartSection();
            }

            /**
             * åˆå§‹åŒ–æ¸¬é©—ä»‹é¢
             */
            function init() {
                // å»ºç«‹å°è¦½åˆ†é æŒ‰éˆ•
                Object.keys(allQuizData).forEach(sectionId => {
                    const tab = document.createElement('button');
                    tab.className = 'nav-tab';
                    tab.dataset.tab = sectionId;
                    tab.textContent = `å¤§é¡Œ ${sectionId}`;
                    tab.onclick = () => switchSection(sectionId);
                    navTabsContainer.appendChild(tab);
                });

                // è¨­å®šé è¨­å•Ÿç”¨çš„åˆ†é 
                navTabsContainer.querySelector(`.nav-tab[data-tab="${currentSection}"]`).classList.add('active');

                // ç›£è½ Modal é—œé–‰æŒ‰éˆ•
                closeAlertBtn.addEventListener('click', () => {
                    alertModal.classList.add('hidden');
                });
                
                // ç›£è½å–®å­—é»æ“Šç™¼éŸ³
                questionsWrapper.addEventListener('click', (e) => {
                    if (e.target.classList.contains('word')) {
                        speak(e.target.childNodes[0].nodeValue);
                    }
                });

                // é¡¯ç¤ºç¬¬ä¸€é¡Œ
                displayQuestion(currentQuestionIndex);
            }

            // --- ç¨‹å¼é€²å…¥é» ---
            init();
        });
    </script>
</body>
</html>





