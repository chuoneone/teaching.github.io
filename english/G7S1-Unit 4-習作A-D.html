<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNI4ç¿’ä½œA-D</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter for English, Noto Sans TC for Chinese -->
    <link rel="icon" href="dog.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* è‡ªå®šç¾©æ¨£å¼ */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }

        /* äº’å‹•å–®å­—æ¨£å¼ */
        .word {
            position: relative;
            cursor: pointer;
            border-bottom: 1px dotted #a8a29e; /* stone-400 */
            transition: color 0.2s;
        }

        .word:hover {
            color: #d97706; /* amber-600 */
        }

        /* ä¸­æ–‡ç¿»è­¯æç¤ºæ¡† (Tooltip) */
        .word .tooltip {
            visibility: hidden;
            width: max-content;
            background-color: #1f2937; /* gray-800 */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none; /* é¿å…æç¤ºæ¡†å¹²æ“¾æ»‘é¼ äº‹ä»¶ */
            font-size: 0.875rem;
        }

        .word:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        /* å´é‚Šæ¬„é¸å–®é …ç›®æ¿€æ´»ç‹€æ…‹ */
        .nav-item.active {
            background-color: #f59e0b; /* amber-500 */
            color: white;
        }
    </style>
</head>
<body class="bg-amber-50 min-h-screen flex flex-col md:flex-row">

    <!-- å´é‚Šå°è¦½åˆ— (Desktop) / é ‚éƒ¨å°è¦½åˆ— (Mobile) -->
    <nav class="bg-white shadow-md w-full md:w-64 md:min-h-screen flex-shrink-0 md:flex md:flex-col z-10">
        <div class="p-4 border-b md:border-b-0 md:border-r border-gray-200 flex items-center justify-between md:block">
            <h1 class="text-xl font-bold text-stone-800">UNI4ç¿’ä½œA-D</h1>
        </div>
        <div class="flex md:flex-col overflow-x-auto md:overflow-visible">
            <button onclick="switchSection('A')" id="nav-A" class="nav-item active whitespace-nowrap flex-1 md:flex-none text-left px-6 py-4 md:py-3 hover:bg-amber-100 transition-colors border-b-4 border-transparent md:border-l-4 md:border-b-0 focus:outline-none">
                <span class="font-bold block text-sm text-stone-500 mb-1">Part A</span>
                <span class="font-semibold">å–®å­—å¡«ç©º</span>
            </button>
            <button onclick="switchSection('B')" id="nav-B" class="nav-item whitespace-nowrap flex-1 md:flex-none text-left px-6 py-4 md:py-3 hover:bg-amber-100 transition-colors border-b-4 border-transparent md:border-l-4 md:border-b-0 focus:outline-none">
                <span class="font-bold block text-sm text-stone-500 mb-1">Part B</span>
                <span class="font-semibold">çœ‹åœ–å¯«ä½œ</span>
            </button>
            <button onclick="switchSection('C')" id="nav-C" class="nav-item whitespace-nowrap flex-1 md:flex-none text-left px-6 py-4 md:py-3 hover:bg-amber-100 transition-colors border-b-4 border-transparent md:border-l-4 md:border-b-0 focus:outline-none">
                <span class="font-bold block text-sm text-stone-500 mb-1">Part C</span>
                <span class="font-semibold">çœ‹åœ–å•ç­”</span>
            </button>
            <button onclick="switchSection('D')" id="nav-D" class="nav-item whitespace-nowrap flex-1 md:flex-none text-left px-6 py-4 md:py-3 hover:bg-amber-100 transition-colors border-b-4 border-transparent md:border-l-4 md:border-b-0 focus:outline-none">
                <span class="font-bold block text-sm text-stone-500 mb-1">Part D</span>
                <span class="font-semibold">ä»‹ç³»è©å¡«ç©º</span>
            </button>
        </div>
        <div class="mt-auto p-6 hidden md:block">
            <div class="text-xs text-stone-400 text-center">
                Interactive English Quiz<br>v2.2
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å…§å®¹å€ -->
    <main class="flex-1 p-4 md:p-8 flex items-start justify-center overflow-y-auto">
        <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full max-w-3xl transition-all duration-300">
            <div class="flex justify-between items-center mb-6">
                <h2 id="section-title" class="text-2xl font-bold text-stone-800">Part A: å–®å­—å¡«ç©º</h2>
                <span id="question-counter" class="text-stone-500 font-mono">1/5</span>
            </div>
            
            <!-- é€²åº¦æ¢ -->
            <div class="w-full bg-stone-200 rounded-full h-2.5 mb-8">
                <div id="progress-bar" class="bg-amber-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            
            <!-- é¡Œç›®å€åŸŸ -->
            <div id="questions-wrapper"></div>

            <!-- æ§åˆ¶å€ -->
            <div id="controls" class="mt-8 text-center"></div>
            
            <!-- åˆ†æ•¸é¡¯ç¤º -->
            <div id="score-display" class="mt-6 text-center hidden"></div>
        </div>
    </main>

    <!-- æç¤ºè¨Šæ¯ Modal -->
    <div id="alert-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center transform transition-all scale-100">
            <p id="alert-message" class="text-lg text-gray-800 mb-4"></p>
            <button id="close-alert-btn" class="bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 transition-colors">çŸ¥é“äº†</button>
        </div>
    </div>

    <script>
        // --- è³‡æ–™å®šç¾©å€ ---
        const translations = {
            // Part A åŸºç¤å–®å­—
            "what's": "ä»€éº¼æ˜¯", "what": "ä»€éº¼", "the": "é€™å€‹", "today": "ä»Šå¤©", "it's": "å®ƒæ˜¯", "may": "äº”æœˆ",
            "time": "æ™‚é–“", "day": "å¤©", "month": "æœˆä»½", "date": "æ—¥æœŸ", "when": "ä½•æ™‚", "is": "æ˜¯", "her": "å¥¹çš„",
            "school": "å­¸æ ¡", "november": "åä¸€æœˆ", "on": "åœ¨", "in": "åœ¨...è£¡é¢", "your": "ä½ çš„", "birthday": "ç”Ÿæ—¥",
            "oh": "å“¦", "also": "ä¹Ÿ", "new": "æ–°çš„", "year's": "å¹´çš„", "at": "åœ¨", "nine": "ä¹", "thirty": "ä¸‰å",
            "january": "ä¸€æœˆ", "first": "ç¬¬ä¸€", "december": "åäºŒæœˆ", "this": "é€™å€‹", "boy": "ç”·å­©", "has": "æœ‰",
            "beautiful": "ç¾éº—çš„", "eyes": "çœ¼ç›", "and": "å’Œ", "long": "é•·çš„", "hair": "é ­é«®", "i": "æˆ‘",
            "like": "å–œæ­¡", "him": "ä»–(å—æ ¼)", "very": "éå¸¸", "much": "å¾ˆå¤š", "he": "ä»–(ä¸»æ ¼)", "his": "ä»–çš„", "he's": "ä»–æ˜¯",
            "hi": "å—¨", "i'm": "æˆ‘æ˜¯", "nice": "é«˜èˆˆçš„", "to": "å»", "meet": "é‡è¦‹", "you": "ä½ ", "too": "ä¹Ÿ", "see": "çœ‹åˆ°",
            "you're": "ä½ æ˜¯", "welcome": "ä¸å®¢æ°£", "excuse": "è«‹å•", "me": "æˆ‘", "are": "æ˜¯", "mr.": "å…ˆç”Ÿ", "walker": "æ²ƒå…‹",
            "yes": "æ˜¯çš„", "larry": "è³´ç‘", "no": "ä¸æ˜¯", "not": "ä¸", "friend": "æœ‹å‹", "who's": "èª°æ˜¯", "that": "é‚£å€‹",
            "girl": "å¥³å­©", "she": "å¥¹", "really": "çœŸçš„", "tall": "é«˜çš„", "a": "ä¸€å€‹", "happy": "å¿«æ¨‚çš„", "she's": "å¥¹æ˜¯",
            "ariel": "æ„›éº—å…’", "our": "æˆ‘å€‘çš„", "classmate": "åŒå­¸", "eric's": "è‰¾ç‘å…‹çš„", "aunt": "é˜¿å§¨", "writer": "ä½œå®¶",
            "doctor": "é†«ç”Ÿ", "housewife": "å®¶åº­ä¸»å©¦", "how": "å¦‚ä½•", "old": "å¹´è€çš„", "alice": "æ„›éº—çµ²", "brad": "å¸ƒèŠå¾·",
            "they": "ä»–å€‘", "my": "æˆ‘çš„", "family": "å®¶åº­", "ten": "å", "twelve": "åäºŒ", "cook": "å»šå¸«", "nurse": "è­·å£«",
            "they're": "ä»–å€‘æ˜¯", "erasers": "æ©¡çš®æ“¦", "where": "åœ¨å“ªè£¡", "those": "é‚£äº›", "these": "é€™äº›", "pens": "ç­†(è¤‡æ•¸)", 
            "aren't": "ä¸æ˜¯", "for": "çµ¦/ç‚ºäº†", "desk": "æ›¸æ¡Œ", "where's": "åœ¨å“ªè£¡", "notebook": "ç­†è¨˜æœ¬", "from": "å¾", 
            "uncle": "å”å”/ä¼¯ä¼¯", "under": "åœ¨...ä¸‹é¢", "chair": "æ¤…å­", "enough": "è¶³å¤ çš„", "one": "ä¸€", "person": "äºº", 
            "favorite": "æœ€å–œæ­¡çš„", "color": "é¡è‰²", "gray": "ç°è‰²", "purple": "ç´«è‰²", "table": "æ¡Œå­", "isn't": "ä¸æ˜¯", 
            "red": "ç´…è‰²", "watch": "æ‰‹éŒ¶", "special": "ç‰¹åˆ¥çš„", "parents": "çˆ¶æ¯", "home": "å®¶", "we": "æˆ‘å€‘", "park": "å…¬åœ’", 
            "house": "æˆ¿å­", "maybe": "ä¹Ÿè¨±", "kitchen": "å»šæˆ¿", "jenny": "çå¦®", "bag": "åŒ…åŒ…", "sofa": "æ²™ç™¼", 
            "sure": "ç¢ºå®šçš„", "look": "çœ‹", "sign": "æ¨™ç¤º", "now": "ç¾åœ¨", "please": "è«‹", "write": "å¯«", "down": "ä¸‹", 
            "name": "åå­—", "sorry": "æŠ±æ­‰", "can't": "ä¸èƒ½", "turn": "è¼ªæµ", "can": "èƒ½", "wait": "ç­‰å¾…", "here": "é€™è£¡", 
            "wash": "æ´—", "dog": "ç‹—", "joseph": "ç´„ç‘Ÿå¤«", "fan": "ç²‰çµ²", "band": "æ¨‚åœ˜", "sing": "å”±æ­Œ", "songs": "æ­Œæ›²", 
            "video": "å½±ç‰‡", "may's": "æ¢…çš„", "popular": "å—æ­¡è¿çš„", "still": "ä»ç„¶", "waiting": "ç­‰å¾…", "ready": "æº–å‚™å¥½çš„",
            "movie": "é›»å½±", "let's": "æˆ‘å€‘ä¸€èµ·...", "go": "èµ°", "meet-and-greet": "è¦‹é¢æœƒ", "weekend": "é€±æœ«",
            "sunday": "æ˜ŸæœŸæ—¥", "afternoon": "ä¸‹åˆ", "great": "å¾ˆæ£’", "music": "éŸ³æ¨‚", "people": "äººå€‘",

            // Part B & C æ–°å¢å–®å­—
            "eight": "å…«", "twenty-five": "äºŒåäº”", "five": "äº”", "fifteen": "åäº”", 
            "wednesday": "æ˜ŸæœŸä¸‰", "friday": "æ˜ŸæœŸäº”", "tuesday": "æ˜ŸæœŸäºŒ", "ten": "å", "thirty": "ä¸‰å",
            "thursday": "æ˜ŸæœŸå››", "saturday": "æ˜ŸæœŸå…­", "monday": "æ˜ŸæœŸä¸€", "seven": "ä¸ƒ", "fifty": "äº”å",
            "four": "å››", "two": "äºŒ", "clock": "æ™‚é˜", "calendar": "æ—¥æ›†", "march": "ä¸‰æœˆ",
            "forty-five": "å››åäº”",

            // Part D æ–°å¢å–®å­—
            "concert": "æ¼”å”±æœƒ", "dinner": "æ™šé¤", "evening": "å‚æ™š/æ™šä¸Š", "mother's": "æ¯è¦ªçš„", "together": "ä¸€èµ·",
            "billy": "æ¯”åˆ©", "chen's": "é™³çš„", "o'clock": "é»é˜"
        };

        // é¡Œåº«è³‡æ–™
        const quizSections = {
            'A': {
                title: "Part A: å–®å­—å¡«ç©º",
                data: [
                    {
                        type: "choice",
                        question: "Joseph is a big ______ of the boy band. He can sing all their songs.",
                        options: ["fan", "video", "popular", "weekend"],
                        answer: "A",
                        hint: "ä»–éå¸¸å–œæ­¡é€™å€‹æ¨‚åœ˜ï¼Œç”šè‡³æœƒå”±ä»–å€‘æ‰€æœ‰çš„æ­Œï¼Œæ‰€ä»¥ä»–æ˜¯å€‹...ï¼Ÿ"
                    },
                    {
                        type: "choice",
                        question: "I'm watching a music ______ of my favorite band. It's great.",
                        options: ["ready", "popular", "video", "fan"],
                        answer: "C",
                        hint: "ä½ é€šå¸¸æœƒã€Œè§€çœ‹(watch)ã€ä»€éº¼è·ŸéŸ³æ¨‚æœ‰é—œçš„æ±è¥¿ï¼Ÿ"
                    },
                    {
                        type: "choice",
                        question: "May's Kitchen is really ______. Look! It's 1:15 p.m. now, but many people are still waiting for a table.",
                        options: ["popular", "weekend", "ready", "video"],
                        answer: "A",
                        hint: "å¾ˆå¤šäººåœ¨æ’éšŠç­‰ä½å­ï¼Œä»£è¡¨é€™å®¶é¤å»³éå¸¸...ï¼Ÿ"
                    },
                    {
                        type: "choice",
                        question: "A: Are you ______ for the movie? B: Sure. Let's go.",
                        options: ["popular", "ready", "fan", "weekend"],
                        answer: "B",
                        hint: "B èªªã€Œç•¶ç„¶ï¼Œèµ°å§ã€ï¼Œä»£è¡¨ A å•ä»–æ˜¯å¦ã€Œæº–å‚™å¥½ã€äº†ã€‚"
                    },
                    {
                        type: "choice",
                        question: "A: Is the meet-and-greet of your favorite band this ______? B: Yes. It's on Sunday afternoon. I can't wait!",
                        options: ["video", "ready", "fan", "weekend"],
                        answer: "D",
                        hint: "B å›ç­”æ˜¯åœ¨ã€Œæ˜ŸæœŸæ—¥ä¸‹åˆã€ï¼Œé€™å±¬æ–¼ä¸€é€±çš„å“ªå€‹æ™‚æ®µï¼Ÿ"
                    }
                ]
            },
            'B': {
                title: "Part B: çœ‹åœ–é¸ç­”",
                data: [
                    {
                        type: "choice",
                        visualType: "clock",
                        visualData: { h: 8, m: 25 },
                        question: "Look at the clock. What time is it?",
                        options: ["It's eight fifty.", "It's eight twenty-five.", "It's seven twenty-five.", "It's eight five."],
                        answer: "B",
                        hint: "æ™‚é‡åœ¨ 8ï¼Œåˆ†é‡åœ¨ 5 (ä»£è¡¨ 25 åˆ†)ã€‚"
                    },
                    {
                        type: "choice",
                        visualType: "clock",
                        visualData: { h: 5, m: 15 },
                        question: "Look at the clock. What time is it?",
                        options: ["It's five fifty.", "It's four fifteen.", "It's five fifteen.", "It's fifteen five."],
                        answer: "C",
                        hint: "æ™‚é‡åœ¨ 5ï¼Œåˆ†é‡åœ¨ 3 (ä»£è¡¨ 15 åˆ†)ã€‚"
                    },
                    {
                        type: "choice",
                        visualType: "calendar",
                        visualData: { month: "å…«æœˆ", date: 17, day: "WED" },
                        question: "Look at the calendar. What day is it?",
                        options: ["It's Tuesday.", "It's Thursday.", "It's Friday.", "It's Wednesday."],
                        answer: "D",
                        hint: "åœ–ç‰‡ä¸Šçš„ WED æ˜¯ Wednesday çš„ç¸®å¯«ã€‚"
                    },
                    {
                        type: "choice",
                        visualType: "calendar",
                        visualData: { month: "å…«æœˆ", date: 26, day: "FRI" },
                        question: "Look at the calendar. What day is it?",
                        options: ["It's Friday.", "It's Saturday.", "It's Sunday.", "It's Monday."],
                        answer: "A",
                        hint: "åœ–ç‰‡ä¸Šçš„ FRI æ˜¯ Friday çš„ç¸®å¯«ã€‚"
                    }
                ]
            },
            'C': {
                title: "Part C: çœ‹åœ–å•ç­”",
                data: [
                    {
                        type: "choice",
                        visualType: "calendar",
                        visualData: { month: "ä¸‰æœˆ", date: 12, day: "SAT" },
                        question: "Choose the correct question.<br>Answer: It's Saturday.",
                        options: ["What day is it?", "What time is it?", "What date is it?", "What month is it?"],
                        answer: "A",
                        hint: "å›ç­”æ˜¯ 'It's Saturday' (æ˜ŸæœŸå…­)ï¼Œæ‰€ä»¥æ˜¯åœ¨å•ã€æ˜ŸæœŸã€ã€‚"
                    },
                    {
                        type: "choice",
                        visualType: "clock",
                        visualData: { h: 12, m: 45 },
                        question: "Choose the correct question.<br>Answer: It's twelve forty-five.",
                        options: ["What day is it?", "What time is it?", "Is it twelve?", "What time is the movie?"],
                        answer: "B",
                        hint: "å›ç­”æ˜¯ 'It's twelve forty-five' (12é»45åˆ†)ï¼Œæ‰€ä»¥æ˜¯åœ¨å•ã€æ™‚é–“ã€ã€‚"
                    }
                ]
            },
            'D': {
                title: "Part D: ä»‹ç³»è©å¡«ç©º",
                data: [
                    {
                        type: "choice",
                        question: "The meet-and-greet is ______ Wednesday.",
                        options: ["in", "at", "on", "from"],
                        answer: "C",
                        hint: "æ˜ŸæœŸå¹¾ (Wednesday) å‰é¢é€šå¸¸ä½¿ç”¨ä»‹ç³»è© 'on'ã€‚"
                    },
                    {
                        type: "choice",
                        question: "The English class is ______ 9 a.m.",
                        options: ["in", "on", "at", "to"],
                        answer: "C",
                        hint: "å…·é«”çš„æ™‚é–“é» (9 a.m.) å‰é¢é€šå¸¸ä½¿ç”¨ä»‹ç³»è© 'at'ã€‚"
                    },
                    {
                        type: "choice",
                        question: "The movie is ______ 2 p.m. ______ 6:30 p.m.",
                        options: ["from / to", "at / in", "on / at", "in / on"],
                        answer: "A",
                        hint: "è¡¨ç¤ºã€Œå¾...åˆ°...ã€çš„æ™‚é–“æ®µï¼Œä½¿ç”¨ 'from ... to ...'ã€‚"
                    },
                    {
                        type: "choice",
                        question: "A: Is Billy Chen's concert ______ Thursday? B: Yes, it is.",
                        options: ["at", "in", "on", "to"],
                        answer: "C",
                        hint: "æ˜ŸæœŸå¹¾ (Thursday) å‰é¢é€šå¸¸ä½¿ç”¨ä»‹ç³»è© 'on'ã€‚"
                    },
                    {
                        type: "choice",
                        question: "A: What time is it there? B: It's seven o'clock ______ the evening.",
                        options: ["at", "on", "in", "from"],
                        answer: "C",
                        hint: "è¡¨ç¤ºä¸€å¤©çš„æŸå€‹æ™‚æ®µ (the evening) é€šå¸¸ä½¿ç”¨ 'in'ã€‚"
                    },
                    {
                        type: "choice",
                        question: "A: Let's have dinner together ______ Mother's Day. B: Sure.",
                        options: ["in", "at", "on", "from"],
                        answer: "C",
                        hint: "ç‰¹å®šçš„ç¯€æ—¥ (Mother's Day) è¦–ç‚ºç‰¹å®šçš„ä¸€å¤©ï¼Œä½¿ç”¨ 'on'ã€‚"
                    }
                ]
            }
        };

        // --- å…¨åŸŸè®Šæ•¸ ---
        let currentSectionId = 'A';
        let currentData = quizSections['A'].data;
        let currentQuestionIndex = 0;
        let score = 0;

        // --- DOM å…ƒç´  ---
        const questionsWrapper = document.getElementById('questions-wrapper');
        const controlsContainer = document.getElementById('controls');
        const scoreDisplay = document.getElementById('score-display');
        const progressBar = document.getElementById('progress-bar');
        const sectionTitle = document.getElementById('section-title');
        const questionCounter = document.getElementById('question-counter');
        const alertModal = document.getElementById('alert-modal');
        const alertMessage = document.getElementById('alert-message');
        const closeAlertBtn = document.getElementById('close-alert-btn');

        // --- è¼”åŠ©è¦–è¦ºç”¢ç”Ÿå‡½å¼ (SVG & CSS) ---

        function createSVGClock(hour, minute) {
            const hDegree = (hour % 12 + minute / 60) * 30; // æ¯å°æ™‚30åº¦
            const mDegree = minute * 6; // æ¯åˆ†é˜6åº¦

            return `
                <div class="flex justify-center my-4">
                    <svg width="120" height="120" viewBox="0 0 100 100" class="drop-shadow-md">
                        <!-- é˜é¢ -->
                        <circle cx="50" cy="50" r="45" stroke="#a8a29e" stroke-width="3" fill="#f5f5f4" />
                        <!-- åˆ»åº¦ (ç°¡åŒ–) -->
                        <line x1="50" y1="5" x2="50" y2="10" stroke="#78716c" stroke-width="2" />
                        <line x1="50" y1="90" x2="50" y2="95" stroke="#78716c" stroke-width="2" />
                        <line x1="95" y1="50" x2="90" y2="50" stroke="#78716c" stroke-width="2" />
                        <line x1="5" y1="50" x2="10" y2="50" stroke="#78716c" stroke-width="2" />
                        <!-- æ•¸å­— -->
                        <text x="50" y="22" font-size="10" text-anchor="middle" fill="#444">12</text>
                        <text x="80" y="54" font-size="10" text-anchor="middle" fill="#444">3</text>
                        <text x="50" y="85" font-size="10" text-anchor="middle" fill="#444">6</text>
                        <text x="20" y="54" font-size="10" text-anchor="middle" fill="#444">9</text>
                        
                        <!-- æ™‚é‡ -->
                        <line x1="50" y1="50" x2="50" y2="25" stroke="#1c1917" stroke-width="3" stroke-linecap="round" transform="rotate(${hDegree}, 50, 50)" />
                        <!-- åˆ†é‡ -->
                        <line x1="50" y1="50" x2="50" y2="15" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round" transform="rotate(${mDegree}, 50, 50)" />
                        <!-- ä¸­å¿ƒé» -->
                        <circle cx="50" cy="50" r="3" fill="#1c1917" />
                    </svg>
                </div>
            `;
        }

        function createCSSCalendar(month, date, day) {
            return `
                <div class="flex justify-center my-4">
                    <div class="w-24 bg-white rounded-lg shadow-md border border-stone-200 overflow-hidden text-center">
                        <div class="bg-stone-500 text-white text-xs py-1 font-bold tracking-widest">
                            ${month}
                        </div>
                        <div class="py-2">
                            <div class="text-3xl font-bold text-sky-600 font-sans">${date}</div>
                            <div class="text-sm font-bold text-stone-700 tracking-wider mt-1">${day}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- æ ¸å¿ƒåŠŸèƒ½å‡½å¼ ---

        function createInteractiveText(text) {
            const parts = text.split(/([a-zA-Z'â€™\-]+)/);
            return parts.map(part => {
                const cleanPart = part.toLowerCase().replace(/â€™/g, "'").replace(/[^a-z\-]/g, "");
                if (translations[cleanPart]) {
                    return `<span class="word" onclick="event.stopPropagation(); speak('${part}')">${part}<span class="tooltip">${translations[cleanPart]}</span></span>`;
                }
                return part;
            }).join('');
        }

        function speak(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            }
        }

        function createSpeakerIcon(textToSpeak) {
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("class", "h-5 w-5 text-amber-600 hover:text-amber-800 cursor-pointer flex-shrink-0");
            svg.setAttribute("viewBox", "0 0 20 20");
            svg.setAttribute("fill", "currentColor");
            
            const path = document.createElementNS(svgNS, "path");
            path.setAttribute("fill-rule", "evenodd");
            path.setAttribute("d", "M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.016 5.39a.75.75 0 01.016 1.046l-1.04 1.04a.75.75 0 11-1.06-1.06l1.04-1.04a.75.75 0 011.044-.026zM14.07 3.33a.75.75 0 01.016 1.046l-1.04 1.04a.75.75 0 01-1.06-1.06l1.04-1.04a.75.75 0 011.044-.026z");
            path.setAttribute("clip-rule", "evenodd");
            svg.appendChild(path);
            
            svg.onclick = (e) => { 
                e.stopPropagation(); 
                speak(textToSpeak); 
            };
            return svg;
        }

        // --- å°è¦½èˆ‡ç‹€æ…‹åˆ‡æ› ---

        window.switchSection = function(sectionId) {
            currentSectionId = sectionId;
            currentData = quizSections[sectionId].data;
            currentQuestionIndex = 0;
            score = 0;
            
            // Update UI Titles
            sectionTitle.textContent = quizSections[sectionId].title;
            
            // Update Active Nav State
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
                el.classList.remove('bg-amber-500', 'text-white');
            });
            
            const activeBtn = document.getElementById(`nav-${sectionId}`);
            if(activeBtn) activeBtn.classList.add('active');

            // Reset Displays
            scoreDisplay.classList.add('hidden');
            questionsWrapper.classList.remove('hidden');
            
            displayQuestion(0);
        };

        function displayQuestion(index) {
            questionsWrapper.innerHTML = '';
            controlsContainer.innerHTML = '';
            questionCounter.textContent = `${index + 1}/${currentData.length}`;
            
            const progressPercentage = (index / currentData.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;

            const q = currentData[index];
            const questionBlock = document.createElement('div');
            questionBlock.className = 'animate-fade-in';
            
            // å¦‚æœæœ‰è¦–è¦ºå…ƒä»¶ (Part B & C)
            if (q.visualType === 'clock') {
                questionBlock.innerHTML += createSVGClock(q.visualData.h, q.visualData.m);
            } else if (q.visualType === 'calendar') {
                questionBlock.innerHTML += createCSSCalendar(q.visualData.month, q.visualData.date, q.visualData.day);
            }

            // é¡Œç›®æ–‡å­—
            const questionText = document.createElement('p');
            questionText.className = 'text-lg text-stone-700 mb-4 flex items-center gap-2 flex-wrap';
            
            // ç§»é™¤åº•ç·šå¾Œçš„ç´”æ–‡å­—ï¼Œç”¨æ–¼ç™¼éŸ³ (ä½†å°æ–¼ Part Cï¼Œæ•´å¥å¯èƒ½æ¯”è¼ƒé•·ï¼Œæˆ‘å€‘åªæœ—è®€å•é¡Œéƒ¨åˆ†)
            // å°æ–¼ Part Cï¼Œq.question åŒ…å« HTML <br>ï¼Œæˆ‘å€‘éœ€è¦å°å¿ƒè™•ç†
            let cleanQText = q.question.replace(/<br>/g, ' ').replace(/______/g, '');
            const speaker = createSpeakerIcon(cleanQText);
            
            const textSpan = document.createElement('span');
            textSpan.innerHTML = `<strong>${index + 1}.</strong> ${createInteractiveText(q.question)}`;
            
            questionText.appendChild(speaker);
            questionText.appendChild(textSpan);
            questionBlock.appendChild(questionText);

            // æ ¹æ“šé¡Œå‹æ¸²æŸ“è¼¸å…¥å€åŸŸ (ç›®å‰çµ±ä¸€ç‚º choice)
            if (q.type === 'choice') {
                renderChoiceOptions(q, index, questionBlock);
            } else if (q.type === 'write') {
                renderWriteInput(q, index, questionBlock);
            }

            // æç¤ºæŒ‰éˆ•
            renderHint(q, questionBlock);

            questionsWrapper.appendChild(questionBlock);

            // æäº¤æŒ‰éˆ•
            const submitButton = document.createElement('button');
            submitButton.className = 'w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-600 transition-colors focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-opacity-50';
            submitButton.textContent = 'æª¢æŸ¥ç­”æ¡ˆ';
            submitButton.onclick = () => checkAnswer(index);
            controlsContainer.appendChild(submitButton);
        }

        function renderChoiceOptions(q, index, container) {
            const optionsGrid = document.createElement('div');
            optionsGrid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4';
            
            q.options.forEach((option, i) => {
                const optionChar = String.fromCharCode(65 + i);
                const optionContainer = document.createElement('div');
                optionContainer.className = 'flex items-center p-3 border border-stone-300 rounded-lg transition-all cursor-pointer hover:bg-amber-50';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.id = `q${index}-opt${optionChar}`;
                radio.name = `q${index}`;
                radio.value = optionChar;
                radio.className = 'h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300';

                const label = document.createElement('label');
                label.htmlFor = `q${index}-opt${optionChar}`;
                label.className = 'ml-3 block text-md text-stone-900 flex-1 cursor-pointer flex items-center gap-2';
                
                label.appendChild(createSpeakerIcon(option));
                const textSpan = document.createElement('span');
                textSpan.innerHTML = `(${optionChar}) ${createInteractiveText(option)}`;
                label.appendChild(textSpan);

                optionContainer.onclick = () => { radio.checked = true; };
                optionContainer.appendChild(radio);
                optionContainer.appendChild(label);
                optionsGrid.appendChild(optionContainer);
            });
            container.appendChild(optionsGrid);
        }

        function renderWriteInput(q, index, container) {
            const inputContainer = document.createElement('div');
            inputContainer.className = 'mb-6';
            
            const input = document.createElement('input');
            input.type = 'text';
            input.id = `q${index}-input`;
            input.className = 'w-full p-3 border-2 border-stone-300 rounded-lg focus:border-amber-500 focus:outline-none text-lg font-mono text-stone-700';
            input.placeholder = "è«‹åœ¨æ­¤è¼¸å…¥å®Œæ•´å¥å­...";
            input.autocomplete = "off";
            
            // æŒ‰ Enter æäº¤
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswer(index);
            });

            inputContainer.appendChild(input);
            container.appendChild(inputContainer);
        }

        function renderHint(q, container) {
            const hintContainer = document.createElement('div');
            hintContainer.className = 'mt-2';
            const hintButton = document.createElement('button');
            hintButton.className = 'text-sm text-amber-600 hover:text-amber-800 flex items-center gap-1';
            hintButton.innerHTML = '<span>ğŸ’¡</span> æç¤º';
            
            const hintText = document.createElement('p');
            hintText.className = 'hint-content hidden mt-2 text-sm text-stone-600 bg-yellow-50 border border-yellow-100 p-3 rounded-md';
            hintText.textContent = q.hint;
            
            hintButton.onclick = () => hintText.classList.toggle('hidden');
            hintContainer.appendChild(hintButton);
            hintContainer.appendChild(hintText);
            container.appendChild(hintContainer);
        }

        function checkAnswer(index) {
            const q = currentData[index];
            let isCorrect = false;
            let userAnswer = "";

            // ç²å–ä½¿ç”¨è€…ç­”æ¡ˆ
            if (q.type === 'choice') {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                if (!selected) {
                    showAlert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼");
                    return;
                }
                userAnswer = selected.value;
                isCorrect = (userAnswer === q.answer);
            } else if (q.type === 'write') {
                const input = document.getElementById(`q${index}-input`);
                userAnswer = input.value.trim();
                if (!userAnswer) {
                    showAlert("è«‹è¼¸å…¥ç­”æ¡ˆï¼");
                    return;
                }
                // å¯¬é¬†æ¯”å°
                const cleanUser = userAnswer.toLowerCase().replace(/[.,!]/g, '').replace(/\s+/g, ' ');
                const cleanCorrect = q.answer.toLowerCase().replace(/[.,!]/g, '').replace(/\s+/g, ' ');
                isCorrect = (cleanUser === cleanCorrect);
            }

            // é–å®šèˆ‡é¡¯ç¤ºçµæœ
            controlsContainer.innerHTML = ''; // æ¸…é™¤æäº¤æŒ‰éˆ•
            
            const resultDiv = document.createElement('div');
            resultDiv.className = `mt-4 p-4 rounded-lg ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`;
            
            if (isCorrect) {
                score++;
                resultDiv.innerHTML = `
                    <p class="text-green-700 font-bold flex items-center gap-2">
                        <span class="text-xl">âœ”ï¸</span> ç­”å°äº†ï¼
                    </p>
                    <p class="text-green-600 mt-1">${q.answer}</p>
                `;
                // æ’­æ”¾æ­£ç¢ºç­”æ¡ˆçš„èªéŸ³ (è‹¥æ˜¯ choiceï¼Œq.answer åªæ˜¯ "A"ï¼Œæˆ‘å€‘éœ€è¦æŠ“é¸é …å…§å®¹)
                let speakText = q.answer;
                if (q.type === 'choice') {
                    // æ‰¾åˆ°æ­£ç¢ºé¸é …çš„ç´¢å¼• (A=0, B=1...)
                    const correctIndex = q.answer.charCodeAt(0) - 65;
                    if (q.options[correctIndex]) {
                        speakText = q.options[correctIndex];
                    }
                }
                speak(speakText);
            } else {
                // å–å¾—æ­£ç¢ºç­”æ¡ˆæ–‡å­—
                let correctText = q.answer;
                if (q.type === 'choice') {
                    const correctIndex = q.answer.charCodeAt(0) - 65;
                    correctText = q.options[correctIndex];
                }
                
                resultDiv.innerHTML = `
                    <p class="text-red-700 font-bold flex items-center gap-2">
                        <span class="text-xl">âŒ</span> ç­”éŒ¯äº†
                    </p>
                    <p class="text-stone-600 mt-1">æ­£ç¢ºç­”æ¡ˆï¼š<span class="font-bold text-stone-800">${createInteractiveText(correctText)}</span></p>
                `;
            }

            // åœç”¨è¼¸å…¥
            if (q.type === 'choice') {
                document.querySelectorAll(`input[name="q${index}"]`).forEach(el => el.disabled = true);
            } else {
                document.getElementById(`q${index}-input`).disabled = true;
            }

            questionsWrapper.appendChild(resultDiv);

            // ä¸‹ä¸€é¡ŒæŒ‰éˆ•
            const nextButton = document.createElement('button');
            nextButton.className = 'w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-600 transition-colors mt-4';
            
            if (currentQuestionIndex < currentData.length - 1) {
                nextButton.textContent = 'ä¸‹ä¸€é¡Œ';
                nextButton.onclick = () => {
                    currentQuestionIndex++;
                    displayQuestion(currentQuestionIndex);
                };
            } else {
                nextButton.textContent = 'æŸ¥çœ‹æˆç¸¾';
                nextButton.onclick = showFinalScore;
            }
            controlsContainer.appendChild(nextButton);
        }

        function showFinalScore() {
            progressBar.style.width = '100%';
            questionsWrapper.innerHTML = '';
            controlsContainer.innerHTML = '';
            sectionTitle.textContent = 'æ¸¬é©—å®Œæˆ';

            scoreDisplay.innerHTML = `
                <div class="py-8">
                    <p class="text-xl text-stone-600">ä½ çš„æœ€çµ‚åˆ†æ•¸</p>
                    <p class="text-6xl font-bold my-4 text-amber-500">${score} <span class="text-2xl text-stone-400">/ ${currentData.length}</span></p>
                    <div class="flex justify-center gap-4 mt-6">
                        <button onclick="location.reload()" class="px-6 py-2 border border-stone-300 rounded-lg hover:bg-stone-50 text-stone-600">å›é¦–é </button>
                        <button onclick="switchSection('${currentSectionId}')" class="px-6 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 shadow-md">å†ç·´ç¿’ä¸€æ¬¡</button>
                    </div>
                </div>
            `;
            scoreDisplay.classList.remove('hidden');
        }

        function showAlert(msg) {
            alertMessage.textContent = msg;
            alertModal.classList.remove('hidden');
        }

        closeAlertBtn.addEventListener('click', () => {
            alertModal.classList.add('hidden');
        });

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            switchSection('A');
        });
    </script>
</body>
</html>