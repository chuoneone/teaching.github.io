<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUU1ç¿’ä½œC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .clickable-word {
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            padding: 2px 4px;
            border-radius: 4px;
            position: relative; /* For tooltip positioning */
            border-bottom: 1px dotted #6b7280; /* Dotted underline for interactivity hint */
        }
        .clickable-word:hover {
            background-color: #e0f2fe; /* light-blue-100 */
            color: #0c4a6e; /* light-blue-900 */
        }
        /* Tooltip styles */
        .clickable-word::after {
            content: attr(data-zh);
            position: absolute;
            background-color: #1f2937; /* gray-800 */
            color: #ffffff;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.875rem; /* text-sm */
            font-weight: 500;
            white-space: nowrap;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease-in-out;
            pointer-events: none; /* Prevent tooltip from interfering with mouse events */
        }
        .clickable-word:hover::after {
            opacity: 1;
            visibility: visible;
        }
        .correct-answer {
            background-color: #dcfce7; /* green-100 */
        }
        .incorrect-answer {
            background-color: #fee2e2; /* red-100 */
        }
        .correct-label::after {
            content: ' âœ”ï¸';
            color: #16a34a; /* green-600 */
        }
        .incorrect-label::after {
            content: ' âŒ';
            color: #dc2626; /* red-600 */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex items-center justify-center p-4">

    <div class="container mx-auto max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">BUU1ç¿’ä½œC-äº’å‹•é¸æ“‡é¡Œæ¸¬é©—</h1>
            <p class="text-gray-500 mt-2">é»æ“Šå–®å­—å¯è½ç™¼éŸ³ï¼Œæ»‘é¼ æ‡¸åœå¯çœ‹ä¸­æ–‡ç¿»è­¯</p>
        </header>

        <main id="quiz-container">
            <!-- æ¸¬é©—é¡Œç›®å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </main>

        <footer class="text-center mt-8">
            <button id="check-answers-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 transform hover:scale-105 shadow-lg">
                æª¢æŸ¥ç­”æ¡ˆ
            </button>
            <div id="result" class="mt-6 text-2xl font-bold"></div>
        </footer>
    </div>

    <script>
        const quizData = [
            {
                id: 1,
                dialog: {
                    A: "Hi, I am Kelly Coleman. Nice to meet you.",
                    B: "I'm Nigel Ford."
                },
                options: {
                    A: "I see.",
                    B: "You are welcome.",
                    C: "Nice to meet you, too."
                },
                correctAnswer: "C",
                hint: "ç•¶åˆ¥äººèªªã€Œå¾ˆé«˜èˆˆèªè­˜ä½ ã€æ™‚ï¼Œä½ æ‡‰è©²å¦‚ä½•å›æ‡‰ï¼Ÿ",
                vocab: {
                    "Hi": "å—¨", "I'm": "æˆ‘æ˜¯", "Nice": "é«˜èˆˆçš„", "to": "å»", "meet": "é‡è¦‹", "you": "ä½ ",
                    "see": "äº†è§£", "You're": "ä½ æ˜¯", "welcome": "ä¸å®¢æ°£", "too": "ä¹Ÿ"
                }
            },
            {
                id: 2,
                dialog: {
                    A: "Excuse me. Are you Mr. Walker?",
                    B: ""
                },
                options: {
                    A: "Yes, he is.",
                    B: "Yes, I am Larry Walker.",
                    C: "No, I am not Mr. Walker's friend."
                },
                correctAnswer: "B",
                hint: "A åœ¨å•ä½ æ˜¯ä¸æ˜¯ Walker å…ˆç”Ÿï¼Œä½ æ‡‰è©²å¦‚ä½•å›ç­”ï¼Ÿ",
                vocab: {
                    "Excuse": "æ‰“æ“¾", "me": "æˆ‘", "Are": "æ˜¯", "you": "ä½ ", "Mr.": "å…ˆç”Ÿ",
                    "Yes": "æ˜¯çš„", "he": "ä»–", "is": "æ˜¯", "I'm": "æˆ‘æ˜¯", "No": "ä¸", "not": "ä¸æ˜¯", "friend": "æœ‹å‹"
                }
            },
            {
                id: 3,
                dialog: {
                    A: "Who is that girl?",
                    B: ""
                },
                options: {
                    A: "She is really tall.",
                    B: "She is a happy girl.",
                    C: "She is Ariel, our new classmate."
                },
                correctAnswer: "C",
                hint: "A åœ¨å•ã€Œé‚£å€‹å¥³å­©æ˜¯èª°ï¼Ÿã€ï¼Œä½ æ‡‰è©²å›ç­”å¥¹çš„èº«åˆ†ã€‚",
                vocab: {
                    "Who's": "æ˜¯èª°", "that": "é‚£å€‹", "girl": "å¥³å­©", "She": "å¥¹", "is": "æ˜¯", "really": "çœŸçš„",
                    "tall": "é«˜çš„", "happy": "å¿«æ¨‚çš„", "She's": "å¥¹æ˜¯", "our": "æˆ‘å€‘çš„", "new": "æ–°çš„", "classmate": "åŒå­¸"
                }
            },
            {
                id: 4,
                dialog: {
                    A: "Is Eric's aunt a writer?",
                    B: ""
                },
                options: {
                    A: "Yes, and she is a doctor, too.",
                    B: "No, she is not. She is a writer.",
                    C: "Yes, she is. She is a housewife."
                },
                correctAnswer: "A",
                hint: "A åœ¨å• Eric çš„é˜¿å§¨æ˜¯ä¸æ˜¯ä½œå®¶ã€‚é¸é …ä¸­å“ªå€‹å›ç­”æ˜¯åˆç†çš„ï¼Ÿ",
                vocab: {
                    "Is": "æ˜¯", "Eric is": "Ericçš„", "aunt": "é˜¿å§¨", "a": "ä¸€å€‹", "writer": "ä½œå®¶", "Yes": "æ˜¯çš„",
                    "and": "è€Œä¸”", "she is": "å¥¹æ˜¯", "doctor": "é†«ç”Ÿ", "too": "ä¹Ÿ", "No": "ä¸", "not": "ä¸æ˜¯", "housewife": "å®¶åº­ä¸»å©¦"
                }
            },
            {
                id: 5,
                dialog: {
                    A: "How old are Alice and Brad?",
                    B: ""
                },
                options: {
                    A: "They are my family.",
                    B: "Alice is ten, and Brad is twelve.",
                    C: "Alice is a cook, and Brad is a nurse."
                },
                correctAnswer: "B",
                hint: "A åœ¨å• Alice å’Œ Brad çš„å¹´é½¡ã€‚",
                vocab: {
                    "How": "å¦‚ä½•", "old": "è€çš„", "are": "æ˜¯", "They": "ä»–å€‘", "my": "æˆ‘çš„", "family": "å®¶äºº",
                    "is": "æ˜¯", "ten": "åæ­²", "and": "å’Œ", "twelve": "åäºŒæ­²", "a": "ä¸€å€‹", "cook": "å»šå¸«", "nurse": "è­·å£«"
                }
            }
        ];

        const quizContainer = document.getElementById('quiz-container');

        // èªéŸ³åˆæˆåŠŸèƒ½
        function speak(text, lang) {
            // å¦‚æœæœ‰æ­£åœ¨æœ—è®€çš„ï¼Œå…ˆåœæ­¢
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        // å°‡å¥å­è½‰æ›ç‚ºå¯é»æ“Šçš„å–®å­—
        function createClickableSentence(sentence, vocab) {
            if (!sentence) return '';
            return sentence.split(/(\s+|[.,?'])/).filter(word => word.trim().length > 0).map(word => {
                const cleanWord = word.replace(/[.,?']/g, '');
                const translation = vocab[cleanWord] || vocab[cleanWord.charAt(0).toUpperCase() + cleanWord.slice(1)] || vocab[cleanWord.toLowerCase()];
                if (translation) {
                    return `<span class="clickable-word" data-en="${cleanWord}" data-zh="${translation}">${word}</span>`;
                }
                return `<span>${word}</span>`;
            }).join(' ');
        }
        
        // æ¸²æŸ“æ¸¬é©—é¡Œç›®
        quizData.forEach(q => {
            const questionElement = document.createElement('div');
            questionElement.className = 'bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6';
            questionElement.innerHTML = `
                <div class="mb-4">
                    <p class="font-semibold text-lg text-gray-700">
                        <span class="font-bold text-blue-600 mr-2">${q.id}.</span>
                        <span class="font-normal">A: ${createClickableSentence(q.dialog.A, q.vocab)}</span>
                    </p>
                    <p class="font-semibold text-lg text-gray-700 ml-6">
                        <span class="font-normal">B: ${createClickableSentence(q.dialog.B, q.vocab)} __________</span>
                    </p>
                </div>
                <div class="space-y-3" id="options-${q.id}">
                    ${Object.entries(q.options).map(([key, value]) => `
                        <div>
                            <label for="q${q.id}-${key}" class="flex items-center p-3 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-100 transition duration-200">
                                <input type="radio" name="q${q.id}" id="q${q.id}-${key}" value="${key}" class="mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="text-base">${createClickableSentence(value, q.vocab)}</span>
                            </label>
                        </div>
                    `).join('')}
                </div>
                <div class="mt-4 text-right">
                    <button class="hint-btn text-sm text-blue-500 hover:text-blue-700 font-semibold">æç¤º</button>
                    <p class="hint-text hidden mt-2 text-sm text-gray-600 bg-yellow-100 p-2 rounded">${q.hint}</p>
                </div>
            `;
            quizContainer.appendChild(questionElement);
        });
        
        // ç‚ºæ‰€æœ‰å¯é»æ“Šå–®å­—æ·»åŠ äº‹ä»¶ç›£è½å™¨
        document.querySelectorAll('.clickable-word').forEach(wordEl => {
            wordEl.addEventListener('click', () => {
                const englishWord = wordEl.dataset.en;
                speak(englishWord, 'en-US');
            });
        });

        // æç¤ºæŒ‰éˆ•åŠŸèƒ½
        document.querySelectorAll('.hint-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const hintText = btn.nextElementSibling;
                hintText.classList.toggle('hidden');
            });
        });

        // æª¢æŸ¥ç­”æ¡ˆæŒ‰éˆ•åŠŸèƒ½
        document.getElementById('check-answers-btn').addEventListener('click', () => {
            let score = 0;
            quizData.forEach(q => {
                const optionsContainer = document.getElementById(`options-${q.id}`);
                const selectedOption = optionsContainer.querySelector(`input[name="q${q.id}"]:checked`);
                const labels = optionsContainer.querySelectorAll('label');

                labels.forEach(label => {
                    const input = label.querySelector('input');
                    label.classList.remove('correct-answer', 'incorrect-answer');
                    label.classList.remove('correct-label', 'incorrect-label');
                    input.disabled = true; // æª¢æŸ¥å¾Œç¦ç”¨é¸é …
                });
                
                if (selectedOption) {
                    const selectedLabel = selectedOption.parentElement;
                    if (selectedOption.value === q.correctAnswer) {
                        score++;
                        selectedLabel.classList.add('correct-answer', 'correct-label');
                    } else {
                        selectedLabel.classList.add('incorrect-answer', 'incorrect-label');
                        const correctLabel = optionsContainer.querySelector(`input[value="${q.correctAnswer}"]`).parentElement;
                        correctLabel.classList.add('correct-answer', 'correct-label');
                    }
                } else {
                    // å¦‚æœæœªä½œç­”ï¼Œä¹Ÿæ¨™ç¤ºå‡ºæ­£ç¢ºç­”æ¡ˆ
                     const correctLabel = optionsContainer.querySelector(`input[value="${q.correctAnswer}"]`).parentElement;
                     correctLabel.classList.add('correct-answer');
                }
            });

            const resultEl = document.getElementById('result');
            resultEl.textContent = `ä½ çš„åˆ†æ•¸: ${score} / ${quizData.length}`;
            if(score === quizData.length){
                resultEl.textContent += " ğŸ‰ å…¨éƒ¨ç­”å°äº†ï¼ŒçœŸå²å®³ï¼";
                resultEl.style.color = '#16a34a';
            } else {
                 resultEl.style.color = '#dc2626';
            }

            // æ»¾å‹•åˆ°çµæœä½ç½®
            resultEl.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>

