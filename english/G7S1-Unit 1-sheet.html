<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1 Grammar Focus - 文法學習單</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .word-item {
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
            font-weight: 600;
        }
        .word-item:hover {
            transform: scale(1.05);
        }
        .drop-zone {
            min-height: 50px;
            border: 3px dashed #cbd5e1;
            transition: all 0.2s ease;
            font-size: 18px;
        }
        .correct {
            background-color: #dcfce7 !important;
            border-color: #16a34a !important;
        }
        .incorrect {
            background-color: #fef2f2 !important;
            border-color: #dc2626 !important;
        }
        .adjective {
            background-color: #fbbf24 !important;
            font-weight: bold;
            border: 2px solid #f59e0b;
        }
        .question-word {
            font-size: 20px;
            font-weight: 600;
            padding: 8px 16px;
        }
        .who-word {
            background-color: #fbbf24 !important;
            font-weight: bold;
            border: 2px solid #f59e0b;
        }
        .menu-button {
            border-bottom: 3px solid transparent;
        }
        .menu-button.active {
            border-color: #3b82f6;
            background-color: #e5f1ff;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <!-- 導覽選單 -->
        <div class="flex justify-center mb-6">
            <button id="menu-be" onclick="showSection('section-be')" class="menu-button active bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-t-lg text-lg">
                be動詞句型
            </button>
            <button id="menu-who" onclick="showSection('section-who')" class="menu-button bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-t-lg text-lg">
                Who疑問句
            </button>
        </div>

        <!-- Be動詞句型學習單 (預設顯示) -->
        <div id="section-be" class="bg-white rounded-lg shadow-lg p-6">
            <!-- 標題 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h1 class="text-4xl font-bold text-center text-gray-800 mb-2">Unit 1 Grammar Focus 1B</h1>
                <h2 class="text-2xl text-center text-gray-600 mb-4">be動詞句型 + 形容詞</h2>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-bold text-gray-700 mb-2 text-xl">📝 句型公式：</h3>
                    <p class="text-xl">• 主詞 + be動詞(not) + adj.</p>
                    <p class="text-xl">• 主詞 + be動詞(not) + a/an + adj. + 名詞</p>
                </div>
            </div>

            <!-- 第一大題：合併句子 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-3xl font-bold text-gray-700 mb-4">📚 第一大題：合併句子</h3>
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <p class="font-bold text-gray-800 text-xl">範例：</p>
                    <p class="text-gray-700 text-lg">Paul is a boy. He is handsome.</p>
                    <p class="text-gray-800 font-bold text-lg">→ Paul is a handsome boy.</p>
                    <p class="text-sm text-gray-600 mt-2">💡 提示：形容詞（如handsome）要放在名詞前面！</p>
                </div>

                <!-- 題目1 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">1. Zack is an office worker. He is tall.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Zack 是一位辦公室職員。他很高。</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="showHint(1)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium">💡 顯示提示</button>
                        <button onclick="readSentence('Zack is an office worker. He is tall.', 'Zack 是一位辦公室職員。他很高。')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    </div>
                    <div id="hint-1" class="mb-3 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg hidden">
                        <p class="text-lg">
                            Zack is an <span class="inline-block w-12 h-6 bg-red-200 border-2 border-red-500 rounded mx-1 align-middle"></span> office worker. He is <span class="text-red-600 font-bold">tall</span>.
                        </p>
                        <p class="text-sm text-gray-600 mt-2">把紅色的字放到紅色框框裡！</p>
                    </div>
                    <div class="flex flex-wrap gap-3 mb-4" id="word-bank-1">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="worker">worker</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="is">is</span>
                        <span class="word-item adjective px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="tall">tall</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="office">office</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="Zack">Zack</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 1)" data-word="a">a</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Zack is a tall office worker" data-question="1"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkAnswer(1)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestion(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="feedback-1" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 題目2 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">2. Jamie is a police officer. She is happy.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Jamie 是一位警察。她很快樂。</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="showHint(2)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium">💡 顯示提示</button>
                        <button onclick="readSentence('Jamie is a police officer. She is happy.', 'Jamie 是一位快樂的警察。')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    </div>
                    <div id="hint-2" class="mb-3 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg hidden">
                        <p class="text-lg">
                            Jamie is a <span class="inline-block w-12 h-6 bg-red-200 border-2 border-red-500 rounded mx-1 align-middle"></span> police officer. She is <span class="text-red-600 font-bold">happy</span>.
                        </p>
                        <p class="text-sm text-gray-600 mt-2">把紅色的字放到紅色框框裡！</p>
                    </div>
                    <div class="flex flex-wrap gap-3 mb-4" id="word-bank-2">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="officer">officer</span>
                        <span class="word-item adjective px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="happy">happy</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="a">a</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="Jamie">Jamie</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="police">police</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 2)" data-word="is">is</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Jamie is a happy police officer" data-question="2"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkAnswer(2)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestion(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="feedback-2" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 題目3 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">3. Jane is a writer. She is beautiful.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Jane 是一位作家。她很美麗。</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="showHint(3)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium">💡 顯示提示</button>
                        <button onclick="readSentence('Jane is a writer. She is beautiful.', 'Jane 是一位美麗的作家。')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    </div>
                    <div id="hint-3" class="mb-3 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg hidden">
                        <p class="text-lg">
                            Jane is a <span class="inline-block w-12 h-6 bg-red-200 border-2 border-red-500 rounded mx-1 align-middle"></span> writer. She is <span class="text-red-600 font-bold">beautiful</span>.
                        </p>
                        <p class="text-sm text-gray-600 mt-2">把紅色的字放到紅色框框裡！</p>
                    </div>
                    <div class="flex flex-wrap gap-3 mb-4" id="word-bank-3">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 3)" data-word="writer">writer</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 3)" data-word="is">is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 3)" data-word="Jane">Jane</span>
                        <span class="word-item adjective px-4 py-2 rounded-full" onclick="selectItem(this, 3)" data-word="beautiful">beautiful</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 3)" data-word="a">a</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Jane is a beautiful writer" data-question="3"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkAnswer(3)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestion(3)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="feedback-3" class="mt-2 font-medium text-lg"></div>
                </div>
            </div>

            <!-- 第二大題：Yes/No疑問句 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-3xl font-bold text-gray-700 mb-4">❓ 第二大題：改為Yes/No疑問句</h3>
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <p class="font-bold text-gray-800 text-xl">範例：</p>
                    <p class="text-gray-700 text-lg">Paul is a handsome boy.</p>
                    <p class="text-gray-800 font-bold text-lg">→ Is Paul a handsome boy?</p>
                    <p class="text-sm text-gray-600 mt-2">💡 提示：把be動詞移到句子最前面，句尾加問號！</p>
                </div>

                <!-- 疑問句題目1 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">1. 把這個句子改成疑問句：</p>
                    <p class="text-gray-700 text-lg mb-1">Zack <strong>is</strong> a tall office worker.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Zack 是一位高個子的辦公室職員。</p>
                    <button onclick="readSentence('Zack is a tall office worker.', 'Zack 是一位高個子的辦公室職員。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="q-word-bank-1">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="Zack">Zack</span>
                        <span class="word-item bg-blue-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="Is">Is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="a">a</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="tall">tall</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="office">office</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="worker">worker</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q1')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Is Zack a tall office worker ?" data-question="q1"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkQuestion(1)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestionQ(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="q-feedback-1" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 疑問句題目2 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">2. 把這個句子改成疑問句：</p>
                    <p class="text-gray-700 text-lg mb-1">Jamie <strong>is</strong> a happy police officer.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Jamie 是一位快樂的警察。</p>
                    <button onclick="readSentence('Jamie is a happy police officer.', 'Jamie 是一位快樂的警察。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="q-word-bank-2">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="Jamie">Jamie</span>
                        <span class="word-item bg-blue-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="Is">Is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="a">a</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="happy">happy</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="police">police</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="officer">officer</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q2')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Is Jamie a happy police officer ?" data-question="q2"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkQuestion(2)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestionQ(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="q-feedback-2" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 疑問句題目3 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">3. 把這個句子改成疑問句：</p>
                    <p class="text-gray-700 text-lg mb-1">Jane <strong>is</strong> a beautiful writer.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Jane 是一位美麗的作家。</p>
                    <button onclick="readSentence('Jane is a beautiful writer.', 'Jane 是一位美麗的作家。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="q-word-bank-3">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="Jane">Jane</span>
                        <span class="word-item bg-blue-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="Is">Is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="a">a</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="beautiful">beautiful</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="writer">writer</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'q3')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Is Jane a beautiful writer ?" data-question="q3"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkQuestion(3)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetQuestionQ(3)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="q-feedback-3" class="mt-2 font-medium text-lg"></div>
                </div>
            </div>

            <!-- 第三大題：回答問句 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-3xl font-bold text-gray-700 mb-4">💬 第三大題：回答問句</h3>
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <p class="font-bold text-gray-800 text-xl">範例：</p>
                    <p class="text-gray-700 text-lg">Is Paul a handsome boy?</p>
                    <p class="text-gray-800 font-bold text-lg">肯定：Yes, he is. He is a handsome boy.</p>
                    <p class="text-gray-800 font-bold text-lg">否定：No, he isn't. He isn't a handsome boy.</p>
                </div>

                <div class="space-y-6">
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <p class="font-bold mb-1 text-lg">1. Is Zack a tall office worker? (肯定回答)</p>
                        <p class="text-gray-600 mb-2 text-base">中文翻譯：Zack 是一位高個子的辦公室職員嗎？</p>
                        <button onclick="readSentence('Is Zack a tall office worker?', 'Zack 是一位高個子的辦公室職員嗎？')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">簡答：</span>
                            <button onclick="selectAnswer('a1-short', 'Yes, he is.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">Yes, he is.</button>
                            <button onclick="selectAnswer('a1-short', 'No, he isn\'t.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">No, he isn't.</button>
                        </div>
                        <div id="a1-short" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg mb-3 text-lg"></div>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">詳答：</span>
                            <button onclick="selectAnswer('a1-long', 'He is a tall office worker.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">He is a tall office worker.</button>
                            <button onclick="selectAnswer('a1-long', 'He isn\'t a tall office worker.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">He isn't a tall office worker.</button>
                        </div>
                        <div id="a1-long" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg text-lg"></div>
                    </div>

                    <div class="p-4 bg-gray-50 rounded-lg">
                        <p class="font-bold mb-1 text-lg">2. Is Jamie a happy police officer? (肯定回答)</p>
                        <p class="text-gray-600 mb-2 text-base">中文翻譯：Jamie 是一位快樂的警察嗎？</p>
                        <button onclick="readSentence('Is Jamie a happy police officer?', 'Jamie 是一位快樂的警察嗎？')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">簡答：</span>
                            <button onclick="selectAnswer('a2-short', 'Yes, she is.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">Yes, she is.</button>
                            <button onclick="selectAnswer('a2-short', 'No, she isn\'t.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">No, she isn't.</button>
                        </div>
                        <div id="a2-short" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg mb-3 text-lg"></div>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">詳答：</span>
                            <button onclick="selectAnswer('a2-long', 'She is a happy police officer.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">She is a happy police officer.</button>
                            <button onclick="selectAnswer('a2-long', 'She isn\'t a happy police officer.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">She isn't a happy police officer.</button>
                        </div>
                        <div id="a2-long" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg text-lg"></div>
                    </div>

                    <div class="p-4 bg-gray-50 rounded-lg">
                        <p class="font-bold mb-1 text-lg">3. Is Jane a beautiful writer? (否定回答)</p>
                        <p class="text-gray-600 mb-2 text-base">中文翻譯：Jane 是一位美麗的作家嗎？</p>
                        <button onclick="readSentence('Is Jane a beautiful writer?', 'Jane 是一位美麗的作家嗎？')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">簡答：</span>
                            <button onclick="selectAnswer('a3-short', 'Yes, she is.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">Yes, she is.</button>
                            <button onclick="selectAnswer('a3-short', 'No, she isn\'t.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">No, she isn't.</button>
                        </div>
                        <div id="a3-short" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg mb-3 text-lg"></div>
                        <div class="mb-3">
                            <span class="text-lg text-gray-600 font-medium">詳答：</span>
                            <button onclick="selectAnswer('a3-long', 'She is a beautiful writer.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">She is a beautiful writer.</button>
                            <button onclick="selectAnswer('a3-long', 'She isn\'t a beautiful writer.')" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg text-lg font-medium">She isn't a beautiful writer.</button>
                        </div>
                        <div id="a3-long" class="min-h-12 p-3 bg-white border-3 border-dashed border-gray-300 rounded-lg text-lg"></div>
                    </div>
                </div>

                <button onclick="checkAnswers()" class="mt-6 bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                <div id="answer-feedback" class="mt-3 font-medium text-lg"></div>
            </div>
        </div>

        <!-- Who疑問句學習單 (預設隱藏) -->
        <div id="section-who" class="bg-white rounded-lg shadow-lg p-6 hidden">
            <!-- 標題 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h1 class="text-4xl font-bold text-center text-gray-800 mb-2">Unit 1 Grammar Focus 2</h1>
                <h2 class="text-2xl text-center text-gray-600 mb-4">疑問句Who的用法</h2>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-bold text-gray-700 mb-2 text-xl">📝 語法重點：</h3>
                    <p class="text-xl mb-2">• 疑問詞Who可用來詢問「姓名」、「職業」、「關係」</p>
                    <p class="text-lg text-gray-600">• Who's = Who is</p>
                    <p class="text-lg text-gray-600">• 回答：He/She is + 姓名/職業/關係</p>
                </div>
            </div>

            <!-- 第一大題：依提示作答 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-3xl font-bold text-gray-700 mb-4">📚 第一大題：請依提示作答</h3>
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <p class="font-bold text-gray-800 text-xl">範例：</p>
                    <p class="text-gray-700 text-lg">Who's the girl? (用my sister回答)</p>
                    <p class="text-gray-800 font-bold text-lg">→ She is my sister.</p>
                </div>

                <!-- 題目1 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">1. Who's the boy? (用her classmate回答)</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：那個男孩是誰？(用「她的同學」回答)</p>
                    <button onclick="readSentence('Who is the boy?', '那個男孩是誰？')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="who-word-bank-1">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q1')" data-word="He">He</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q1')" data-word="is">is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q1')" data-word="her">her</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q1')" data-word="classmate">classmate</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q1')" data-word=".">.</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="He is her classmate ." data-question="who-q1"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkWhoAnswer(1)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetWhoQuestion(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="who-feedback-1" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 題目2 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">2. Who is Eric? (用Zoe's teacher回答)</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Eric是誰？(用「Zoe的老師」回答)</p>
                    <button onclick="readSentence('Who is Eric?', 'Eric是誰？')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="who-word-bank-2">
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word="He">He</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word="is">is</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word="Zoe's">Zoe's</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word="math">math</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word="teacher">teacher</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full" onclick="selectItem(this, 'who-q2')" data-word=".">.</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="He is Zoe's math teacher ." data-question="who-q2"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkWhoAnswer(2)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetWhoQuestion(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="who-feedback-2" class="mt-2 font-medium text-lg"></div>
                </div>
            </div>

            <!-- 第二大題：依畫線部分造原問句 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-3xl font-bold text-gray-700 mb-4">❓ 第二大題：請依畫線部分造原問句</h3>
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <p class="font-bold text-gray-800 text-xl">範例：</p>
                    <p class="text-gray-700 text-lg">She's <u>my sister</u>.</p>
                    <p class="text-gray-800 font-bold text-lg">→ Who's she?</p>
                    <p class="text-sm text-gray-600 mt-2">💡 提示：看到畫線的人物資訊，就用Who來問！</p>
                </div>

                <!-- 疑問句題目1 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">1. She's <u>Carol</u>.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：她是Carol。</p>
                    <button onclick="readSentence('She is Carol.', '她是Carol。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="who-q-word-bank-1">
                        <span class="word-item who-word px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-1')" data-word="Who's">Who's</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-1')" data-word="she">she</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-1')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Who's she ?" data-question="who-q-1"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkWhoQuestion(1)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetWhoQuestionQ(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="who-q-feedback-1" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 疑問句題目2 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">2. <u>The boy</u> is his cousin.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：那個男孩是他的表弟。</p>
                    <button onclick="readSentence('The boy is his cousin.', '那個男孩是他的表弟。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="who-q-word-bank-2">
                        <span class="word-item who-word px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-2')" data-word="Who's">Who's</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-2')" data-word="the">the</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-2')" data-word="boy">boy</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-2')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Who's the boy ?" data-question="who-q-2"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkWhoQuestion(2)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetWhoQuestionQ(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="who-q-feedback-2" class="mt-2 font-medium text-lg"></div>
                </div>

                <!-- 疑問句題目3 -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <p class="font-bold mb-2 text-lg">3. <u>Ada</u> is Gary's aunt.</p>
                    <p class="text-gray-600 mb-3 text-base">中文翻譯：Ada是Gary的阿姨。</p>
                    <button onclick="readSentence('Ada is Gary\\''s aunt.', 'Ada是Gary的阿姨。')" class="mb-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">🔊 唸讀句子</button>
                    <div class="flex flex-wrap gap-3 mb-4" id="who-q-word-bank-3">
                        <span class="word-item who-word px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-3')" data-word="Who's">Who's</span>
                        <span class="word-item bg-gray-200 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-3')" data-word="Ada">Ada</span>
                        <span class="word-item bg-gray-300 px-4 py-2 rounded-full question-word" onclick="selectItem(this, 'who-q-3')" data-word="?">?</span>
                    </div>
                    <div class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg bg-white border-2" data-answer="Who's Ada ?" data-question="who-q-3"></div>
                    <div class="flex gap-3 mt-3">
                        <button onclick="checkWhoQuestion(3)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium text-lg">檢查答案</button>
                        <button onclick="resetWhoQuestionQ(3)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium text-lg">重新作答</button>
                    </div>
                    <div id="who-q-feedback-3" class="mt-2 font-medium text-lg"></div>
                </div>
            </div>
        </div>
        
        <!-- 進度顯示 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mt-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-4">🏆 學習進度</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="text-center">
                    <div id="progress-1" class="w-20 h-20 mx-auto bg-gray-200 rounded-full flex items-center justify-center text-3xl mb-3 font-bold">1</div>
                    <p class="text-lg font-medium">be動詞句型</p>
                </div>
                <div class="text-center">
                    <div id="progress-who-1" class="w-20 h-20 mx-auto bg-gray-200 rounded-full flex items-center justify-center text-3xl mb-3 font-bold">2</div>
                    <p class="text-lg font-medium">Who疑問句</p>
                </div>
            </div>
        </div>
    </div>

<script>
    let completedSections = {
        'be': { '1': false, '2': false, '3': false, 'q1': false, 'q2': false, 'q3': false, 'a1': false, 'a2': false, 'a3': false },
        'who': { '1': false, '2': false, 'q1': false, 'q2': false, 'q3': false }
    };

    // 隨機打亂陣列的函數
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // 隨機打亂單字卡片
    function shuffleWordBank(wordBankId) {
        const wordBank = document.getElementById(wordBankId);
        if (wordBank) {
            const words = Array.from(wordBank.children);
            const shuffledWords = shuffleArray(words);
            wordBank.innerHTML = '';
            shuffledWords.forEach(word => wordBank.appendChild(word));
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        // 打亂 be動詞單元的第一大題單字
        shuffleWordBank('word-bank-1');
        shuffleWordBank('word-bank-2');
        shuffleWordBank('word-bank-3');
        
        // 打亂 be動詞單元的第二大題單字
        shuffleWordBank('q-word-bank-1');
        shuffleWordBank('q-word-bank-2');
        shuffleWordBank('q-word-bank-3');

        // 打亂 Who疑問句單元的第一大題單字
        shuffleWordBank('who-word-bank-1');
        shuffleWordBank('who-word-bank-2');
        
        // 打亂 Who疑問句單元的第二大題單字
        shuffleWordBank('who-q-word-bank-1');
        shuffleWordBank('who-q-word-bank-2');
        shuffleWordBank('who-q-word-bank-3');
        
        // 新增點擊監聽器到所有 drop-zone 內的單字上
        document.addEventListener('click', function(event) {
            const clickedElement = event.target;
            const parentDropZone = clickedElement.closest('.drop-zone');
            
            // 檢查點擊的元素是否在 drop-zone 內，且是一個 <span> 標籤
            if (parentDropZone && clickedElement.tagName === 'SPAN') {
                returnItemToBank(clickedElement);
            }
        });
    });

    function showSection(sectionId) {
        const sections = document.querySelectorAll('#section-be, #section-who');
        sections.forEach(section => {
            section.classList.add('hidden');
        });
        document.getElementById(sectionId).classList.remove('hidden');

        const menuButtons = document.querySelectorAll('.menu-button');
        menuButtons.forEach(btn => {
            btn.classList.remove('active');
        });
        document.getElementById(`menu-${sectionId.split('-')[1]}`).classList.add('active');
    }

    // 發音功能
    function speakWord(word) {
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-US';
            utterance.rate = 0.8;
            utterance.volume = 0.8;
            speechSynthesis.speak(utterance);
        }
    }

    // 整句唸讀功能
    function readSentence(englishSentence, chineseSentence) {
        if ('speechSynthesis' in window) {
            const englishUtterance = new SpeechSynthesisUtterance(englishSentence);
            englishUtterance.lang = 'en-US';
            englishUtterance.rate = 0.7;
            englishUtterance.volume = 0.8;
            
            englishUtterance.onend = function() {
                setTimeout(() => {
                    const chineseUtterance = new SpeechSynthesisUtterance(chineseSentence);
                    chineseUtterance.lang = 'zh-TW';
                    chineseUtterance.rate = 0.8;
                    chineseUtterance.volume = 0.8;
                    speechSynthesis.speak(chineseUtterance);
                }, 500);
            };
            
            speechSynthesis.speak(englishUtterance);
        }
    }

    // 通用的點擊單字功能
    function selectItem(element, questionId) {
        const dropZone = document.querySelector(`[data-question="${questionId}"]`);
        const clone = element.cloneNode(true);
        
        // 新增 data 屬性，儲存原始的 word-bank ID
        const originalBankId = element.parentElement.id;
        clone.setAttribute('data-original-bank-id', originalBankId);
        
        // 移除複製出來的單字上的 onclick 屬性，讓全局監聽器處理
        clone.removeAttribute('onclick');

        clone.classList.remove('word-item');
        clone.classList.add('cursor-pointer');
        
        dropZone.appendChild(clone);
        element.style.display = 'none';
        speakWord(element.textContent);
    }

    // 通用的返回單字到單字區的功能
    function returnItemToBank(element) {
        const originalBankId = element.getAttribute('data-original-bank-id');
        if (!originalBankId) return; // 如果沒有原始 ID，就停止

        const wordBank = document.getElementById(originalBankId);
        
        // 根據 data-word 屬性找到原始單字
        const originalWord = wordBank.querySelector(`[data-word="${element.dataset.word}"]`);

        if (originalWord) {
            originalWord.style.display = 'inline-block';
        }
        
        // 移除作答區塊的單字
        element.remove();
    }

    // Be動詞學習單的檢查答案
    function checkAnswer(questionNum) {
        const dropZone = document.querySelector(`[data-question="${questionNum}"]`);
        const words = Array.from(dropZone.children).map(child => child.textContent.trim());
        const userAnswer = words.join(' ');
        const correctAnswer = dropZone.dataset.answer;
        const feedback = document.getElementById(`feedback-${questionNum}`);

        if (userAnswer === correctAnswer) {
            dropZone.classList.add('correct');
            dropZone.classList.remove('incorrect');
            feedback.textContent = '✅ 正確！很棒！';
            feedback.className = 'mt-2 font-medium text-green-600';
            completedSections['be'][questionNum] = true;
            updateProgress();
        } else {
            dropZone.classList.add('incorrect');
            dropZone.classList.remove('correct');
            feedback.textContent = '❌ 再試試看！提示：形容詞要放在名詞前面';
            feedback.className = 'mt-2 font-medium text-red-600';
        }
    }

    function checkQuestion(questionNum) {
        const dropZone = document.querySelector(`[data-question="q${questionNum}"]`);
        const words = Array.from(dropZone.children).map(child => child.textContent.trim());
        const userAnswer = words.join(' ');
        const correctAnswer = dropZone.dataset.answer;
        const feedback = document.getElementById(`q-feedback-${questionNum}`);

        if (userAnswer === correctAnswer) {
            dropZone.classList.add('correct');
            dropZone.classList.remove('incorrect');
            feedback.textContent = '✅ 正確！很棒！';
            feedback.className = 'mt-2 font-medium text-green-600 text-lg';
            completedSections['be'][`q${questionNum}`] = true;
            updateProgress();
        } else {
            dropZone.classList.add('incorrect');
            dropZone.classList.remove('correct');
            feedback.textContent = '❌ 再試試看！提示：be動詞要移到最前面';
            feedback.className = 'mt-2 font-medium text-red-600 text-lg';
        }
    }

    // Who疑問句學習單的檢查答案
    function checkWhoAnswer(questionNum) {
        const dropZone = document.querySelector(`[data-question="who-q${questionNum}"]`);
        const words = Array.from(dropZone.children).map(child => child.textContent.trim());
        const userAnswer = words.join(' ');
        const correctAnswer = dropZone.dataset.answer;
        const feedback = document.getElementById(`who-feedback-${questionNum}`);
        
        if (userAnswer === correctAnswer) {
            dropZone.classList.add('correct');
            dropZone.classList.remove('incorrect');
            feedback.textContent = '✅ 正確！很棒！';
            feedback.className = 'mt-2 font-medium text-green-600';
            completedSections['who'][questionNum] = true;
            updateProgress();
        } else {
            dropZone.classList.add('incorrect');
            dropZone.classList.remove('correct');
            feedback.textContent = '❌ 再試試看！提示：注意主詞和動詞的順序';
            feedback.className = 'mt-2 font-medium text-red-600';
        }
    }

    function checkWhoQuestion(questionNum) {
        const dropZone = document.querySelector(`[data-question="who-q-${questionNum}"]`);
        const words = Array.from(dropZone.children).map(child => child.textContent.trim());
        const userAnswer = words.join(' ');
        const correctAnswer = dropZone.dataset.answer;
        const feedback = document.getElementById(`who-q-feedback-${questionNum}`);
        
        if (userAnswer === correctAnswer) {
            dropZone.classList.add('correct');
            dropZone.classList.remove('incorrect');
            feedback.textContent = '✅ 正確！很棒！';
            feedback.className = 'mt-2 font-medium text-green-600 text-lg';
            completedSections['who'][`q${questionNum}`] = true;
            updateProgress();
        } else {
            dropZone.classList.add('incorrect');
            dropZone.classList.remove('correct');
            feedback.textContent = '❌ 再試試看！提示：Who\'s要放在最前面';
            feedback.className = 'mt-2 font-medium text-red-600 text-lg';
        }
    }

    function selectAnswer(answerId, answer) {
        const answerDiv = document.getElementById(answerId);
        answerDiv.innerHTML = `<span class="bg-yellow-100 px-2 py-1 rounded">${answer}</span>`;
        completedSections['be'][answerId.substring(0, 2)] = true;
        updateProgress();
    }

    function checkAnswers() {
        const correctAnswers = {
            'a1-short': 'Yes, he is.',
            'a1-long': 'He is a tall office worker.',
            'a2-short': 'Yes, she is.',
            'a2-long': 'She is a happy police officer.',
            'a3-short': 'No, she isn\'t.',
            'a3-long': 'She isn\'t a beautiful writer.'
        };
        let allCorrect = true;
        let feedback = '';

        for (let answerId in correctAnswers) {
            const answerDiv = document.getElementById(answerId);
            const userAnswer = answerDiv.textContent.trim();
            if (userAnswer === correctAnswers[answerId]) {
                answerDiv.classList.add('correct');
                answerDiv.classList.remove('incorrect');
            } else {
                answerDiv.classList.add('incorrect');
                answerDiv.classList.remove('correct');
                allCorrect = false;
            }
        }

        if (allCorrect) {
            feedback = '🎉 全部正確！你已經完成所有練習！';
            completedSections['be']['a1'] = true;
            completedSections['be']['a2'] = true;
            completedSections['be']['a3'] = true;
            updateProgress();
        } else {
            feedback = '有些答案需要再檢查一下，注意題目要求的是肯定還是否定回答！';
        }

        document.getElementById('answer-feedback').textContent = feedback;
        document.getElementById('answer-feedback').className = allCorrect ? 'mt-2 font-medium text-green-600' : 'mt-2 font-medium text-red-600';
    }

    function showHint(questionNum) {
        const hint = document.getElementById(`hint-${questionNum}`);
        if (hint.classList.contains('hidden')) {
            hint.classList.remove('hidden');
        } else {
            hint.classList.add('hidden');
        }
    }

    function resetQuestion(questionNum) {
        const dropZone = document.querySelector(`[data-question="${questionNum}"]`);
        const feedback = document.getElementById(`feedback-${questionNum}`);
        const wordBank = document.getElementById(`word-bank-${questionNum}`);
        
        dropZone.innerHTML = '';
        dropZone.classList.remove('correct', 'incorrect');
        
        feedback.textContent = '';
        feedback.className = 'mt-2 font-medium text-lg';
        
        if (wordBank) {
            const allWords = wordBank.querySelectorAll('.word-item');
            allWords.forEach(word => {
                word.style.display = 'inline-block';
            });
        }
    }

    function resetQuestionQ(questionNum) {
        const dropZone = document.querySelector(`[data-question="q${questionNum}"]`);
        const feedback = document.getElementById(`q-feedback-${questionNum}`);
        const wordBank = document.getElementById(`q-word-bank-${questionNum}`);
        
        dropZone.innerHTML = '';
        dropZone.classList.remove('correct', 'incorrect');
        
        feedback.textContent = '';
        feedback.className = 'mt-2 font-medium text-lg';

        if (wordBank) {
            const allWords = wordBank.querySelectorAll('.word-item');
            allWords.forEach(word => {
                word.style.display = 'inline-block';
            });
        }
    }
    
    function resetWhoQuestion(questionNum) {
        const dropZone = document.querySelector(`[data-question="who-q${questionNum}"]`);
        const feedback = document.getElementById(`who-feedback-${questionNum}`);
        const wordBank = document.getElementById(`who-word-bank-${questionNum}`);
        
        dropZone.innerHTML = '';
        dropZone.classList.remove('correct', 'incorrect');
        
        feedback.textContent = '';
        feedback.className = 'mt-2 font-medium text-lg';
        
        if (wordBank) {
            const allWords = wordBank.querySelectorAll('.word-item');
            allWords.forEach(word => {
                word.style.display = 'inline-block';
            });
        }
    }
    
    function resetWhoQuestionQ(questionNum) {
        const dropZone = document.querySelector(`[data-question="who-q-${questionNum}"]`);
        const feedback = document.getElementById(`who-q-feedback-${questionNum}`);
        const wordBank = document.getElementById(`who-q-word-bank-${questionNum}`);
        
        dropZone.innerHTML = '';
        dropZone.classList.remove('correct', 'incorrect');
        
        feedback.textContent = '';
        feedback.className = 'mt-2 font-medium text-lg';

        if (wordBank) {
            const allWords = wordBank.querySelectorAll('.word-item');
            allWords.forEach(word => {
                word.style.display = 'inline-block';
            });
        }
    }

    function updateProgress() {
        const allBeDone = Object.values(completedSections['be']).every(Boolean);
        const allWhoDone = Object.values(completedSections['who']).every(Boolean);
        
        // 更新 Be動詞單元的進度
        const bePart1Done = completedSections['be'][1] && completedSections['be'][2] && completedSections['be'][3];
        const bePart2Done = completedSections['be']['q1'] && completedSections['be']['q2'] && completedSections['be']['q3'];
        const bePart3Done = completedSections['be']['a1'] && completedSections['be']['a2'] && completedSections['be']['a3'];

        if (bePart1Done && bePart2Done && bePart3Done) {
             const progressBe = document.getElementById('progress-1');
             progressBe.className = 'w-20 h-20 mx-auto bg-green-500 text-white rounded-full flex items-center justify-center text-3xl mb-3 font-bold';
             progressBe.textContent = '✔';
        }
        
        // 更新 Who疑問句單元的進度
        const whoPart1Done = completedSections['who'][1] && completedSections['who'][2];
        const whoPart2Done = completedSections['who']['q1'] && completedSections['who']['q2'] && completedSections['who']['q3'];
        
        if (whoPart1Done && whoPart2Done) {
            const progressWho = document.getElementById('progress-who-1');
            progressWho.className = 'w-20 h-20 mx-auto bg-green-500 text-white rounded-full flex items-center justify-center text-3xl mb-3 font-bold';
            progressWho.textContent = '✔';
        }
        
        // 檢查是否所有單元都完成
        if (allBeDone && allWhoDone) {
            setTimeout(() => {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center';
                modal.innerHTML = `
                    <div class="bg-white p-8 rounded-lg shadow-xl text-center">
                        <h2 class="text-2xl font-bold mb-4">🎊 恭喜！</h2>
                        <p class="text-lg">你已經完成所有練習！現在可以在紙本上寫下答案了！</p>
                        <button onclick="this.closest('.fixed').remove()" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg">關閉</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }, 500);
        }
    }
</script>
</body>
</html>
