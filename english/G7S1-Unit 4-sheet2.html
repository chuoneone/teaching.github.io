<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 4 Grammar Focus2(è©¢å•æ™‚é–“å¹¾é»?)</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="dog.png" type="image/png">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
        }

        .exercise-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 24px;
            margin-bottom: 24px;
        }

        .example-box {
            background-color: #f8faff;
            border: 1px solid #dbeafe;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            line-height: 1.8;
            color: #1e3a8a;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px;
            background-color: #f1f5f9;
            border-radius: 8px;
        }

        .drop-zone {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px;
            background-color: #ffffff;
            border: 2px dashed #94a3b8;
            border-radius: 8px;
            min-height: 50px;
        }

        .word-item {
            padding: 8px 16px;
            background-color: #e0f2fe;
            border: 1px solid #7dd3fc;
            color: #075985;
            border-radius: 9999px;
            cursor: pointer;
            user-select: none;
            font-weight: 600;
        }

        .drop-zone.correct {
            border-color: #22c55e;
            background-color: #f0fdf4;
        }

        .drop-zone.incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .question-prompt {
            font-size: 1.1em;
            font-weight: 600;
        }

        .card-glow-animation {
            animation: cardCorrectGlow 1s ease-out;
        }

        @keyframes cardCorrectGlow {
            0% {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            }

            50% {
                box-shadow: 0 8px 30px rgba(34, 197, 94, 0.4);
            }

            100% {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            }
        }
    </style>
</head>

<body class="p-4 sm:p-8">

    <div id="tooltip"></div>

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800">Unit 4 Grammar Focus2(è©¢å•æ™‚é–“å¹¾é»?)</h1>
            <p class="text-lg text-slate-600 mt-2">èª²æœ¬p.73-74</p>
        </header>

        <!-- Section 1 -->
        <div class="exercise-section mb-8">
            <h2 class="text-2xl font-bold text-blue-700 mb-4">â— è«‹ç”¨è‹±æ–‡å¯«å‡ºä¸‹åˆ—æ™‚é–“ï¼ˆå…ˆã€Œæ™‚ã€å¾Œã€Œåˆ†ã€ï¼‰</h2>

            <div class="example-box">
                <b>ä¾‹ï¼š</b>2:10 âœ Itâ€™s two ten.<br>
                <b>ä¾‹ï¼š</b>4:00 âœ Itâ€™s four oâ€™clock.
            </div>

            <div id="exercise-container-1"></div>
        </div>

        <!-- Section 2 -->
        <div class="exercise-section mb-8">
            <h2 class="text-2xl font-bold text-blue-700 mb-4">â— è«‹æ ¹æ“š Lisa é€±æœ«è¡Œäº‹æ›†å›ç­”</h2>

            <div class="example-box">
                <b>æ³¨æ„ï¼š</b><br>
                1. ç”¨ a.m. / p.m.<br>
                2. ç‰¹å®šæ™‚é–“è¦ç”¨ at
            </div>

            <div class="overflow-x-auto rounded-lg border border-slate-300 shadow-sm mb-6">
                <table class="w-full min-w-[500px] text-sm text-left text-slate-700">
                    <thead class="bg-slate-100 text-slate-800 font-semibold">
                        <tr>
                            <th class="px-6 py-3">Time</th>
                            <th class="px-6 py-3">Saturday</th>
                            <th class="px-6 py-3">Sunday</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="px-6 py-4 font-bold">10:00</td>
                            <td class="px-6 py-4">violin class</td>
                            <td class="px-6 py-4">swimming</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-bold">12:00</td>
                            <td class="px-6 py-4">lunch with Jane</td>
                            <td class="px-6 py-4"></td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-bold">16:00</td>
                            <td class="px-6 py-4"></td>
                            <td class="px-6 py-4">English class</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-bold">19:00</td>
                            <td class="px-6 py-4"></td>
                            <td class="px-6 py-4">Kellyâ€™s birthday party</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-bold">20:00</td>
                            <td class="px-6 py-4">watch TV</td>
                            <td class="px-6 py-4"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="exercise-container-2"></div>
        </div>

    </div>

<script>
// --- é¡Œç›®è³‡æ–™ï¼šå¥é»ä¸æ”¾åœ¨ chunks è£¡ ---
const exercises = [
    // Section 1
    { id: 'q1', section: 1, prompt: '1. 1:20', question: 'è«‹é‡çµ„å¥å­:', answer: 'Itâ€™s one twenty.', chunks: ['Itâ€™s', 'one', 'twenty'] },
    { id: 'q2', section: 1, prompt: '2. 4:15', question: 'è«‹é‡çµ„å¥å­:', answer: 'Itâ€™s four fifteen.', chunks: ['Itâ€™s', 'four', 'fifteen'] },
    { id: 'q3', section: 1, prompt: '3. 3:45', question: 'è«‹é‡çµ„å¥å­:', answer: 'Itâ€™s three forty-five.', chunks: ['Itâ€™s', 'three', 'forty-five'] },
    { id: 'q4', section: 1, prompt: '4. 11:30', question: 'è«‹é‡çµ„å¥å­:', answer: 'Itâ€™s eleven thirty.', chunks: ['Itâ€™s', 'eleven', 'thirty'] },
    { id: 'q5', section: 1, prompt: '5. 8:00', question: 'è«‹é‡çµ„å¥å­:', answer: 'Itâ€™s eight oâ€™clock.', chunks: ['Itâ€™s', 'eight', 'oâ€™clock'] },

    // Section 2
    { id: 'q6', section: 2, prompt: '1. What time is the violin class?', question: 'è«‹é‡çµ„å›ç­”:', answer: 'Itâ€™s at 10 a.m.', chunks: ['Itâ€™s', 'at', '10', 'a.m.'] },
    { id: 'q7', section: 2, prompt: '2. What time is Kellyâ€™s birthday party?', question: 'è«‹é‡çµ„å›ç­”:', answer: 'Itâ€™s at 7 p.m.', chunks: ['Itâ€™s', 'at', '7', 'p.m.'] },
    { id: 'q8', section: 2, prompt: '3. What time is Lisaâ€™s English class on Sunday?', question: 'è«‹é‡çµ„å›ç­”:', answer: 'Itâ€™s at 4 p.m.', chunks: ['Itâ€™s', 'at', '4', 'p.m.'] },
];

// ------------------- åˆå§‹åŒ–ç•«é¢ -------------------
document.addEventListener('DOMContentLoaded', () => {

    const container1 = document.getElementById('exercise-container-1');
    const container2 = document.getElementById('exercise-container-2');

    exercises.forEach(ex => {
        const card = document.createElement('div');
        card.className = 'exercise-card';
        card.id = `exercise-${ex.id}`;

        card.innerHTML = `
            <div class="question-prompt">${ex.prompt}</div>
            <p class="mb-3">${ex.question}</p>
            <div class="word-bank mt-4">
                ${[...ex.chunks].sort(() => Math.random() - 0.5).map(w => `<div class="word-item">${w}</div>`).join('')}
            </div>
            <div class="drop-zone mt-3"></div>

            <div class="flex flex-wrap gap-3 mt-4">
                <button class="check-btn bg-blue-500 text-white font-bold py-2 px-4 rounded" data-answer="${ex.answer}" data-id="${ex.id}">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="reset-btn bg-gray-500 text-white font-bold py-2 px-4 rounded" data-id="${ex.id}">é‡æ–°ä½œç­”</button>
            </div>

            <p class="feedback mt-2 text-sm font-bold"></p>
        `;

        if (ex.section === 1) container1.appendChild(card);
        else container2.appendChild(card);
    });

    addEventListeners();
});

// ------------------- äº‹ä»¶è™•ç† -------------------
function addEventListeners() {

    // é»é¸ç§»å‹•å–®å­—
    document.body.addEventListener('click', e => {
        if (e.target.classList.contains('word-item')) {
            const card = e.target.closest('.exercise-card');
            const bank = card.querySelector('.word-bank');
            const drop = card.querySelector('.drop-zone');

            if (e.target.parentElement === bank) drop.appendChild(e.target);
            else bank.appendChild(e.target);
        }
    });

    // é‡æ–°ä½œç­”
    document.querySelectorAll('.reset-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const card = document.getElementById(`exercise-${btn.dataset.id}`);
            const bank = card.querySelector('.word-bank');
            const drop = card.querySelector('.drop-zone');
            const feedback = card.querySelector('.feedback');

            [...drop.children].forEach(c => bank.appendChild(c));
            feedback.textContent = "";
            drop.classList.remove('correct', 'incorrect');
        });
    });

    // ------------------- æœ€é‡è¦ï¼šæ¯”å°ç­”æ¡ˆï¼ˆæœ€çµ‚ç©©å®šç‰ˆï¼‰ -------------------
    document.querySelectorAll('.check-btn').forEach(btn => {
        btn.addEventListener('click', () => {

            const card = document.getElementById(`exercise-${btn.dataset.id}`);
            const drop = card.querySelector('.drop-zone');
            const feedback = card.querySelector('.feedback');

            let words = [...drop.children].map(c => c.textContent.trim());
            let userAnswer = "";

            // ğŸ‘‰ å¥é» . ? ! è‡ªå‹•é»ä¸Šå‰ä¸€å€‹å­—
            for (let i = 0; i < words.length; i++) {
                if ([".", "?", "!"].includes(words[i])) {
                    userAnswer = userAnswer.trim() + words[i];
                } else {
                    userAnswer += (userAnswer === "" ? "" : " ") + words[i];
                }
            }

            userAnswer = userAnswer.trim();
            let correct = btn.dataset.answer.trim();

            // --- æ¨™æº–åŒ–ï¼ˆNormalizationï¼‰---
            let ua = userAnswer.toLowerCase();
            let ca = correct.toLowerCase();

            ua = ua.replace(/\s+/g, " ");
            ca = ca.replace(/\s+/g, " ");

            // a.m. / am / A.M. çµ±ä¸€ç‚º am
            ua = ua.replace(/a\.?m\.?/gi, "am");
            ca = ca.replace(/a\.?m\.?/gi, "am");
            ua = ua.replace(/p\.?m\.?/gi, "pm");
            ca = ca.replace(/p\.?m\.?/gi, "pm");

            // å¥å°¾å¥é»å¿½ç•¥
            ua = ua.replace(/\.+$/, "");
            ca = ca.replace(/\.+$/, "");

            // ---------------- æ¯”å° ----------------
            if (ua === ca) {
                feedback.textContent = "ğŸ‰ å¤ªæ£’äº†ï¼Œç­”å°äº†ï¼";
                feedback.className = "feedback mt-2 text-sm font-bold text-green-600";
                drop.classList.add('correct');
                drop.classList.remove('incorrect');

                card.classList.add('card-glow-animation');
                setTimeout(() => card.classList.remove('card-glow-animation'), 1000);
            } else {
                feedback.textContent = "ğŸ¤” å†è©¦ä¸€æ¬¡çœ‹çœ‹ï¼";
                feedback.className = "feedback mt-2 text-sm font-bold text-red-600";
                drop.classList.add('incorrect');
                drop.classList.remove('correct');
            }
        });
    });
}
</script>

</body>
</html>
