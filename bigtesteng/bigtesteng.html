<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>113æœƒè€ƒ1-10</title>
    <link rel="icon" href="dog.png" type="image/png">
    <link rel="stylesheet" href="teststyle.css">
</head>
<body>

<div id="quiz-wrapper"> <!-- Outer container -->
    <div id="score-area">åˆ†æ•¸: 0 / 10</div>

    <div id="main-content"> <!-- Flex container for columns -->

        <div id="left-column"> <!-- Question, Options, Buttons -->
            <div id="question-area">
                <div id="question-number">å•é¡Œ 1 / 10</div>
                <div id="image-container">
                    <!-- Image -->
                </div>
                <div id="question-text">
                    <!-- Question text -->
                </div>
                <div id="options-area">
                    <!-- Options -->
                </div>
            </div>
             <div id="navigation-buttons">
                <button id="hint-btn">æç¤º</button>
                <button id="check-btn">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button id="next-btn" disabled>ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <div id="right-column"> <!-- Hints and Feedback -->
            <div id="detailed-hint-area">
                <!-- Detailed hint content generated by JS -->
            </div>

            <div id="feedback-area">
                <h4 id="feedback-title"></h4>
                <span class="explanation-title">ğŸ“˜ è§£æï¼š</span>
                <span id="feedback-explanation" class="explanation-content"></span>
            </div>
        </div>

    </div> <!-- End #main-content -->
</div> <!-- End #quiz-wrapper -->


<div id="results-area"> <!-- Results screen remains separate -->
    <h2>æ¸¬é©—å®Œæˆï¼</h2>
    <p id="final-score">ä½ çš„æœ€çµ‚åˆ†æ•¸æ˜¯: X / 10</p>
    <button onclick="location.reload()">é‡æ–°é–‹å§‹æ¸¬é©—</button>
</div>

<!-- JavaScript remains embedded here -->
<script>
    const questions = [
         {
             questionHTML: `Look at the picture. There is <span id="q0_h1">______</span> <span id="q0_h2">under the door</span>.`,
             imageSrc: "113eng01.png", // Ensure image is in the same folder
             options: ["an envelope", "a plant", "a sign", "an umbrella"],
             answer: "A",
             highlightSelectors: ["#q0_h1", "#q0_h2"],
             hintKeywords: [
                 { word: "under", definition: "åœ¨...ä¸‹é¢" },
                 { word: "door", definition: "é–€" }
             ],
             optionTranslations: ["ä¸€å€‹ä¿¡å°", "ä¸€æ ªæ¤ç‰©", "ä¸€å€‹æ¨™èªŒ", "ä¸€æŠŠé›¨å‚˜"],
             explanation: `çœ‹åœ–æ‰¾ç­”æ¡ˆã€‚é–€ä¸‹é¢æœ‰ä¸€å¼µä¿¡ï¼Œå« <span class='highlight-keyword'>envelope</span>ã€‚ä¸æ˜¯æ¤ç‰©ã€ä¸æ˜¯å‚˜ã€ä¸æ˜¯æ¨™ç¤ºç‰Œã€‚`
         },
         {
             questionHTML: `My <span id="q1_h1">______</span> <span id="q1_h2">hurts</span> so much that I cannot even <span id="q1_h3">turn my head</span>.`,
             imageSrc: null,
             options: ["arm", "knee", "neck", "stomach"],
             answer: "C",
             highlightSelectors: ["#q1_h1", "#q1_h2", "#q1_h3"],
              hintKeywords: [
                 { word: "hurts", definition: "ç–¼ç—›" },
                 { word: "turn my head", definition: "è½‰æˆ‘çš„é ­" }
             ],
             optionTranslations: ["æ‰‹è‡‚", "è†è“‹", "è„–å­", "è‚šå­"],
             explanation: `è½‰é ­æœƒç—›ï¼Œä¸€å®šæ˜¯<span class='highlight-keyword'>è„–å­ (neck)</span>ç—›ã€‚`
         },
         {
             questionHTML: `Our school basketball team <span id="q2_h1">won</span> the national game last night. We are so <span id="q2_h2">______</span> them.`,
             imageSrc: null,
             options: ["popular with", "proud of", "sorry for", "worried about"],
             answer: "B",
             highlightSelectors: ["#q2_h1", "#q2_h2"],
             hintKeywords: [
                 { word: "won", definition: "è´äº†" },
                 { word: "national game", definition: "å…¨åœ‹æ¯”è³½" }
             ],
             optionTranslations: ["å—...æ­¡è¿", "ç‚º...é©•å‚²", "ç‚º...æ„Ÿåˆ°éºæ†¾/æŠ±æ­‰", "æ“”å¿ƒ..."],
             explanation: `ã€Œ<span class='highlight-keyword'>ç‚ºä»–å€‘é©•å‚²</span>ã€è¦èªª <span class='highlight-keyword'>proud of</span>ã€‚`
         },
         {
             questionHTML: `Tomorrow is Samâ€™s <span id="q3_h1">last day</span> in the office. Nobody knows why he <span id="q3_h2">decided to ______</span>.`,
             imageSrc: null,
             options: ["hide", "leave", "pack", "walk"],
             answer: "B",
             highlightSelectors: ["#q3_h1", "#q3_h2"],
             hintKeywords: [
                 { word: "last day", definition: "æœ€å¾Œä¸€å¤©" },
                 { word: "decided", definition: "æ±ºå®š" }
             ],
             optionTranslations: ["èº²è—", "é›¢é–‹", "æ‰“åŒ…", "èµ°è·¯"],
             explanation: `ä»–æ˜å¤©æœ€å¾Œä¸€å¤©ä¸Šç­ï¼Œæ˜¯è¦<span class='highlight-keyword'>é›¢é–‹ (leave)</span>ã€‚`
         },
         {
             questionHTML: `Itâ€™s not a good idea to go mountain climbing in this <span id="q4_h1">bad ______</span>. We should wait until the <span id="q4_h2">typhoon</span> goes away.`,
             imageSrc: null,
             options: ["chance", "dream", "habit", "weather"],
             answer: "D",
             highlightSelectors: ["#q4_h1", "#q4_h2"],
              hintKeywords: [
                 { word: "bad", definition: "å£çš„ï¼›æƒ¡åŠ£çš„" },
                 { word: "mountain climbing", definition: "çˆ¬å±±" },
                 { word: "typhoon", definition: "é¢±é¢¨" }
             ],
             optionTranslations: ["æ©Ÿæœƒ", "å¤¢æƒ³", "ç¿’æ…£", "å¤©æ°£"],
             explanation: `<span class='highlight-keyword'>å¤©æ°£ (weather)</span> ä¸å¥½ (å› æœ‰é¢±é¢¨)ï¼Œä¸é©åˆçˆ¬å±±ã€‚`
         },
         {
             questionHTML: `Chris loves <span id="q5_h1">walking with Anna on snowy days</span>, but Anna <span id="q5_h2">hates ______</span> very much.`,
             imageSrc: null,
             options: ["them", "so", "one", "it"],
             answer: "D",
             highlightSelectors: ["#q5_h1", "#q5_h2"],
              hintKeywords: [
                 { word: "snowy days", definition: "ä¸‹é›ªå¤©" },
                 { word: "hates", definition: "è¨å­" }
             ],
             optionTranslations: ["ä»–å€‘/ç‰ å€‘/å®ƒå€‘ (è¤‡æ•¸)", "å¦‚æ­¤/ä¹Ÿ", "ä¸€å€‹ (æ³›æŒ‡)", "å®ƒ (å–®æ•¸/äº‹æƒ…)"],
             explanation: `<span class='highlight-keyword'>it</span> æ˜¯æŒ‡ã€Œåœ¨ä¸‹é›ªå¤©æ•£æ­¥ã€é€™ä»¶äº‹ã€‚`
         },
         {
             questionHTML: `Lora <span id="q6_h1">likes</span> to eat bananas that are already a little brown on the outside, and <span id="q6_h2">so ______ I</span>.`,
             imageSrc: null,
             options: ["am", "do", "have", "will"],
             answer: "B",
             highlightSelectors: ["#q6_h1", "#q6_h2"],
              hintKeywords: [
                 { word: "likes", definition: "å–œæ­¡ (å‹•è©)" },
                 { word: "so ... I", definition: "æˆ‘ä¹Ÿ..." }
             ],
             optionTranslations: ["æ˜¯ (beå‹•è©)", "åš/çš„ç¢º (åŠ©å‹•è©)", "æœ‰ (åŠ©å‹•è©/å‹•è©)", "å°‡æœƒ (åŠ©å‹•è©)"],
             explanation: `å¥¹å–œæ­¡ (likes)ï¼Œæˆ‘ä¹Ÿå–œæ­¡ï¼Œè¦èªª <span class='highlight-keyword'>so do I</span>ã€‚`
         },
         {
             questionHTML: `Your refrigerator shouldnâ€™t be making loud noises now, but <span id="q7_h1">if it ______ does</span>, just give me a call and Iâ€™ll come check it again.`,
             imageSrc: null,
             options: ["already", "even", "finally", "still"],
             answer: "D",
             highlightSelectors: ["#q7_h1"],
             hintKeywords: [
                 { word: "shouldn't", definition: "ä¸æ‡‰è©²" },
                 { word: "loud noises", definition: "å¤§å™ªéŸ³" },
                 { word: "if ... does", definition: "å¦‚æœ...çœŸçš„..." }
             ],
             optionTranslations: ["å·²ç¶“", "ç”šè‡³", "çµ‚æ–¼", "ä»ç„¶"],
             explanation: `å¦‚æœå†°ç®±<span class='highlight-keyword'>ä»ç„¶ (still)</span> æœ‰è²éŸ³ï¼Œstill å°±æ˜¯ã€Œä»ç„¶ã€ã€‚`
         },
         {
             questionHTML: `After <span id="q8_h1">winning money</span> in the card game, Jay decided to <span id="q8_h2">try again</span>. He felt that he might also <span id="q8_h3">be ______</span> a second time.`,
             imageSrc: null,
             options: ["famous", "interested", "lucky", "ready"],
             answer: "C",
             highlightSelectors: ["#q8_h1", "#q8_h2", "#q8_h3"],
             hintKeywords: [
                 { word: "winning money", definition: "è´éŒ¢" },
                 { word: "try again", definition: "å†è©¦ä¸€æ¬¡" },
                 { word: "felt", definition: "æ„Ÿè¦º (feeléå»å¼)" }
             ],
             optionTranslations: ["æœ‰åçš„", "æ„Ÿèˆˆè¶£çš„", "å¹¸é‹çš„", "æº–å‚™å¥½çš„"],
             explanation: `ä»–ä¸Šæ¬¡è´éŒ¢ï¼Œè¦ºå¾—è‡ªå·±å†è©¦ä¸€æ¬¡ä¹Ÿå¯èƒ½æœƒ<span class='highlight-keyword'>å¹¸é‹ (lucky)</span>ã€‚`
         },
         {
             questionHTML: `The knife <span id="q9_h1">doesnâ€™t cut very well</span>. Itâ€™s <span id="q9_h2">not as ______ as before</span>.`,
             imageSrc: null,
             options: ["bright", "heavy", "quick", "sharp"],
             answer: "D",
             highlightSelectors: ["#q9_h1", "#q9_h2"],
             hintKeywords: [
                 { word: "knife", definition: "åˆ€å­" },
                 { word: "cut well", definition: "åˆ‡å¾—å¥½/é‹’åˆ©" },
                 { word: "not as ... as before", definition: "ä¸åƒä»¥å‰é‚£éº¼..." }
             ],
             optionTranslations: ["æ˜äº®çš„", "é‡çš„", "å¿«çš„", "é‹’åˆ©çš„"],
             explanation: `åˆ€è®Šéˆäº†ï¼ˆåˆ‡ä¸å‹•ï¼‰ï¼Œä¸å†<span class='highlight-keyword'>é‹’åˆ© (sharp)</span>ã€‚`
         }
     ];

    let currentQuestionIndex = 0;
    let score = 0;
    let answerChecked = false;
    let hintUsed = false;

    const questionNumberEl = document.getElementById('question-number');
    const imageContainerEl = document.getElementById('image-container');
    const questionTextEl = document.getElementById('question-text');
    const optionsAreaEl = document.getElementById('options-area');
    const hintBtn = document.getElementById('hint-btn');
    const checkBtn = document.getElementById('check-btn');
    const nextBtn = document.getElementById('next-btn');
    const detailedHintAreaEl = document.getElementById('detailed-hint-area');
    const feedbackAreaEl = document.getElementById('feedback-area');
    const feedbackTitleEl = document.getElementById('feedback-title');
    const feedbackExplanationEl = document.getElementById('feedback-explanation');
    const scoreAreaEl = document.getElementById('score-area');
    const quizWrapperEl = document.getElementById('quiz-wrapper');
    const resultsAreaEl = document.getElementById('results-area');
    const finalScoreEl = document.getElementById('final-score');
    const rightColumnEl = document.getElementById('right-column');


    function loadQuestion() {
        answerChecked = false;
        hintUsed = false;
        const currentQuestion = questions[currentQuestionIndex];

        questionNumberEl.textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${questions.length}`;
        questionTextEl.innerHTML = currentQuestion.questionHTML;

        imageContainerEl.innerHTML = '';
        if (currentQuestion.imageSrc) {
            const img = document.createElement('img');
            img.id = `q${currentQuestionIndex}_image`;
            img.src = currentQuestion.imageSrc;
            img.alt = `Question ${currentQuestionIndex + 1} Image`;
            img.onerror = function() {
                imageContainerEl.innerHTML = '<p style="color: var(--incorrect-text); font-size: 0.9em;">åœ–ç‰‡åŠ è¼‰å¤±æ•—ï¼è«‹ç¢ºä¿åœ–ç‰‡ "' + currentQuestion.imageSrc + '" èˆ‡HTMLæ–‡ä»¶åœ¨åŒä¸€è³‡æ–™å¤¾ä¸­ã€‚</p>';
            };
            imageContainerEl.appendChild(img);
        }

        optionsAreaEl.innerHTML = '';
        currentQuestion.options.forEach((option, index) => {
            const optionLetter = String.fromCharCode(65 + index);
            const optionId = `q${currentQuestionIndex}_opt${index}`;
            const optionDiv = document.createElement('div');
            optionDiv.className = 'option';
            const radioInput = document.createElement('input');
            radioInput.type = 'radio';
            radioInput.name = `q${currentQuestionIndex}_options`;
            radioInput.id = optionId;
            radioInput.value = optionLetter;
            const label = document.createElement('label');
            label.htmlFor = optionId;
            label.textContent = `(${optionLetter}) ${option}`;
             optionDiv.addEventListener('click', (e) => {
                 if (!answerChecked && !e.target.disabled) {
                    radioInput.checked = true;
                 }
             });
            optionDiv.appendChild(radioInput);
            optionDiv.appendChild(label);
            optionsAreaEl.appendChild(optionDiv);
        });

        detailedHintAreaEl.style.display = 'none';
        detailedHintAreaEl.innerHTML = '';
        feedbackAreaEl.style.display = 'none';
        feedbackAreaEl.className = 'feedback-area';
        hintBtn.disabled = false;
        checkBtn.disabled = false;
        nextBtn.disabled = true;
        if (rightColumnEl) rightColumnEl.scrollTop = 0; // Scroll right column to top if it exists
    }

    function showHint() {
        if (hintUsed || answerChecked) return;

        const currentQuestion = questions[currentQuestionIndex];
        let hintHTML = '';

        if (currentQuestion.highlightSelectors && currentQuestion.highlightSelectors.length > 0) {
            currentQuestion.highlightSelectors.forEach(selector => {
                const elementToHighlight = questionTextEl.querySelector(selector);
                if (elementToHighlight) {
                    elementToHighlight.classList.add('highlight-question');
                }
            });
        }

        if (currentQuestion.hintKeywords && currentQuestion.hintKeywords.length > 0) {
            hintHTML += `<h5>é—œéµå­—æç¤º</h5><ul>`;
            currentQuestion.hintKeywords.forEach(kw => {
                 hintHTML += `<li><span class="keyword-term">${kw.word}:</span> ${kw.definition}</li>`;
            });
            hintHTML += `</ul>`;
        }

        if (currentQuestion.optionTranslations && currentQuestion.optionTranslations.length > 0 && currentQuestion.options.length === currentQuestion.optionTranslations.length) {
             hintHTML += `<h5>é¸é …ç¿»è­¯</h5><ul>`;
             currentQuestion.options.forEach((opt, index) => {
                 const letter = String.fromCharCode(65 + index);
                 hintHTML += `<li><span class="option-letter">(${letter})</span> ${opt}: ${currentQuestion.optionTranslations[index]}</li>`;
             });
             hintHTML += `</ul>`;
        }

        if (hintHTML !== '') {
             detailedHintAreaEl.innerHTML = hintHTML;
             detailedHintAreaEl.style.display = 'block';
             if (rightColumnEl) rightColumnEl.scrollTop = 0;
        }

        hintUsed = true;
        hintBtn.disabled = true;
    }

    function checkAnswer() {
        const selectedOption = optionsAreaEl.querySelector(`input[name="q${currentQuestionIndex}_options"]:checked`);

        if (!selectedOption) {
            alert('è«‹é¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼');
            return;
        }

        answerChecked = true;
        const userAnswer = selectedOption.value;
        const currentQuestion = questions[currentQuestionIndex];
        const correctAnswer = currentQuestion.answer;

        optionsAreaEl.querySelectorAll('input[type="radio"]').forEach(input => input.disabled = true);
        optionsAreaEl.querySelectorAll('.option').forEach(div => div.style.cursor = 'default');
        checkBtn.disabled = true;
        hintBtn.disabled = true;

        feedbackExplanationEl.innerHTML = currentQuestion.explanation;
        feedbackAreaEl.style.display = 'block';
        feedbackAreaEl.className = 'feedback-area'; // Reset class first

        if (userAnswer === correctAnswer) {
            score++;
            feedbackTitleEl.textContent = `âœ… æ­£ç¢ºï¼`;
            feedbackAreaEl.classList.add('correct');
        } else {
             let correctOptionText = '';
             const correctOptionIndex = currentQuestion.answer.charCodeAt(0) - 65;
             if (correctOptionIndex >= 0 && correctOptionIndex < currentQuestion.options.length) {
                 correctOptionText = currentQuestion.options[correctOptionIndex];
             }
             feedbackTitleEl.textContent = `âŒ éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ (${correctAnswer}) ${correctOptionText}`;
             feedbackAreaEl.classList.add('incorrect');
        }

        scoreAreaEl.textContent = `åˆ†æ•¸: ${score} / ${questions.length}`;
        nextBtn.disabled = false;
        if (rightColumnEl) rightColumnEl.scrollTop = detailedHintAreaEl.offsetHeight + 20;
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            loadQuestion();
            window.scrollTo(0, 0);
        } else {
            showResults();
        }
    }

    function showResults() {
        quizWrapperEl.style.display = 'none';
        finalScoreEl.textContent = `ä½ çš„æœ€çµ‚åˆ†æ•¸æ˜¯: ${score} / ${questions.length}`;
        resultsAreaEl.style.display = 'block';
    }

    hintBtn.addEventListener('click', showHint);
    checkBtn.addEventListener('click', checkAnswer);
    nextBtn.addEventListener('click', nextQuestion);

    loadQuestion();
</script>

</body>
</html>