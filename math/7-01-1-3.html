<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1-3正負數的乘除數位學習單</title>    
    <link rel="icon" href="dog.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(to top right, #f3e8ff, #e0f2fe);
            min-height: 100vh;
        }
        .question-container {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .question-label {
            font-size: 1.125rem;
            color: #334155; /* slate-700 */
        }
        .answer-input {
            border-width: 2px;
            border-color: #cbd5e0;
            transition: all 0.3s ease-in-out;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            width: 90px;
            text-align: center;
            background-color: #f8fafc;
            box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.05);
        }
        .answer-input:focus {
            outline: none;
            border-color: #6366f1; /* indigo-500 */
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        .correct {
            border-color: #22c55e; /* green-500 */
            background-color: #f0fdf4; /* green-50 */
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.4);
        }
        .incorrect {
            border-color: #ef4444; /* red-500 */
            background-color: #fef2f2; /* red-50 */
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.4);
        }
        .radio-label-correct { color: #16a34a; font-weight: 700; }
        .radio-label-incorrect { color: #dc2626; font-weight: 700; }

        .question-box {
            border: 1px solid #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.75rem;
            background-color: rgba(255, 255, 255, 0.8);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: transform 0.2s;
        }
        .question-box:hover {
            transform: translateY(-2px);
        }
        .sidebar-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            font-weight: 500;
            color: #475569; /* slate-600 */
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        .sidebar-btn:hover { 
            background-color: #eef2ff; /* indigo-50 */
            color: #4338ca; /* indigo-700 */
        }
        .sidebar-btn.active {
            background-color: #6366f1; /* indigo-500 */
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.3);
        }
        .part { display: none; }
        .part.active { display: block; }
        .glass-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Success Animation Styles */
        .success-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            z-index: 1000;
            padding: 2rem 4rem;
            background-color: #ffffff;
            color: #6366f1;
            font-size: 3rem;
            font-weight: bold;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease-in-out;
        }

        .success-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            animation: popAndFade 2.5s ease-in-out forwards;
        }
        
        @keyframes popAndFade {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            40% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="w-full max-w-7xl mx-auto flex gap-8 p-4 md:p-8">
        <!-- Sidebar -->
        <aside class="w-1/4 lg:w-1/5 glass-card p-4 rounded-2xl shadow-lg self-start sticky top-8">
            <h2 class="text-xl font-bold mb-4 text-slate-800">單元列表</h2>
            <nav id="sidebar-nav" class="space-y-2">
                <button class="sidebar-btn active" onclick="showPart(1)">一、正負數的乘法</button>
                <button class="sidebar-btn" onclick="showPart(2)">二、乘法交換律</button>
                <button class="sidebar-btn" onclick="showPart(3)">三、整數的除法</button>
                <button class="sidebar-btn" onclick="showPart(4)">四、整數的四則運算</button>
                <button class="sidebar-btn" onclick="showPart(5)">五、含括號四則運算</button>
                <button class="sidebar-btn" onclick="showPart(6)">六、含絕對值四則運算</button>
                <button class="sidebar-btn" onclick="showPart(7)">七、分配律</button>
                <button class="sidebar-btn" onclick="showPart(8)">八、分配律的應用</button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="w-3/4 lg:w-4/5">
            <div class="glass-card p-8 rounded-2xl shadow-lg">
                <h1 class="text-3xl font-bold text-center mb-8 text-slate-800 tracking-wide">1-3正負數的乘除數位學習單</h1>

                <div id="part1" class="part active">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">一、正負數的乘法</h2>
                    <div class="space-y-4">
                        <div class="question-container"><label class="question-label">1. (−8) × 4 =</label><input type="number" id="q1-1" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">2. (−13) × 7 =</label><input type="number" id="q1-2" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">3. (−18) × 5 =</label><input type="number" id="q1-3" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">4. (−25) × 15 =</label><input type="number" id="q1-4" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">5. 4 × (−25) =</label><input type="number" id="q1-5" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">6. 7 × (−13) =</label><input type="number" id="q1-6" class="answer-input"></div>
                    </div>
                </div>

                <div id="part2" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">二、乘法交換律、結合律的應用</h2>
                    <div class="space-y-4">
                        <div class="question-container"><label class="question-label">1. 25 × (−63) × (−4) × 2 =</label><input type="number" id="q2-1" class="answer-input w-32"></div>
                        <div class="question-container"><label class="question-label">2. 45 × 125 × (−8) × 6 =</label><input type="number" id="q2-2" class="answer-input w-32"></div>
                    </div>
                </div>

                <div id="part3" class="part">
                     <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">三、整數的除法運算</h2>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="question-box"><p class="question-label mb-4">1. (−45) ÷ 3 = ?</p><div class="space-y-2" id="q3-1-options"><div class="flex items-center"><input type="radio" name="q3-1" value="15"><label class="ml-3 text-lg">15</label></div><div class="flex items-center"><input type="radio" name="q3-1" value="-15"><label class="ml-3 text-lg">-15</label></div></div></div>
                        <div class="question-box"><p class="question-label mb-4">2. (−92) ÷ 4 = ?</p><div class="space-y-2" id="q3-2-options"><div class="flex items-center"><input type="radio" name="q3-2" value="23"><label class="ml-3 text-lg">23</label></div><div class="flex items-center"><input type="radio" name="q3-2" value="-23"><label class="ml-3 text-lg">-23</label></div></div></div>
                        <div class="question-box"><div class="question-container"><label>3. (−432) ÷ 12 =</label><input type="number" id="q3-3" class="answer-input"></div></div>
                        <div class="question-box"><div class="question-container"><label>4. 540 ÷ (−15) =</label><input type="number" id="q3-4" class="answer-input"></div></div>
                    </div>
                </div>
                
                <div id="part4" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">四、整數的四則運算</h2>
                    <div class="space-y-6">
                        <div class="question-box">
                            <p class="question-label mb-2">1. (−5)×12 − 6×18</p>
                            <div class="question-container">= <input type="number" id="q4-1-1" class="answer-input"> − <input type="number" id="q4-1-2" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q4-1-3" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">2. (−38)+(−7)×8+(−9)×7</p>
                            <div class="question-container">= <input type="number" id="q4-2-1" class="answer-input"> + <input type="number" id="q4-2-2" class="answer-input"> + <input type="number" id="q4-2-3" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q4-2-4" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                             <p class="question-label mb-2">3. (−39)÷3×(−4)+6×(−23)</p>
                             <div class="question-container">= <input type="number" id="q4-3-1" class="answer-input"> + <input type="number" id="q4-3-2" class="answer-input"></div>
                             <div class="question-container">= <input type="number" id="q4-3-3" class="answer-input"></div>
                        </div>
                    </div>
                </div>

                <div id="part5" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">五、含括號的整數四則運算</h2>
                     <div class="space-y-6">
                        <div class="question-box">
                            <p class="question-label mb-2">1. 34−(5−12÷3)</p>
                            <div class="question-container">= 34 − (5 − <input type="number" id="q5-1-1" class="answer-input">)</div>
                            <div class="question-container">= 34 − <input type="number" id="q5-1-2" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q5-1-3" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">2. [(−4)−25]−16</p>
                            <div class="question-container">= <input type="number" id="q5-2-1" class="answer-input"> − 16</div>
                            <div class="question-container">= <input type="number" id="q5-2-2" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">3. 1+(2−3)</p>
                             <div class="question-container">= <input type="number" id="q5-3-1" class="answer-input"></div>
                        </div>
                    </div>
                </div>

                <div id="part6" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">六、含絕對值的整數四則運算</h2>
                    <div class="space-y-6">
                        <div class="question-box">
                            <p class="question-label mb-2">1. |(−6)×(4−14)| − |9×(7−10)|</p>
                            <div class="question-container">= |(−6)×<input type="number" id="q6-1-1" class="answer-input">| − |9×<input type="number" id="q6-1-2" class="answer-input">|</div>
                            <div class="question-container">= <input type="number" id="q6-1-3" class="answer-input"> − <input type="number" id="q6-1-4" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q6-1-5" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">2. (−2)×3 − |4+(−7)|</p>
                            <div class="question-container">= <input type="number" id="q6-2-1" class="answer-input"> − |<input type="number" id="q6-2-2" class="answer-input">|</div>
                            <div class="question-container">= <input type="number" id="q6-2-3" class="answer-input"> − <input type="number" id="q6-2-4" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q6-2-5" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                             <p class="question-label mb-2">3. |(−8)+3| − |3−(−5)|</p>
                             <div class="question-container">= |<input type="number" id="q6-3-1" class="answer-input">| − |<input type="number" id="q6-3-2" class="answer-input">|</div>
                             <div class="question-container">= <input type="number" id="q6-3-3" class="answer-input"> − <input type="number" id="q6-3-4" class="answer-input"></div>
                             <div class="question-container">= <input type="number" id="q6-3-5" class="answer-input"></div>
                        </div>
                         <div class="question-box">
                            <p class="question-label mb-2">4. |8×(−14)| + (−4)×36</p>
                            <div class="question-container">= <input type="number" id="q6-4-1" class="answer-input"> + <input type="number" id="q6-4-2" class="answer-input"></div>
                            <div class="question-container">= <input type="number" id="q6-4-3" class="answer-input"></div>
                        </div>
                    </div>
                </div>

                <div id="part7" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">七、乘法對加(減)法的分配律</h2>
                    <div class="space-y-6">
                        <div class="question-box">
                            <p class="question-label mb-2">1. 54×(−12)+46×(−12)</p>
                            <div class="question-container">= (<input type="number" id="q7-1-1" class="answer-input">) × (−12)</div>
                            <div class="question-container">= <input type="number" id="q7-1-2" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">2. 273×(−531)+727×(−531)</p>
                            <div class="question-container">= (<input type="number" id="q7-2-1" class="answer-input">) × (−531)</div>
                            <div class="question-container">= <input type="number" id="q7-2-2" class="answer-input"></div>
                        </div>
                        <div class="question-box">
                            <p class="question-label mb-2">3. 123×25−377×25</p>
                            <div class="question-container">= (<input type="number" id="q7-3-1" class="answer-input">) × 25</div>
                            <div class="question-container">= <input type="number" id="q7-3-2" class="answer-input"></div>
                        </div>
                    </div>
                </div>

                <div id="part8" class="part">
                    <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-slate-300">八、乘法對加(減)法分配律的應用</h2>
                    <div class="space-y-4">
                        <div class="question-container"><label class="question-label">1. 995×(−35) =</label><input type="number" id="q8-1" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">2. (−299)×301 =</label><input type="number" id="q8-2" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">3. 2001×(−225) =</label><input type="number" id="q8-3" class="answer-input"></div>
                        <div class="question-container"><label class="question-label">4. (−23)×599 =</label><input type="number" id="q8-4" class="answer-input"></div>
                    </div>
                </div>
            </div>
             <!-- Success Animation Element -->
            <div id="success-animation" class="success-popup">你好棒！🎉</div>
        </main>
    </div>

    <script>
        // --- Sidebar Navigation ---
        const navButtons = document.querySelectorAll('#sidebar-nav .sidebar-btn');
        const parts = document.querySelectorAll('.part');

        function showPart(partNumber) {
            navButtons.forEach((btn, index) => {
                btn.classList.toggle('active', index + 1 === partNumber);
            });
            parts.forEach((part, index) => {
                part.classList.toggle('active', index + 1 === partNumber);
            });
        }
        
        // --- Live Input Validation ---
        const allAnswers = {
            'q1-1': -32, 'q1-2': -91, 'q1-3': -90, 'q1-4': -375, 'q1-5': -100, 'q1-6': -91,
            'q2-1': 12600, 'q2-2': -270000,
            'q3-3': -36, 'q3-4': -36,
            'q4-1-1': -60, 'q4-1-2': 108, 'q4-1-3': -168,
            'q4-2-1': -38, 'q4-2-2': -56, 'q4-2-3': -63, 'q4-2-4': -157,
            'q4-3-1': 52, 'q4-3-2': -138, 'q4-3-3': -86,
            'q5-1-1': 4, 'q5-1-2': 1, 'q5-1-3': 33,
            'q5-2-1': -29, 'q5-2-2': -45,
            'q5-3-1': 0,
            'q6-1-1': -10, 'q6-1-2': -3, 'q6-1-3': 60, 'q6-1-4': 27, 'q6-1-5': 33,
            'q6-2-1': -6, 'q6-2-2': -3, 'q6-2-3': -6, 'q6-2-4': 3, 'q6-2-5': -9,
            'q6-3-1': -5, 'q6-3-2': 8, 'q6-3-3': 5, 'q6-3-4': 8, 'q6-3-5': -3,
            'q6-4-1': 112, 'q6-4-2': -144, 'q6-4-3': -32,
            'q7-1-1': 100, 'q7-1-2': -1200,
            'q7-2-1': 1000, 'q7-2-2': -531000,
            'q7-3-1': -254, 'q7-3-2': -6350,
            'q8-1': -34825, 'q8-2': -89999, 'q8-3': -450225, 'q8-4': -13777
        };

        function validateInput(event) {
            const inputElement = event.target;
            const inputId = inputElement.id;
            
            if (allAnswers.hasOwnProperty(inputId)) {
                const correctAnswer = allAnswers[inputId];
                const userAnswer = parseInt(inputElement.value, 10);
                
                inputElement.classList.remove('correct', 'incorrect');

                if (inputElement.value === '') {
                    return; 
                }

                if (userAnswer === correctAnswer) {
                    inputElement.classList.add('correct');
                    const currentPart = inputElement.closest('.part');
                    if(currentPart) checkPartCompletion(currentPart);
                } else {
                    inputElement.classList.add('incorrect');
                }
            }
        }
        
        const numberInputs = document.querySelectorAll('input[type="number"]');
        numberInputs.forEach(input => {
            input.addEventListener('input', validateInput);
        });

        const radioInputs = document.querySelectorAll('input[type="radio"]');
        
        function checkRadio(event) {
             const answers = { 'q3-1': -15, 'q3-2': -23 };
             const qName = event.target.name;
             const labels = document.querySelectorAll(`[name="${qName}"] + label`);
             labels.forEach(l => l.classList.remove('radio-label-correct', 'radio-label-incorrect'));

             if(answers.hasOwnProperty(qName)) {
                const selected = document.querySelector(`input[name="${qName}"]:checked`);
                if (selected) {
                    const selectedLabel = selected.nextElementSibling;
                    if (parseInt(selected.value) === answers[qName]) {
                        selectedLabel.classList.add('radio-label-correct');
                    } else {
                        selectedLabel.classList.add('radio-label-incorrect');
                    }
                    const currentPart = selected.closest('.part');
                    if(currentPart) checkPartCompletion(currentPart);
                }
             }
        }

        radioInputs.forEach(input => {
            input.addEventListener('change', checkRadio)
        });

        function triggerSuccessAnimation() {
            const animationEl = document.getElementById('success-animation');
            animationEl.classList.add('show');
            setTimeout(() => {
                animationEl.classList.remove('show');
            }, 2500); // Animation duration
        }

        function checkPartCompletion(partElement) {
            const numberInputs = partElement.querySelectorAll('input[type="number"]');
            for (const input of numberInputs) {
                if (!input.classList.contains('correct')) {
                    return; 
                }
            }

            const radioGroups = {};
            partElement.querySelectorAll('input[type="radio"]').forEach(radio => {
                radioGroups[radio.name] = true;
            });

            for (const groupName in radioGroups) {
                const correctSelection = partElement.querySelector(`input[name="${groupName}"]:checked + label.radio-label-correct`);
                if (!correctSelection) {
                    return; 
                }
            }
            
            triggerSuccessAnimation();
        }
    </script>
</body>
</html>

