<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動學習單：有理化分母 (14題完整版)</title>
    <link rel="icon" href="dog.png" type="image/png">
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 KaTeX 數學公式 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" xintegrity="sha384-nB0mCrOMXqGshaCNdrA1YFsuVLRodGohlrmREQN/sRCJMFinN+EL1FNTL9PKSJ63" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" xintegrity="sha384-7/YYLCCoTddN+BTiLuK+qGfS6rXl1Pii1FkL4S/pRFH5LPC2S8rwdvF/dLT9VlqH" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" xintegrity="sha384-43gviWU0YVjaDtb/Gf1ESgOG+IPtSEAU+NwG5hSXT4ZabKmnreqN1Q+EAU0VLl6/+" crossorigin="anonymous"></script>
    
    <!-- 引入 Chiron GoRound TC 字型 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: "Chiron GoRound TC", sans-serif;
            font-weight: 400;
            font-style: normal;
            background-color: #f8fafc;
        }
        
        .highlight {
            background: linear-gradient(to top, #fef08a 50%, transparent 50%);
            padding: 0 0.2rem;
            border-radius: 3px;
        }

        .step-container {
            background-color: white;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
            padding: 1.5rem;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            /* 加上動畫，讓步驟出現更流暢 */
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 隱藏的步驟 */
        .step-hidden {
            display: none;
        }
        
        /* 導覽列按鈕 */
        .nav-btn {
            padding: 0.5rem 1rem;
            font-weight: 600;
            border-radius: 0.5rem;
            background-color: #e2e8f0;
            color: #475569;
            transition: all 0.2s;
            cursor: pointer;
        }
        .nav-btn:hover {
            background-color: #cbd5e1;
        }
        /* 導覽列啟用中按鈕 */
        .nav-btn-active {
            background-color: #3b82f6;
            color: white;
        }
        .nav-btn-active:hover {
            background-color: #2563eb;
        }

        /* 下一步按鈕 */
        .next-btn {
            background-color: #3b82f6; /* 藍色 */
            color: white;
            font-weight: 600;
            padding: 0.6rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
            border: none;
            cursor: pointer;
        }
        .next-btn:hover {
            background-color: #2563eb;
        }
        .next-btn:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        /* 最終按鈕 */
        .finish-btn {
             background-color: #10b981; /* 綠色 */
        }
        .finish-btn:hover {
             background-color: #059669;
        }
        
        .katex-display-area {
            font-size: 2.25rem; 
            color: #1e293b;
            padding: 1.5rem;
            background-color: #f1f5f9;
            border-radius: 0.5rem;
            text-align: center;
            margin-bottom: 1rem;
            overflow-x: auto;
        }
        
        .step-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }
        
        .step-progress {
            font-size: 0.9rem;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 1rem;
        }
        
        .step-instruction {
            color: #334155;
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }
        
        .solution-text {
            font-size: 1.5rem;
            color: #1e293b;
            text-align: center;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body class="min-h-screen pb-24">

    <div class="max-w-3xl mx-auto p-4 md:p-8">
        
        <!-- 導覽列 -->
        <nav class="flex justify-center flex-wrap gap-2 mb-8" id="nav-container">
            <button class="nav-btn" data-question-index="0">第 1 題</button>
            <button class="nav-btn" data-question-index="1">第 2 題</button>
            <button class="nav-btn" data-question-index="2">第 3 題</button>
            <button class="nav-btn" data-question-index="3">第 4 題</button>
            <button class="nav-btn" data-question-index="4">第 5 題</button>
            <button class="nav-btn" data-question-index="5">第 6 題</button>
            <button class="nav-btn" data-question-index="6">第 7 題</button>
            <button class="nav-btn" data-question-index="7">第 8 題</button>
            <button class="nav-btn" data-question-index="8">第 9 題</button>
            <button class="nav-btn" data-question-index="9">第 10 題</button>
            <button class="nav-btn" data-question-index="10">第 11 題</button>
            <button class="nav-btn" data-question-index="11">第 12 題</button>
            <button class="nav-btn" data-question-index="12">第 13 題</button>
            <button class="nav-btn" data-question-index="13">第 14 題</button>
        </nav>

        <header class="text-center my-8">
            <h1 class="text-4xl font-bold text-slate-800">五、有理化分母</h1>
            <p class="text-lg text-slate-500 mt-2">將下列各示化為最簡根式</p>
        </header>

        <!-- 題目顯示區 (動態載入) -->
        <div class="katex-display-area" id="problem-area">
            <!-- JS will fill this -->
        </div>

        <!-- 逐步解題容器 (動態載入) -->
        <div class="space-y-6" id="steps-container">
            <!-- JS will fill this -->
        </div>
            
        <!-- 完成訊息 -->
        <div id="completion-message" class="text-center mt-8 p-6 bg-green-100 border-2 border-green-400 rounded-lg step-hidden">
            <h2 class="text-3xl font-bold text-green-700">恭喜你，完成練習！</h2>
            <p class="mt-2 text-green-600 text-lg">你已經學會這題「有理化分母」的技巧了！</p>
            <button id="reset-btn" class="mt-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">
                再看一次
            </button>
        </div>

    </div> <!-- end max-w-3xl -->

    <!-- 頁尾 -->
    <footer class="fixed bottom-0 left-0 w-full text-center text-gray-400 text-sm bg-white bg-opacity-80 py-2 border-t border-gray-200 backdrop-blur-sm">
      © 2025 特教米克師｜採用 
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW" target="_blank" class="text-sky-600 hover:underline">
        CC BY-NC-SA 4.0 創用CC授權
      </a>｜非商業用途歡迎轉載或改編，請保留署名並附上原始連結。
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 題目資料庫 ---
            const questions = [
                { // 第 1 題
                    problemKatex: "$$\\frac{2}{\\sqrt{3}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{3}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{3}$</span>。",
                            katexDisplay: "$$\\frac{2}{\\sqrt{3}} = \\frac{2 \\times \\sqrt{3}}{\\sqrt{3} \\times \\sqrt{3}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$2 \\times \\sqrt{3} = 2\\sqrt{3}$",
                            solutionDen: "$\\sqrt{3} \\times \\sqrt{3} = 3$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{2\\sqrt{3}}{3}$$",
                        }
                    ]
                },
                { // 第 2 題
                    problemKatex: "$$\\frac{9}{\\sqrt{11}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{11}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{11}$</span>。",
                            katexDisplay: "$$\\frac{9}{\\sqrt{11}} = \\frac{9 \\times \\sqrt{11}}{\\sqrt{11} \\times \\sqrt{11}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$9 \\times \\sqrt{11} = 9\\sqrt{11}$",
                            solutionDen: "$\\sqrt{11} \\times \\sqrt{11} = 11$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{9\\sqrt{11}}{11}$$",
                        }
                    ]
                },
                { // 第 3 題
                    problemKatex: "$$\\frac{5}{\\sqrt{20}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{20}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{20}$</span>。",
                            katexDisplay: "$$\\frac{5}{\\sqrt{20}} = \\frac{5 \\times \\sqrt{20}}{\\sqrt{20} \\times \\sqrt{20}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：<br>（小提示：$\\sqrt{20} = \\sqrt{4 \\times 5} = 2\\sqrt{5}$）",
                            solutionNum: "$5 \\times \\sqrt{20} = 5 \\times 2\\sqrt{5} = 10\\sqrt{5}$",
                            solutionDen: "$\\sqrt{20} \\times \\sqrt{20} = 20$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "我們先把算出來的新分子和新分母組合起來：",
                            katexDisplay: "$$\\frac{10\\sqrt{5}}{20}$$",
                        },
                        {
                            title: "步驟四：約分",
                            instruction: "最後，我們發現分子 $10$ 和分母 $20$ <span class='highlight'>可以同除以 $10$ 來約分</span>：",
                            katexDisplay: "$$\\frac{10\\sqrt{5}}{20} = \\frac{1\\sqrt{5}}{2} = \\frac{\\sqrt{5}}{2}$$",
                        }
                    ]
                },
                { // 第 4 題
                    problemKatex: "$$\\frac{4}{\\sqrt{6}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{6}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{6}$</span>。",
                            katexDisplay: "$$\\frac{4}{\\sqrt{6}} = \\frac{4 \\times \\sqrt{6}}{\\sqrt{6} \\times \\sqrt{6}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$4 \\times \\sqrt{6} = 4\\sqrt{6}$",
                            solutionDen: "$\\sqrt{6} \\times \\sqrt{6} = 6$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "我們先把算出來的新分子和新分母組合起來：",
                            katexDisplay: "$$\\frac{4\\sqrt{6}}{6}$$",
                        },
                        {
                            title: "步驟四：約分",
                            instruction: "最後，我們發現分子 $4$ 和分母 $6$ <span class='highlight'>可以同除以 $2$ 來約分</span>：",
                            katexDisplay: "$$\\frac{4\\sqrt{6}}{6} = \\frac{2\\sqrt{6}}{3}$$",
                        }
                    ]
                },
                { // 第 5 題
                    problemKatex: "$$\\frac{5}{\\sqrt{10}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{10}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{10}$</span>。",
                            katexDisplay: "$$\\frac{5}{\\sqrt{10}} = \\frac{5 \\times \\sqrt{10}}{\\sqrt{10} \\times \\sqrt{10}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$5 \\times \\sqrt{10} = 5\\sqrt{10}$",
                            solutionDen: "$\\sqrt{10} \\times \\sqrt{10} = 10$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "我們先把算出來的新分子和新分母組合起來：",
                            katexDisplay: "$$\\frac{5\\sqrt{10}}{10}$$",
                        },
                        {
                            title: "步驟四：約分",
                            instruction: "最後，我們發現分子 $5$ 和分母 $10$ <span class='highlight'>可以同除以 $5$ 來約分</span>：",
                            katexDisplay: "$$\\frac{5\\sqrt{10}}{10} = \\frac{1\\sqrt{10}}{2} = \\frac{\\sqrt{10}}{2}$$",
                        }
                    ]
                },
                { // 第 6 題
                    problemKatex: "$$\\frac{4\\sqrt{3}}{\\sqrt{13}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{13}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{13}$</span>。",
                            katexDisplay: "$$\\frac{4\\sqrt{3}}{\\sqrt{13}} = \\frac{4\\sqrt{3} \\times \\sqrt{13}}{\\sqrt{13} \\times \\sqrt{13}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$4\\sqrt{3} \\times \\sqrt{13} = 4\\sqrt{3 \\times 13} = 4\\sqrt{39}$",
                            solutionDen: "$\\sqrt{13} \\times \\sqrt{13} = 13$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案（此題不需約分）：",
                            katexDisplay: "$$\\frac{4\\sqrt{39}}{13}$$",
                        }
                    ]
                },
                { // 第 7 題
                    problemKatex: "$$\\frac{2\\sqrt{7}}{\\sqrt{11}}$$",
                    steps: [
                        {
                            title: "步驟一：找出目標",
                            instruction: "我們的目標是讓<span class='highlight'>分母的 $\\sqrt{11}$ 消失</span>。<br>為了讓分數的值不變，分子和分母要<span class='highlight'>同時乘以 $\\sqrt{11}$</span>。",
                            katexDisplay: "$$\\frac{2\\sqrt{7}}{\\sqrt{11}} = \\frac{2\\sqrt{7} \\times \\sqrt{11}}{\\sqrt{11} \\times \\sqrt{11}}$$",
                        },
                        {
                            title: "步驟二：計算新分子與分母",
                            instruction: "接著，我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$2\\sqrt{7} \\times \\sqrt{11} = 2\\sqrt{7 \\times 11} = 2\\sqrt{77}$",
                            solutionDen: "$\\sqrt{11} \\times \\sqrt{11} = 11$",
                        },
                        {
                            title: "步驟三：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案（此題不需約分）：",
                            katexDisplay: "$$\\frac{2\\sqrt{77}}{11}$$",
                        }
                    ]
                },
                { // 第 8 題
                    problemKatex: "$$\\sqrt{\\frac{1}{2}}$$",
                    steps: [
                        {
                            title: "步驟一：拆開根號",
                            instruction: "首先，我們利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開，並化簡分子：",
                            katexDisplay: "$$\\sqrt{\\frac{1}{2}} = \\frac{\\sqrt{1}}{\\sqrt{2}} = \\frac{1}{\\sqrt{2}}$$",
                        },
                        {
                            title: "步驟二：找出目標",
                            instruction: "接著，我們的目標是讓<span class='highlight'>分母的 $\\sqrt{2}$ 消失</span>。<br>分子和分母要<span class='highlight'>同時乘以 $\\sqrt{2}$</span>。",
                            katexDisplay: "$$\\frac{1}{\\sqrt{2}} = \\frac{1 \\times \\sqrt{2}}{\\sqrt{2} \\times \\sqrt{2}}$$",
                        },
                        {
                            title: "步驟三：計算新分子與分母",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$1 \\times \\sqrt{2} = \\sqrt{2}$",
                            solutionDen: "$\\sqrt{2} \\times \\sqrt{2} = 2$",
                        },
                        {
                            title: "步驟四：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{\\sqrt{2}}{2}$$",
                        }
                    ]
                },
                { // 第 9 題
                    problemKatex: "$$\\sqrt{\\frac{5}{12}}$$",
                    steps: [
                        {
                            title: "步驟一：拆開根號",
                            instruction: "首先，我們利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{5}{12}} = \\frac{\\sqrt{5}}{\\sqrt{12}}$$",
                        },
                        {
                            title: "步驟二：找出目標",
                            instruction: "接著，我們的目標是讓<span class='highlight'>分母的 $\\sqrt{12}$ 消失</span>。<br>分子和分母要<span class='highlight'>同時乘以 $\\sqrt{12}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{5}}{\\sqrt{12}} = \\frac{\\sqrt{5} \\times \\sqrt{12}}{\\sqrt{12} \\times \\sqrt{12}}$$",
                        },
                        {
                            title: "步驟三：計算新分子與分母",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：<br>（小提示：$\\sqrt{60} = \\sqrt{4 \\times 15} = 2\\sqrt{15}$）",
                            solutionNum: "$\\sqrt{5} \\times \\sqrt{12} = \\sqrt{60} = 2\\sqrt{15}$",
                            solutionDen: "$\\sqrt{12} \\times \\sqrt{12} = 12$",
                        },
                        {
                            title: "步驟四：組合答案",
                            instruction: "我們先把算出來的新分子和新分母組合起來：",
                            katexDisplay: "$$\\frac{2\\sqrt{15}}{12}$$",
                        },
                        {
                            title: "步驟五：約分",
                            instruction: "最後，我們發現分子 $2$ 和分母 $12$ <span class='highlight'>可以同除以 $2$ 來約分</span>：",
                            katexDisplay: "$$\\frac{2\\sqrt{15}}{12} = \\frac{1\\sqrt{15}}{6} = \\frac{\\sqrt{15}}{6}$$",
                        }
                    ]
                },
                { // 第 10 題
                    problemKatex: "$$\\sqrt{\\frac{7}{6}}$$",
                    steps: [
                        {
                            title: "步驟一：拆開根號",
                            instruction: "首先，我們利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{7}{6}} = \\frac{\\sqrt{7}}{\\sqrt{6}}$$",
                        },
                        {
                            title: "步驟二：找出目標",
                            instruction: "接著，我們的目標是讓<span class='highlight'>分母的 $\\sqrt{6}$ 消失</span>。<br>分子和分母要<span class='highlight'>同時乘以 $\\sqrt{6}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{7}}{\\sqrt{6}} = \\frac{\\sqrt{7} \\times \\sqrt{6}}{\\sqrt{6} \\times \\sqrt{6}}$$",
                        },
                        {
                            title: "步驟三：計算新分子與分母",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$\\sqrt{7} \\times \\sqrt{6} = \\sqrt{42}$",
                            solutionDen: "$\\sqrt{6} \\times \\sqrt{6} = 6$",
                        },
                        {
                            title: "步驟四：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案（此題不需約分）：",
                            katexDisplay: "$$\\frac{\\sqrt{42}}{6}$$",
                        }
                    ]
                },
                { // 第 11 題
                    problemKatex: "$$\\sqrt{\\frac{7}{3}}$$",
                    steps: [
                        {
                            title: "步驟一：拆開根號",
                            instruction: "首先，我們利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{7}{3}} = \\frac{\\sqrt{7}}{\\sqrt{3}}$$",
                        },
                        {
                            title: "步驟二：找出目標",
                            instruction: "接著，我們的目標是讓<span class='highlight'>分母的 $\\sqrt{3}$ 消失</span>。<br>分子和分母要<span class='highlight'>同時乘以 $\\sqrt{3}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{7}}{\\sqrt{3}} = \\frac{\\sqrt{7} \\times \\sqrt{3}}{\\sqrt{3} \\times \\sqrt{3}}$$",
                        },
                        {
                            title: "步驟三：計算新分子與分母",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$\\sqrt{7} \\times \\sqrt{3} = \\sqrt{21}$",
                            solutionDen: "$\\sqrt{3} \\times \\sqrt{3} = 3$",
                        },
                        {
                            title: "步驟四：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案（此題不需約分）：",
                            katexDisplay: "$$\\frac{\\sqrt{21}}{3}$$",
                        }
                    ]
                },
                { // 第 12 題
                    problemKatex: "$$\\sqrt{0.4}$$",
                    steps: [
                        {
                            title: "步驟一：小數化分數",
                            instruction: "首先，我們將小數 $0.4$ 轉換為分數：",
                            katexDisplay: "$$\\sqrt{0.4} = \\sqrt{\\frac{4}{10}}$$",
                        },
                        {
                            title: "步驟二：約分",
                            instruction: "接著，我們先將根號內的 $\\frac{4}{10}$ <span class='highlight'>約分成 $\\frac{2}{5}$</span>：",
                            katexDisplay: "$$\\sqrt{\\frac{4}{10}} = \\sqrt{\\frac{2}{5}}$$",
                        },
                        {
                            title: "步驟三：拆開根號",
                            instruction: "利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{2}{5}} = \\frac{\\sqrt{2}}{\\sqrt{5}}$$",
                        },
                        {
                            title: "步驟四：有理化",
                            instruction: "為了讓<span class='highlight'>分母的 $\\sqrt{5}$ 消失</span>，分子和分母<span class='highlight'>同時乘以 $\\sqrt{5}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{2}}{\\sqrt{5}} = \\frac{\\sqrt{2} \\times \\sqrt{5}}{\\sqrt{5} \\times \\sqrt{5}}$$",
                        },
                        {
                            title: "步驟五：計算",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$\\sqrt{2} \\times \\sqrt{5} = \\sqrt{10}$",
                            solutionDen: "$\\sqrt{5} \\times \\sqrt{5} = 5$",
                        },
                        {
                            title: "步驟六：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{\\sqrt{10}}{5}$$",
                        }
                    ]
                },
                { // 第 13 題
                    problemKatex: "$$\\sqrt{1.6}$$",
                    steps: [
                        {
                            title: "步驟一：小數化分數",
                            instruction: "首先，我們將小數 $1.6$ 轉換為分數：",
                            katexDisplay: "$$\\sqrt{1.6} = \\sqrt{\\frac{16}{10}}$$",
                        },
                        {
                            title: "步驟二：約分",
                            instruction: "接著，我們先將根號內的 $\\frac{16}{10}$ <span class='highlight'>約分成 $\\frac{8}{5}$</span>：",
                            katexDisplay: "$$\\sqrt{\\frac{16}{10}} = \\sqrt{\\frac{8}{5}}$$",
                        },
                        {
                            title: "步驟三：拆開根號",
                            instruction: "利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{8}{5}} = \\frac{\\sqrt{8}}{\\sqrt{5}}$$",
                        },
                        {
                            title: "步驟四：有理化",
                            instruction: "為了讓<span class='highlight'>分母的 $\\sqrt{5}$ 消失</span>，分子和分母<span class='highlight'>同時乘以 $\\sqrt{5}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{8}}{\\sqrt{5}} = \\frac{\\sqrt{8} \\times \\sqrt{5}}{\\sqrt{5} \\times \\sqrt{5}}$$",
                        },
                        {
                            title: "步驟五：計算",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：<br>（小提示：$\\sqrt{40} = \\sqrt{4 \\times 10} = 2\\sqrt{10}$）",
                            solutionNum: "$\\sqrt{8} \\times \\sqrt{5} = \\sqrt{40} = 2\\sqrt{10}$",
                            solutionDen: "$\\sqrt{5} \\times \\sqrt{5} = 5$",
                        },
                        {
                            title: "步驟六：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{2\\sqrt{10}}{5}$$",
                        }
                    ]
                },
                { // 第 14 題
                    problemKatex: "$$\\sqrt{2.5}$$",
                    steps: [
                        {
                            title: "步驟一：小數化分數",
                            instruction: "首先，我們將小數 $2.5$ 轉換為分數：",
                            katexDisplay: "$$\\sqrt{2.5} = \\sqrt{\\frac{25}{10}}$$",
                        },
                        {
                            title: "步驟二：約分",
                            instruction: "接著，我們先將根號內的 $\\frac{25}{10}$ <span class='highlight'>約分成 $\\frac{5}{2}$</span>：",
                            katexDisplay: "$$\\sqrt{\\frac{25}{10}} = \\sqrt{\\frac{5}{2}}$$",
                        },
                        {
                            title: "步驟三：拆開根號",
                            instruction: "利用 $\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt{a}}{\\sqrt{b}}$ 將根號拆開：",
                            katexDisplay: "$$\\sqrt{\\frac{5}{2}} = \\frac{\\sqrt{5}}{\\sqrt{2}}$$",
                        },
                        {
                            title: "步驟四：有理化",
                            instruction: "為了讓<span class='highlight'>分母的 $\\sqrt{2}$ 消失</span>，分子和分母<span class='highlight'>同時乘以 $\\sqrt{2}$</span>。",
                            katexDisplay: "$$\\frac{\\sqrt{5}}{\\sqrt{2}} = \\frac{\\sqrt{5} \\times \\sqrt{2}}{\\sqrt{2} \\times \\sqrt{2}}$$",
                        },
                        {
                            title: "步驟五：計算",
                            instruction: "我們<span class='highlight'>分別計算</span>新的分子與分母：",
                            solutionNum: "$\\sqrt{5} \\times \\sqrt{2} = \\sqrt{10}$",
                            solutionDen: "$\\sqrt{2} \\times \\sqrt{2} = 2$",
                        },
                        {
                            title: "步驟六：組合答案",
                            instruction: "最後，我們把算出來的新分子和新分母組合起來，得到答案：",
                            katexDisplay: "$$\\frac{\\sqrt{10}}{2}$$",
                        }
                    ]
                }
            ];

            // --- 獲取元素 ---
            const navContainer = document.getElementById('nav-container');
            const problemArea = document.getElementById('problem-area');
            const stepsContainer = document.getElementById('steps-container');
            const completionMessage = document.getElementById('completion-message');
            const resetBtn = document.getElementById('reset-btn');
            const navButtons = document.querySelectorAll('.nav-btn');

            let currentQuestionIndex = 0;
            let currentStepIndex = 0;

            // --- 函數 ---

            function renderAllKatex() {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\(', right: '\\)', display: false},
                        {left: '\\[', right: '\\]', display: true}
                    ],
                    throwOnError: false
                });
            }
            
            // 載入指定題目
            function loadQuestion(questionIndex) {
                currentQuestionIndex = questionIndex;
                currentStepIndex = 0;

                // 更新導覽列按鈕樣式
                navButtons.forEach((btn, index) => {
                    if (index === questionIndex) {
                        btn.classList.add('nav-btn-active');
                    } else {
                        btn.classList.remove('nav-btn-active');
                    }
                });

                // 載入題目
                const question = questions[currentQuestionIndex];
                problemArea.innerHTML = question.problemKatex;

                // 清空舊步驟並隱藏完成訊息
                stepsContainer.innerHTML = '';
                completionMessage.classList.add('step-hidden');

                // 載入第一個步驟
                loadStep(0);
                
                // 重新渲染 KaTeX
                renderAllKatex();
            }

            // 載入指定步驟
            function loadStep(stepIndex) {
                currentStepIndex = stepIndex;
                const question = questions[currentQuestionIndex];
                const step = question.steps[stepIndex];

                // 如果沒有下一個步驟，顯示完成訊息
                if (!step) {
                    completionMessage.classList.remove('step-hidden');
                    completionMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }

                const totalSteps = question.steps.length;
                const isLastStep = stepIndex === totalSteps - 1;
                const btnText = isLastStep ? "完成！" : "下一步";
                const btnClass = isLastStep ? "next-btn finish-btn" : "next-btn";
                const nextBtnId = `next-btn-${stepIndex}`;

                // 組合步驟 HTML
                let stepHtml = `
                    <div id="step-${stepIndex}" class="step-container">
                        <h2 class="step-title">${step.title}</h2>
                        <div class="step-progress">第 ${stepIndex + 1} 步 / 共 ${totalSteps} 步</div>
                        <p class="step-instruction">${step.instruction}</p>
                `;

                // 根據步驟類型加入不同的顯示
                if (step.katexDisplay) {
                    stepHtml += `<div class="katex-display-area" style="font-size: 1.8rem;">${step.katexDisplay}</div>`;
                }
                
                if (step.solutionNum && step.solutionDen) {
                    stepHtml += `
                        <p class="step-instruction mt-4 font-semibold text-slate-700">計算新分子：</p>
                        <div class="solution-text pt-0 mt-0">${step.solutionNum}</div>
                        <p class="step-instruction mt-4 font-semibold text-slate-700">計算新分母：</p>
                        <div class="solution-text pt-0 mt-0">${step.solutionDen}</div>
                    `;
                }

                stepHtml += `
                        <div class="text-center mt-8">
                            <button id="${nextBtnId}" class="${btnClass}">${btnText}</button>
                        </div>
                    </div>
                `;

                // 插入 HTML 並滾動到新步驟
                stepsContainer.insertAdjacentHTML('beforeend', stepHtml);
                const newStepElement = document.getElementById(`step-${stepIndex}`);
                newStepElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // 重新渲染 KaTeX
                renderAllKatex();

                // 幫新按鈕加上事件監聽
                document.getElementById(nextBtnId).addEventListener('click', (e) => {
                    e.target.disabled = true; // 按過就禁用
                    loadStep(stepIndex + 1); // 載入下一步
                });
            }

            // 重置目前題目
            function resetCurrentQuestion() {
                loadQuestion(currentQuestionIndex);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // --- 初始設定 ---
            
            // 幫導覽列按鈕加上事件監聽
            navButtons.forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    loadQuestion(index);
                });
            });

            // 幫重置按鈕加上事件監聽
            resetBtn.addEventListener('click', resetCurrentQuestion);

            // 頁面載入時，自動載入第一題
            loadQuestion(0);
        });
    </script>
</body>
</html>



