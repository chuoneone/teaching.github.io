<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一、分配律</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="dog.png" type="image/png">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .concept-box {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .grid-container {
            display: grid;
            grid-template-columns: 50px 1fr;
            gap: 1rem;
            align-items: center;
            justify-content: center;
            margin-top: 1rem;
            margin-bottom: 1rem;
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
        }
        .multiplication-grid {
            display: grid;
            border: 2px solid #333;
        }
        .grid-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: bold;
            min-width: 60px;
            min-height: 60px;
            border: 1px solid #9ca3af;
        }
        .side-labels {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            height: 100%;
            font-size: 1.25rem;
            font-weight: bold;
        }
        .top-labels {
            grid-column: 2 / 3;
            display: flex;
            justify-content: space-around;
            font-size: 1.25rem;
            font-weight: bold;
            padding-bottom: 0.5rem;
        }
        .formula {
            font-family: 'Courier New', monospace;
            background-color: #eef2ff;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            color: #4338ca;
            min-height: 60px;
            word-break: break-word;
        }
        .problem-btn {
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
            width: 100%;
            text-align: left;
            flex-shrink: 0;
            white-space: nowrap;
            padding: 1rem; /* 增加點擊範圍 */
            font-size: 1rem; /* 縮小字體以適應行動裝置 */
        }
        .problem-btn.active {
            border-color: #3b82f6;
            background-color: #eff6ff;
            color: #1e3a8a;
            transform: scale(1.02);
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
        }
        .next-step-btn {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 2rem; /* 增加點擊範圍 */
            border-radius: 0.5rem;
            font-weight: bold;
            transition: background-color 0.2s;
            align-self: center;
            cursor: pointer;
        }
        .next-step-btn:hover {
            background-color: #2563eb;
        }
        .reveal-content {
            transition: opacity 0.5s;
        }
        .hidden-content {
            opacity: 0;
        }
        
        /* Responsive adjustments */
        @media (min-width: 640px) {
            .problem-btn {
                font-size: 1.125rem; /* sm:text-lg */
            }
        }
        
        @media (min-width: 768px) {
            .problem-btn {
                width: auto;
                font-size: 1.25rem; /* md:text-xl */
            }
        }
        
        @media (max-width: 767px) {
            .problem-menu-scroll {
                flex-direction: row;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-600">一、分配律</h1>
        </header>

        <main class="md:flex md:gap-8">
            <aside class="md:w-1/3 lg:w-1/4 mb-8 md:mb-0">
                <div id="problem-menu" class="flex flex-col gap-3 problem-menu-scroll">
                    <button data-target="problem-1" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">a (a + 3)</button>
                    <button data-target="problem-2" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">a (a - 7)</button>
                    <button data-target="problem-3" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">(a + 3)(b + 5)</button>
                    <button data-target="problem-4" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">(a - 3)(b + 5)</button>
                    <button data-target="problem-5" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">(a - 4)(b + 9)</button>
                    <button data-target="problem-6" class="problem-btn p-4 bg-white rounded-lg shadow font-semibold text-gray-700 border">(a - 6)(b - 8)</button>
                </div>
            </aside>

            <section class="md:w-2/3 lg:w-3/4">
                <div id="solutions-container">
                    
                    <div id="problem-1" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">a (a + 3)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>+3</span></div>
                                    <div class="side-labels"><span>a</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr;">
                                        <div class="grid-cell bg-orange-100"><span class="reveal-content hidden-content" data-step="1">a²</span></div>
                                        <div class="grid-cell bg-teal-100"><span class="reveal-content hidden-content" data-step="2">+3a</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">a²</span>
                                    <span class="reveal-content hidden-content" data-step="2"> + 3a</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-1" data-max-steps="2">下一步</button>
                        </div>
                    </div>

                    <div id="problem-2" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">a (a - 7)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>-7</span></div>
                                    <div class="side-labels"><span>a</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr;">
                                        <div class="grid-cell bg-orange-100"><span class="reveal-content hidden-content" data-step="1">a²</span></div>
                                        <div class="grid-cell bg-red-100"><span class="reveal-content hidden-content" data-step="2">-7a</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">a²</span>
                                    <span class="reveal-content hidden-content" data-step="2"> - 7a</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-2" data-max-steps="2">下一步</button>
                        </div>
                    </div>

                    <div id="problem-3" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">(a + 3)(b + 5)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>+3</span></div>
                                    <div class="side-labels"><span>b</span><span>+5</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;">
                                        <div class="grid-cell bg-red-100"><span class="reveal-content hidden-content" data-step="1">ab</span></div>
                                        <div class="grid-cell bg-green-100"><span class="reveal-content hidden-content" data-step="3">+3b</span></div>
                                        <div class="grid-cell bg-blue-100"><span class="reveal-content hidden-content" data-step="2">+5a</span></div>
                                        <div class="grid-cell bg-yellow-100"><span class="reveal-content hidden-content" data-step="4">+15</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">ab</span>
                                    <span class="reveal-content hidden-content" data-step="2"> + 5a</span>
                                    <span class="reveal-content hidden-content" data-step="3"> + 3b</span>
                                    <span class="reveal-content hidden-content" data-step="4"> + 15</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-3" data-max-steps="4">下一步</button>
                        </div>
                    </div>

                    <div id="problem-4" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">(a - 3)(b + 5)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>-3</span></div>
                                    <div class="side-labels"><span>b</span><span>+5</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;">
                                        <div class="grid-cell bg-red-100"><span class="reveal-content hidden-content" data-step="1">ab</span></div>
                                        <div class="grid-cell bg-green-100"><span class="reveal-content hidden-content" data-step="3">-3b</span></div>
                                        <div class="grid-cell bg-blue-100"><span class="reveal-content hidden-content" data-step="2">+5a</span></div>
                                        <div class="grid-cell bg-yellow-100"><span class="reveal-content hidden-content" data-step="4">-15</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">ab</span>
                                    <span class="reveal-content hidden-content" data-step="2"> + 5a</span>
                                    <span class="reveal-content hidden-content" data-step="3"> - 3b</span>
                                    <span class="reveal-content hidden-content" data-step="4"> - 15</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-4" data-max-steps="4">下一步</button>
                        </div>
                    </div>

                    <div id="problem-5" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">(a - 4)(b + 9)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>-4</span></div>
                                    <div class="side-labels"><span>b</span><span>+9</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;">
                                        <div class="grid-cell bg-red-100"><span class="reveal-content hidden-content" data-step="1">ab</span></div>
                                        <div class="grid-cell bg-green-100"><span class="reveal-content hidden-content" data-step="3">-4b</span></div>
                                        <div class="grid-cell bg-blue-100"><span class="reveal-content hidden-content" data-step="2">+9a</span></div>
                                        <div class="grid-cell bg-yellow-100"><span class="reveal-content hidden-content" data-step="4">-36</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">ab</span>
                                    <span class="reveal-content hidden-content" data-step="2"> + 9a</span>
                                    <span class="reveal-content hidden-content" data-step="3"> - 4b</span>
                                    <span class="reveal-content hidden-content" data-step="4"> - 36</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-5" data-max-steps="4">下一步</button>
                        </div>
                    </div>

                    <div id="problem-6" class="problem-content hidden">
                        <div class="concept-box">
                            <div>
                                <h2 class="text-2xl font-bold text-center mb-4">(a - 6)(b - 8)</h2>
                                <div class="grid-container">
                                    <div></div>
                                    <div class="top-labels"><span>a</span><span>-6</span></div>
                                    <div class="side-labels"><span>b</span><span>-8</span></div>
                                    <div class="multiplication-grid" style="grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;">
                                        <div class="grid-cell bg-red-100"><span class="reveal-content hidden-content" data-step="1">ab</span></div>
                                        <div class="grid-cell bg-green-100"><span class="reveal-content hidden-content" data-step="3">-6b</span></div>
                                        <div class="grid-cell bg-blue-100"><span class="reveal-content hidden-content" data-step="2">-8a</span></div>
                                        <div class="grid-cell bg-yellow-100"><span class="reveal-content hidden-content" data-step="4">+48</span></div>
                                    </div>
                                </div>
                                <p class="formula mt-3">
                                    <span class="reveal-content hidden-content" data-step="1">ab</span>
                                    <span class="reveal-content hidden-content" data-step="2"> - 8a</span>
                                    <span class="reveal-content hidden-content" data-step="3"> - 6b</span>
                                    <span class="reveal-content hidden-content" data-step="4"> + 48</span>
                                </p>
                            </div>
                            <button class="next-step-btn" data-problem="problem-6" data-max-steps="4">下一步</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        const problemBtns = document.querySelectorAll('.problem-btn');
        const problemContents = document.querySelectorAll('.problem-content');
        const solutionsContainer = document.getElementById('solutions-container');
        const stepCounters = {};

        function resetProblemState(problemId) {
            const problemElement = document.getElementById(problemId);
            if (!problemElement) return;

            // Reset step counter
            stepCounters[problemId] = 0;
            
            // Hide all revealable content
            const revealable = problemElement.querySelectorAll('.reveal-content');
            revealable.forEach(el => el.classList.add('hidden-content'));

            // Show the next step button
            const nextBtn = problemElement.querySelector('.next-step-btn');
            if(nextBtn) nextBtn.classList.remove('hidden');
        }

        problemBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetId = btn.dataset.target;
                
                // Reset all problems
                problemContents.forEach(content => {
                    content.classList.add('hidden');
                    resetProblemState(content.id);
                });

                // Activate current button
                problemBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Show target problem
                const targetContent = document.getElementById(targetId);
                if (targetContent) {
                    targetContent.classList.remove('hidden');
                }
            });
        });

        solutionsContainer.addEventListener('click', (e) => {
            if (!e.target.classList.contains('next-step-btn')) return;

            const btn = e.target;
            const problemId = btn.dataset.problem;
            const maxSteps = parseInt(btn.dataset.maxSteps, 10);

            // Increment step
            stepCounters[problemId] = (stepCounters[problemId] || 0) + 1;
            const currentStep = stepCounters[problemId];

            // Reveal content for the current step
            const problemElement = document.getElementById(problemId);
            const contentToReveal = problemElement.querySelectorAll(`.reveal-content[data-step="${currentStep}"]`);
            contentToReveal.forEach(el => el.classList.remove('hidden-content'));
            
            // Hide button if it's the last step
            if (currentStep >= maxSteps) {
                btn.classList.add('hidden');
            }
        });

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.problem-btn[data-target="problem-1"]').click();
        });
    </script>
</body>
</html>