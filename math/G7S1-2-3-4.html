<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åˆ†æ•¸é‹ç®—æ­¥é©Ÿè§£æ</title>
    <link rel="icon" href="dog.png" type="image/png">
  <!-- KaTeX for Math Rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- SDK Scripts (from original) -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>

  <!-- Minimal styles for custom font and dynamic classes -->
  <style>
    /* æ‡‰ç”¨è‡ªè¨‚å­—é«” */
    body {
      font-family: 'Chiron GoRound TC', 'Noto Sans TC', sans-serif;
    }
    
    /* ç”¨æ–¼ JS åˆ‡æ›çš„å‹•æ…‹é¡åˆ¥ */
    .problem-content {
      display: none;
    }
    
    .problem-content.active {
      display: block;
    }

    /* .active ç‹€æ…‹çš„æ¨£å¼ */
    .problem.active {
      transform: translateX(4px);
      background: rgba(255, 255, 255, 0.95);
      border-color: #4db8a0;
      border-width: 3px;
      box-shadow: 0 6px 16px rgba(77, 184, 160, 0.4);
    }
    
    .problem.active .problem-number {
      color: #4db8a0;
      font-weight: 700;
    }
    
    .problem.active .katex {
      color: #2d5f52;
    }

    /* æ–°å¢çš„ hidden é¡åˆ¥ */
    .hidden {
      display: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-[#a8e6cf] to-[#dcedc1]">

  <!-- 
    ä¸»è¦å®¹å™¨
    - é è¨­ç‚ºå‚ç›´æ’åˆ— (è¡Œå‹•è£ç½®)
    - lg (1024px) ä»¥ä¸Šè®Šç‚ºæ°´å¹³æ’åˆ—
  -->
  <div class="flex flex-col lg:flex-row min-h-screen w-full bg-white shadow-none">

    <!-- 
      å´é‚Šæ¬„ (é¡Œç›®é¸æ“‡å€)
      - åœ¨ lg è£ç½®ä¸Šå›ºå®šå¯¬åº¦ç‚º 320px
      - åœ¨è¡Œå‹•è£ç½®ä¸Šå¯¬åº¦ç‚º 100%
    -->
    <div class="w-full lg:w-80 flex-shrink-0 bg-gradient-to-b from-[#a8e6cf] to-[#7fc7af] shadow-lg lg:shadow-xl flex flex-col">
      <h1 id="main-title" class="text-[#4db8a0] text-center text-3xl font-bold pt-8 pb-4 px-6">
        åˆ†æ•¸é‹ç®—ç·´ç¿’é¡Œ
      </h1>
      <p class="text-center text-white/90 text-base px-6 pb-4">
        é»é¸é¡Œç›®æŸ¥çœ‹è©³ç´°è§£é¡Œæ­¥é©Ÿ
      </p>

      <!-- 
        é¡Œç›®ç¶²æ ¼
        - é è¨­ç‚ºæ°´å¹³æ»¾å‹• (è¡Œå‹•è£ç½®)
        - lg ä»¥ä¸Šè®Šç‚ºå‚ç›´æ’åˆ—å’Œæ»¾å‹•
      -->
      <div class="flex flex-row lg:flex-col gap-4 p-6 overflow-x-auto lg:overflow-x-hidden lg:overflow-y-auto">
        
        <!-- é¡Œç›® 1 -->
        <div class="problem active min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(1)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 1
          </div>
          <div class="math-display text-[1.5em]">
            $$\left(-\frac{5}{8}\right) - \left(-\frac{9}{8}\right)$$
          </div>
        </div>
        
        <!-- é¡Œç›® 2 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(2)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 2
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{5}{13} + \frac{12}{13}$$
          </div>
        </div>

        <!-- é¡Œç›® 3 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(3)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 3
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{5}{16} - \left(-\frac{11}{16}\right)$$
          </div>
        </div>

        <!-- é¡Œç›® 4 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(4)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 4
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{3}{5} - \left(+\frac{2}{5}\right)$$
          </div>
        </div>

      </div>
    </div> <!-- çµæŸ .sidebar -->

    <!-- 
      å…§å®¹å€åŸŸ (æ­¥é©Ÿè§£æå€)
      - flex-1 è®“å®ƒå¡«æ»¿å‰©é¤˜ç©ºé–“
      - p-6 (padding) åœ¨ md (768px) ä»¥ä¸Šè®Šç‚º p-12ï¼Œåœ¨ lg (1024px) ä»¥ä¸Šè®Šç‚º p-16
    -->
    <div class="flex-1 p-6 md:p-12 lg:p-16 bg-[#f8fffe] overflow-y-auto">

      <!-- é¡Œç›® 1 å…§å®¹ -->
      <div id="problem1" class="problem-content active">
        <div class="steps mt-8">
          
          <!-- æ­¥é©Ÿ 1 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span id="step1-title">ç†è§£ã€Œè² è² å¾—æ­£ã€</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step1-desc">æ¸›å»ä¸€å€‹è² æ•¸ï¼Œç­‰æ–¼åŠ ä¸Šé€™å€‹æ•¸çš„ç›¸åæ•¸</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(-\frac{5}{8}\right) - \left(-\frac{9}{8}\right) = \left(-\frac{5}{8}\right) + \frac{9}{8}$$
              </div>
              <p id="step1-note">ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">è² è² å¾—æ­£</span>ï¼šå…©å€‹è² è™Ÿç›¸é‡è®Šæˆæ­£è™Ÿ</p>
            </div>
          </div>

          <!-- æ­¥é©Ÿ 2 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span id="step2-title">ç¢ºèªåˆ†æ¯ç›¸åŒ</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step2-desc">å…©å€‹åˆ†æ•¸çš„åˆ†æ¯éƒ½æ˜¯ 8ï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(-\frac{5}{8}\right) + \frac{9}{8} = \frac{-5 + 9}{8}$$
              </div>
              <p id="step2-note">âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åªéœ€è¨ˆç®—åˆ†å­</span></p>
            </div>
          </div>
          
          <!-- æ­¥é©Ÿ 3 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span id="step3-title">è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step3-desc">å°‡åˆ†å­ç›¸åŠ ï¼š-5 + 9 = 4</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 9}{8} = \frac{4}{8}$$
              </div>
              <p id="step3-note">ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 9 = 4</span>ï¼ˆè² æ•¸åŠ æ­£æ•¸ï¼‰</p>
            </div>
          </div>
          
          <!-- æ­¥é©Ÿ 4 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span id="step4-title">åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step4-desc">æ‰¾å‡ºåˆ†å­å’Œåˆ†æ¯çš„å…¬å› æ•¸</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{4}{8}$$
              </div>
              <p id="step4-note">ğŸ” 4 å’Œ 8 çš„<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æœ€å¤§å…¬å› æ•¸æ˜¯ 4</span></p>
            </div>
          </div>
          
          <!-- æ­¥é©Ÿ 5 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span id="step5-title">ç´„åˆ†å¾—åˆ°æœ€ç°¡åˆ†æ•¸</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step5-desc">åˆ†å­å’Œåˆ†æ¯åŒæ™‚é™¤ä»¥æœ€å¤§å…¬å› æ•¸ 4</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{4 \div 4}{8 \div 4} = \frac{1}{2}$$
              </div>
              <p id="step5-note">âœ¨ ç´„åˆ†å¾Œå¾—åˆ°<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æœ€ç°¡åˆ†æ•¸</span></p>
            </div>
          </div>

          <!-- æœ€çµ‚ç­”æ¡ˆ -->
          <div id="final-answer-1" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>
              <span id="answer-label">æœ€çµ‚ç­”æ¡ˆï¼š</span>
            </div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{1}{2}$$
            </div>
          </div>

          <!-- äº’å‹•æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
              <button id="next-step-1" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
                ä¸‹ä¸€æ­¥
              </button>
              <button id="reset-step-1" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
                é‡è¨­
              </button>
          </div>

        </div> <!-- çµæŸ .steps -->
      </div> <!-- çµæŸ #problem1 -->

      <!-- é¡Œç›® 2 å…§å®¹ -->
      <div id="problem2" class="problem-content">
        <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>ç¢ºèªåˆ†æ¯ç›¸åŒ</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å…©å€‹åˆ†æ•¸çš„åˆ†æ¯éƒ½æ˜¯ 13ï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{13} + \frac{12}{13} = \frac{-5 + 12}{13}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åªéœ€è¨ˆç®—åˆ†å­</span></p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å°‡åˆ†å­ç›¸åŠ ï¼š-5 + 12 = 7</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 12}{13} = \frac{7}{13}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 12 = 7</span>ï¼ˆè² æ•¸åŠ æ­£æ•¸ï¼‰</p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æª¢æŸ¥åˆ†å­å’Œåˆ†æ¯æ˜¯å¦æœ‰å…¬å› æ•¸</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{7}{13}$$
              </div>
              <p>ğŸ” 7 å’Œ 13 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æ²’æœ‰å…¬å› æ•¸</span>ï¼ˆéƒ½æ˜¯è³ªæ•¸ï¼‰</p>
            </div>
          </div>

          <div id="final-answer-2" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{7}{13}$$
            </div>
          </div>

          <!-- äº’å‹•æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
              <button id="next-step-2" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
                ä¸‹ä¸€æ­¥
              </button>
              <button id="reset-step-2" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
                é‡è¨­
              </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem2 -->

      <!-- é¡Œç›® 3 å…§å®¹ -->
      <div id="problem3" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>ç†è§£ã€Œè² è² å¾—æ­£ã€</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æ¸›å»ä¸€å€‹è² æ•¸ï¼Œç­‰æ–¼åŠ ä¸Šé€™å€‹æ•¸çš„ç›¸åæ•¸</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{16} - \left(-\frac{11}{16}\right) = -\frac{5}{16} + \frac{11}{16}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">è² è² å¾—æ­£</span>ï¼šå…©å€‹è² è™Ÿç›¸é‡è®Šæˆæ­£è™Ÿ</p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>ç¢ºèªåˆ†æ¯ç›¸åŒ</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å…©å€‹åˆ†æ•¸çš„åˆ†æ¯éƒ½æ˜¯ 16ï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{16} + \frac{11}{16} = \frac{-5 + 11}{16}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åªéœ€è¨ˆç®—åˆ†å­</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å°‡åˆ†å­ç›¸åŠ ï¼š-5 + 11 = 6</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 11}{16} = \frac{6}{16}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 11 = 6</span>ï¼ˆè² æ•¸åŠ æ­£æ•¸ï¼‰</p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æ‰¾å‡ºåˆ†å­å’Œåˆ†æ¯çš„å…¬å› æ•¸</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{6}{16}$$
              </div>
              <p>ğŸ” 6 å’Œ 16 çš„<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æœ€å¤§å…¬å› æ•¸æ˜¯ 2</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span>ç´„åˆ†å¾—åˆ°æœ€ç°¡åˆ†æ•¸</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†å­å’Œåˆ†æ¯åŒæ™‚é™¤ä»¥æœ€å¤§å…¬å› æ•¸ 2</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{6 \div 2}{16 \div 2} = \frac{3}{8}$$
              </div>
              <p>âœ¨ ç´„åˆ†å¾Œå¾—åˆ°<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æœ€ç°¡åˆ†æ•¸</span></p>
            </div>
          </div>

          <div id="final-answer-3" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{3}{8}$$
            </div>
          </div>

          <!-- äº’å‹•æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
              <button id="next-step-3" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
                ä¸‹ä¸€æ­¥
              </button>
              <button id="reset-step-3" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
                é‡è¨­
              </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem3 -->

      <!-- é¡Œç›® 4 å…§å®¹ -->
      <div id="problem4" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>ç†è§£ã€Œæ­£è™Ÿä¸æ”¹è®Šç¬¦è™Ÿã€</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æ¸›å»ä¸€å€‹æ­£æ•¸ï¼Œç¬¦è™Ÿä¿æŒä¸è®Š</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{3}{5} - \left(+\frac{2}{5}\right) = -\frac{3}{5} - \frac{2}{5}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">æ­£è™Ÿå¯ä»¥çœç•¥</span>ï¼š-(+a) = -a</p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>ç¢ºèªåˆ†æ¯ç›¸åŒ</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å…©å€‹åˆ†æ•¸çš„åˆ†æ¯éƒ½æ˜¯ 5ï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{3}{5} - \frac{2}{5} = \frac{-3 - 2}{5}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åªéœ€è¨ˆç®—åˆ†å­</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å°‡åˆ†å­ç›¸æ¸›ï¼š-3 - 2 = -5</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-3 - 2}{5} = \frac{-5}{5}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-3 - 2 = -5</span>ï¼ˆå…©å€‹è² æ•¸ç›¸åŠ ï¼‰</p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>åŒ–ç°¡ç‚ºæ•´æ•¸</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>ç•¶åˆ†å­å’Œåˆ†æ¯ç›¸åŒæ™‚ï¼Œçµæœç‚º Â±1</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5}{5} = -1$$
              </div>
              <p>âœ¨ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åˆ†å­åˆ†æ¯ç›¸åŒ</span>ï¼šçµæœç‚º -1</p>
            </div>
          </div>

          <div id="final-answer-4" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$-1$$
            </div>
          </div>

          <!-- äº’å‹•æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
              <button id="next-step-4" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
                ä¸‹ä¸€æ­¥
              </button>
              <button id="reset-step-4" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
                é‡è¨­
              </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem4 -->
      
    </div> <!-- çµæŸ .content-area -->
  </div> <!-- çµæŸ .container -->

  <!-- é è…³ -->
  <div id="footer-text" class="text-center text-[#2d5f52]/70 p-4 text-sm bg-[#a8e6cf]/30">
    Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹
  </div>

  <!-- 
    ============================================================
    = JAVASCRIPT - (å·²æ›´æ–°äº’å‹•é‚è¼¯)
    ============================================================
  -->
  <script>
    // SDK ç›¸é—œçš„ defaultConfig (ä¸»è¦ç”¨æ–¼ problem 1 å’Œé¡è‰²)
    const defaultConfig = {
      main_title: "åˆ†æ•¸é‹ç®—ç·´ç¿’é¡Œ",
      step1_title: "ç†è§£ã€Œè² è² å¾—æ­£ã€",
      step1_desc: "æ¸›å»ä¸€å€‹è² æ•¸ï¼Œç­‰æ–¼åŠ ä¸Šé€™å€‹æ•¸çš„ç›¸åæ•¸",
      step1_note: "ğŸ’¡ <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">è² è² å¾—æ­£</span>ï¼šå…©å€‹è² è™Ÿç›¸é‡è®Šæˆæ­£è™Ÿ",
      step2_title: "ç¢ºèªåˆ†æ¯ç›¸åŒ",
      step2_desc: "å…©å€‹åˆ†æ•¸çš„åˆ†æ¯éƒ½æ˜¯ 8ï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­",
      step2_note: "âœ“ <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">åªéœ€è¨ˆç®—åˆ†å­</span>",
      step3_title: "è¨ˆç®—åˆ†å­",
      step3_desc: "å°‡åˆ†å­ç›¸åŠ ï¼š-5 + 9 = 4",
      step3_note: "ğŸ“ <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">-5 + 9 = 4</span>ï¼ˆè² æ•¸åŠ æ­£æ•¸ï¼‰",
      step4_title: "åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†",
      step4_desc: "æ‰¾å‡ºåˆ†å­å’Œåˆ†æ¯çš„å…¬å› æ•¸",
      step4_note: "ğŸ” 4 å’Œ 8 çš„<span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">æœ€å¤§å…¬å› æ•¸æ˜¯ 4</span>",
      step5_title: "ç´„åˆ†å¾—åˆ°æœ€ç°¡åˆ†æ•¸",
      step5_desc: "åˆ†å­å’Œåˆ†æ¯åŒæ™‚é™¤ä»¥æœ€å¤§å…¬å› æ•¸ 4",
      step5_note: "âœ¨ ç´„åˆ†å¾Œå¾—åˆ°<span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">æœ€ç°¡åˆ†æ•¸</span>",
      answer_label: "æœ€çµ‚ç­”æ¡ˆï¼š",
      footer_text: "Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹",
      primary_color: "#4db8a0",
      secondary_color: "#7fc7af",
      background_color: "#f8fffe",
      text_color: "#2d5f52",
      accent_color: "#d0f0e8"
    };

    // SDK onConfigChange å‡½æ•¸ (èˆ‡ä¹‹å‰ç›¸åŒ)
    async function onConfigChange(config) {
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('step1-title').textContent = config.step1_title || defaultConfig.step1_title;
      document.getElementById('step1-desc').textContent = config.step1_desc || defaultConfig.step1_desc;
      document.getElementById('step1-note').innerHTML = config.step1_note || defaultConfig.step1_note;
      document.getElementById('step2-title').textContent = config.step2_title || defaultConfig.step2_title;
      document.getElementById('step2-desc').textContent = config.step2_desc || defaultConfig.step2_desc;
      document.getElementById('step2-note').innerHTML = config.step2_note || defaultConfig.step2_note;
      document.getElementById('step3-title').textContent = config.step3_title || defaultConfig.step3_title;
      document.getElementById('step3-desc').textContent = config.step3_desc || defaultConfig.step3_desc;
      document.getElementById('step3-note').innerHTML = config.step3_note || defaultConfig.step3_note;
      document.getElementById('step4-title').textContent = config.step4_title || defaultConfig.step4_title;
      document.getElementById('step4-desc').textContent = config.step4_desc || defaultConfig.step4_desc;
      document.getElementById('step4-note').innerHTML = config.step4_note || defaultConfig.step4_note;
      document.getElementById('step5-title').textContent = config.step5_title || defaultConfig.step5_title;
      document.getElementById('step5-desc').textContent = config.step5_desc || defaultConfig.step5_desc;
      document.getElementById('step5-note').innerHTML = config.step5_note || defaultConfig.step5_note;
      document.getElementById('answer-label').textContent = config.answer_label || defaultConfig.answer_label;
      document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;

      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;

      document.body.style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${accentColor} 100%)`;
      document.querySelector('h1').style.color = primaryColor;
      document.querySelector('.lg\\:w-80').style.background = `linear-gradient(180deg, ${secondaryColor} 0%, ${primaryColor} 100%)`;
      document.querySelector('.flex-1').style.background = backgroundColor;
      
      document.querySelectorAll('.problem').forEach(problem => { problem.style.color = textColor; });
      document.querySelectorAll('.problem-number').forEach(num => { num.style.color = primaryColor; });
      document.querySelectorAll('.step').forEach(step => { step.style.borderLeftColor = primaryColor; });
      document.querySelectorAll('.step-number').forEach(num => { num.style.background = primaryColor; });
      document.querySelectorAll('.step-title').forEach(title => { title.style.color = primaryColor; });
      document.querySelectorAll('.step-content').forEach(content => { content.style.color = textColor; });
      document.querySelectorAll('.highlight').forEach(highlight => { highlight.style.background = accentColor; highlight.style.color = textColor; });
      document.querySelectorAll('.math-expression').forEach(expr => { expr.style.background = accentColor; });
      document.querySelectorAll('.final-answer').forEach(answer => { answer.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`; });
    }

    // SDK mapToCapabilities å‡½æ•¸ (èˆ‡ä¹‹å‰ç›¸åŒ)
    function mapToCapabilities(config) {
      return {
        recolorables: [
          { get: () => config.primary_color || defaultConfig.primary_color, set: (value) => { config.primary_color = value; window.elementSdk.setConfig({ primary_color: value }); } },
          { get: () => config.secondary_color || defaultConfig.secondary_color, set: (value) => { config.secondary_color = value; window.elementSdk.setConfig({ secondary_color: value }); } },
          { get: () => config.background_color || defaultConfig.background_color, set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); } },
          { get: () => config.text_color || defaultConfig.text_color, set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); } },
          { get: () => config.accent_color || defaultConfig.accent_color, set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); } }
        ],
        borderables: [], fontEditable: undefined, fontSizeable: undefined
      };
    }

    // SDK mapToEditPanelValues å‡½æ•¸ (èˆ‡ä¹‹å‰ç›¸åŒ)
    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || defaultConfig.main_title],
        ["step1_title", config.step1_title || defaultConfig.step1_title],
        ["step1_desc", config.step1_desc || defaultConfig.step1_desc],
        ["step1_note", config.step1_note || defaultConfig.step1_note],
        ["step2_title", config.step2_title || defaultConfig.step2_title],
        ["step2_desc", config.step2_desc || defaultConfig.step2_desc],
        ["step2_note", config.step2_note || defaultConfig.step2_note],
        ["step3_title", config.step3_title || defaultConfig.step3_title],
        ["step3_desc", config.step3_desc || defaultConfig.step3_desc],
        ["step3_note", config.step3_note || defaultConfig.step3_note],
        ["step4_title", config.step4_title || defaultConfig.step4_title],
        ["step4_desc", config.step4_desc || defaultConfig.step4_desc],
        ["step4_note", config.step4_note || defaultConfig.step4_note],
        ["step5_title", config.step5_title || defaultConfig.step5_title],
        ["step5_desc", config.step5_desc || defaultConfig.step5_desc],
        ["step5_note", config.step5_note || defaultConfig.step5_note],
        ["answer_label", config.answer_label || defaultConfig.answer_label],
        ["footer_text", config.footer_text || defaultConfig.footer_text]
      ]);
    }

    // --- äº’å‹•å¼æ­¥é©Ÿé‚è¼¯ ---

    // å„²å­˜æ¯å€‹é¡Œç›®çš„ç›®å‰æ­¥é©Ÿ
    let currentStepState = { 1: 0, 2: 0, 3: 0, 4: 0 };

    /**
     * é‡è¨­æŒ‡å®šé¡Œç›®çš„æ‰€æœ‰æ­¥é©Ÿå’ŒæŒ‰éˆ•
     */
    function resetSteps(problemNumber) {
      currentStepState[problemNumber] = 0;

      // éš±è—æ‰€æœ‰æ­¥é©Ÿ
      document.querySelectorAll(`#problem${problemNumber} .step`).forEach(step => {
        step.classList.add('hidden');
      });

      // éš±è—æœ€çµ‚ç­”æ¡ˆ
      document.querySelector(`#final-answer-${problemNumber}`).classList.add('hidden');

      // é¡¯ç¤º "ä¸‹ä¸€æ­¥" æŒ‰éˆ•
      const nextButton = document.querySelector(`#next-step-${problemNumber}`);
      if (nextButton) nextButton.classList.remove('hidden');

      // éš±è— "é‡è¨­" æŒ‰éˆ•
      const resetButton = document.querySelector(`#reset-step-${problemNumber}`);
      if (resetButton) resetButton.classList.add('hidden');
    }

    /**
     * é¡¯ç¤ºæŒ‡å®šé¡Œç›®çš„ä¸‹ä¸€æ­¥
     */
    function showNextStep(problemNumber) {
      const steps = document.querySelectorAll(`#problem${problemNumber} .step`);
      const current = currentStepState[problemNumber];

      if (current < steps.length) {
        // é¡¯ç¤ºä¸‹ä¸€æ­¥
        steps[current].classList.remove('hidden');
        currentStepState[problemNumber]++;
      }

      // æª¢æŸ¥æ˜¯å¦å·²é¡¯ç¤ºæ‰€æœ‰æ­¥é©Ÿ
      if (currentStepState[problemNumber] === steps.length) {
        // é¡¯ç¤ºæœ€çµ‚ç­”æ¡ˆ
        document.querySelector(`#final-answer-${problemNumber}`).classList.remove('hidden');
        
        // éš±è— "ä¸‹ä¸€æ­¥" æŒ‰éˆ•
        document.querySelector(`#next-step-${problemNumber}`).classList.add('hidden');
        
        // é¡¯ç¤º "é‡è¨­" æŒ‰éˆ•
        document.querySelector(`#reset-step-${problemNumber}`).classList.remove('hidden');
      }
      
      // é¡¯ç¤ºå¾Œé‡æ–°æ¸²æŸ“æ•¸å­¸
      renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ],
          throwOnError: false
      });
    }

    /**
     * é¡¯ç¤ºé¸å®šçš„é¡Œç›®å…§å®¹ï¼Œä¸¦é‡è¨­å…¶æ­¥é©Ÿ
     */
    function showProblem(problemNumber) {
      // ç§»é™¤æ‰€æœ‰é¡Œç›®çš„ active ç‹€æ…‹
      document.querySelectorAll('.problem').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.problem-content').forEach(p => p.classList.remove('active'));
      
      // æ·»åŠ é¸ä¸­é¡Œç›®çš„ active ç‹€æ…‹
      document.querySelectorAll('.problem')[problemNumber - 1].classList.add('active');
      document.getElementById('problem' + problemNumber).classList.add('active');
      
      // é‡è¨­æ–°é¸ä¸­é¡Œç›®çš„æ­¥é©Ÿ
      resetSteps(problemNumber);

      // é‡æ–°æ¸²æŸ“æ•¸å­¸ç¬¦è™Ÿ
      setTimeout(() => {
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ],
          throwOnError: false
        });
      }, 50); // çµ¦äºˆä¸€é»å»¶é²ç¢ºä¿ DOM æ›´æ–°
    }

    /**
     * DOM è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œçš„åˆå§‹åŒ–
     */
    document.addEventListener('DOMContentLoaded', () => {
      // åˆå§‹æ¸²æŸ“æ•¸å­¸
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        throwOnError: false
      });

      // è¨­ç½®æ‰€æœ‰æŒ‰éˆ•çš„ç›£è½å™¨
      for (let i = 1; i <= 4; i++) {
        const nextButton = document.querySelector(`#next-step-${i}`);
        const resetButton = document.querySelector(`#reset-step-${i}`);

        if (nextButton) {
          nextButton.addEventListener('click', () => showNextStep(i));
        }
        if (resetButton) {
          resetButton.addEventListener('click', () => resetSteps(i));
        }
      }
      
      // ç¢ºä¿ç¬¬ä¸€å€‹å•é¡Œåœ¨è¼‰å…¥æ™‚è¢«æ­£ç¢ºé‡è¨­
      resetSteps(1);
    });

    // SDK åˆå§‹åŒ–
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
</body>
</html>