<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>分數運算步驟解析</title>
    <link rel="icon" href="dog.png" type="image/png">
  <!-- KaTeX for Math Rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- SDK Scripts (from original) -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>

  <!-- Minimal styles for custom font and dynamic classes -->
  <style>
    /* 應用自訂字體 */
    body {
      font-family: 'Chiron GoRound TC', 'Noto Sans TC', sans-serif;
    }
    
    /* 用於 JS 切換的動態類別 */
    .problem-content {
      display: none;
    }
    
    .problem-content.active {
      display: block;
    }

    /* .active 狀態的樣式 */
    .problem.active {
      transform: translateX(4px);
      background: rgba(255, 255, 255, 0.95);
      border-color: #4db8a0;
      border-width: 3px;
      box-shadow: 0 6px 16px rgba(77, 184, 160, 0.4);
    }
    
    .problem.active .problem-number {
      color: #4db8a0;
      font-weight: 700;
    }
    
    .problem.active .katex {
      color: #2d5f52;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-[#a8e6cf] to-[#dcedc1]">

  <!-- 
    主要容器
    - 預設為垂直排列 (行動裝置)
    - lg (1024px) 以上變為水平排列
  -->
  <div class="flex flex-col lg:flex-row min-h-screen w-full bg-white shadow-none">

    <!-- 
      側邊欄 (題目選擇區)
      - 在 lg 裝置上固定寬度為 320px
      - 在行動裝置上寬度為 100%
    -->
    <div class="w-full lg:w-80 flex-shrink-0 bg-gradient-to-b from-[#a8e6cf] to-[#7fc7af] shadow-lg lg:shadow-xl flex flex-col">
      <h1 id="main-title" class="text-[#4db8a0] text-center text-3xl font-bold pt-8 pb-4 px-6">
        分數運算練習題
      </h1>
      <p class="text-center text-white/90 text-base px-6 pb-4">
        點選題目查看詳細解題步驟
      </p>

      <!-- 
        題目網格
        - 預設為水平滾動 (行動裝置)
        - lg 以上變為垂直排列和滾動
      -->
      <div class="flex flex-row lg:flex-col gap-4 p-6 overflow-x-auto lg:overflow-x-hidden lg:overflow-y-auto">
        
        <!-- 題目 1 -->
        <div class="problem active min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(1)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            題目 1
          </div>
          <div class="math-display text-[1.5em]">
            $$\left(-\frac{5}{8}\right) - \left(-\frac{9}{8}\right)$$
          </div>
        </div>
        
        <!-- 題目 2 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(2)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            題目 2
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{5}{13} + \frac{12}{13}$$
          </div>
        </div>

        <!-- 題目 3 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(3)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            題目 3
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{5}{16} - \left(-\frac{11}{16}\right)$$
          </div>
        </div>

        <!-- 題目 4 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(4)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            題目 4
          </div>
          <div class="math-display text-[1.5em]">
            $$-\frac{3}{5} - \left(+\frac{2}{5}\right)$$
          </div>
        </div>

      </div>
    </div> <!-- 結束 .sidebar -->

    <!-- 
      內容區域 (步驟解析區)
      - flex-1 讓它填滿剩餘空間
      - p-6 (padding) 在 md (768px) 以上變為 p-12，在 lg (1024px) 以上變為 p-16
    -->
    <div class="flex-1 p-6 md:p-12 lg:p-16 bg-[#f8fffe] overflow-y-auto">

      <!-- 題目 1 內容 -->
      <div id="problem1" class="problem-content active">
        <div class="steps mt-8">
          
          <!-- 步驟 1 -->
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span id="step1-title">理解「負負得正」</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step1-desc">減去一個負數，等於加上這個數的相反數</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(-\frac{5}{8}\right) - \left(-\frac{9}{8}\right) = \left(-\frac{5}{8}\right) + \frac{9}{8}$$
              </div>
              <p id="step1-note">💡 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">負負得正</span>：兩個負號相遇變成正號</p>
            </div>
          </div>

          <!-- 步驟 2 -->
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span id="step2-title">確認分母相同</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step2-desc">兩個分數的分母都是 8，可以直接計算分子</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(-\frac{5}{8}\right) + \frac{9}{8} = \frac{-5 + 9}{8}$$
              </div>
              <p id="step2-note">✓ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">只需計算分子</span></p>
            </div>
          </div>
          
          <!-- 步驟 3 -->
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span id="step3-title">計算分子</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step3-desc">將分子相加：-5 + 9 = 4</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 9}{8} = \frac{4}{8}$$
              </div>
              <p id="step3-note">📝 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 9 = 4</span>（負數加正數）</p>
            </div>
          </div>
          
          <!-- 步驟 4 -->
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span id="step4-title">判斷是否需要約分</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step4-desc">找出分子和分母的公因數</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{4}{8}$$
              </div>
              <p id="step4-note">🔍 4 和 8 的<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">最大公因數是 4</span></p>
            </div>
          </div>
          
          <!-- 步驟 5 -->
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span id="step5-title">約分得到最簡分數</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step5-desc">分子和分母同時除以最大公因數 4</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{4 \div 4}{8 \div 4} = \frac{1}{2}$$
              </div>
              <p id="step5-note">✨ 約分後得到<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">最簡分數</span></p>
            </div>
          </div>

          <!-- 最終答案 -->
          <div class="final-answer bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>
              <span id="answer-label">最終答案：</span>
            </div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{1}{2}$$
            </div>
          </div>

        </div> <!-- 結束 .steps -->
      </div> <!-- 結束 #problem1 -->

      <!-- 題目 2 內容 -->
      <div id="problem2" class="problem-content">
        <div class="steps mt-8">
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>確認分母相同</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>兩個分數的分母都是 13，可以直接計算分子</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{13} + \frac{12}{13} = \frac{-5 + 12}{13}$$
              </div>
              <p>✓ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">只需計算分子</span></p>
            </div>
          </div>

          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>計算分子</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>將分子相加：-5 + 12 = 7</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 12}{13} = \frac{7}{13}$$
              </div>
              <p>📝 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 12 = 7</span>（負數加正數）</p>
            </div>
          </div>

          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>判斷是否需要約分</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>檢查分子和分母是否有公因數</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{7}{13}$$
              </div>
              <p>🔍 7 和 13 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">沒有公因數</span>（都是質數）</p>
            </div>
          </div>

          <div class="final-answer bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>最終答案：</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{7}{13}$$
            </div>
          </div>
        </div>
      </div> <!-- 結束 #problem2 -->

      <!-- 題目 3 內容 -->
      <div id="problem3" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>理解「負負得正」</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>減去一個負數，等於加上這個數的相反數</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{16} - \left(-\frac{11}{16}\right) = -\frac{5}{16} + \frac{11}{16}$$
              </div>
              <p>💡 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">負負得正</span>：兩個負號相遇變成正號</p>
            </div>
          </div>

          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>確認分母相同</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>兩個分數的分母都是 16，可以直接計算分子</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{5}{16} + \frac{11}{16} = \frac{-5 + 11}{16}$$
              </div>
              <p>✓ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">只需計算分子</span></p>
            </div>
          </div>
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>計算分子</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>將分子相加：-5 + 11 = 6</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5 + 11}{16} = \frac{6}{16}$$
              </div>
              <p>📝 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-5 + 11 = 6</span>（負數加正數）</p>
            </div>
          </div>
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>判斷是否需要約分</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>找出分子和分母的公因數</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{6}{16}$$
              </div>
              <p>🔍 6 和 16 的<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">最大公因數是 2</span></p>
            </div>
          </div>
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span>約分得到最簡分數</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>分子和分母同時除以最大公因數 2</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{6 \div 2}{16 \div 2} = \frac{3}{8}$$
              </div>
              <p>✨ 約分後得到<span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">最簡分數</span></p>
            </div>
          </div>

          <div class="final-answer bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>最終答案：</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{3}{8}$$
            </div>
          </div>
        </div>
      </div> <!-- 結束 #problem3 -->

      <!-- 題目 4 內容 -->
      <div id="problem4" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>理解「正號不改變符號」</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>減去一個正數，符號保持不變</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{3}{5} - \left(+\frac{2}{5}\right) = -\frac{3}{5} - \frac{2}{5}$$
              </div>
              <p>💡 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">正號可以省略</span>：-(+a) = -a</p>
            </div>
          </div>

          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>確認分母相同</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>兩個分數的分母都是 5，可以直接計算分子</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$-\frac{3}{5} - \frac{2}{5} = \frac{-3 - 2}{5}$$
              </div>
              <p>✓ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">只需計算分子</span></p>
            </div>
          </div>
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>計算分子</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>將分子相減：-3 - 2 = -5</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-3 - 2}{5} = \frac{-5}{5}$$
              </div>
              <p>📝 <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">-3 - 2 = -5</span>（兩個負數相加）</p>
            </div>
          </div>
          
          <div class="step bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>化簡為整數</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>當分子和分母相同時，結果為 ±1</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{-5}{5} = -1$$
              </div>
              <p>✨ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">分子分母相同</span>：結果為 -1</p>
            </div>
          </div>

          <div class="final-answer bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>最終答案：</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$-1$$
            </div>
          </div>
        </div>
      </div> <!-- 結束 #problem4 -->
      
    </div> <!-- 結束 .content-area -->
  </div> <!-- 結束 .container -->

  <!-- 頁腳 -->
  <div id="footer-text" class="text-center text-[#2d5f52]/70 p-4 text-sm bg-[#a8e6cf]/30">
    © 2024 數學學習工具 | 使用 Chiron GoRound TC 字型
  </div>

  <!-- 
    ============================================================
    = JAVASCRIPT - (與原始檔案相同，未做修改)
    ============================================================
  -->
  <script>
    const defaultConfig = {
      main_title: "分數運算練習題",
      step1_title: "理解「負負得正」",
      step1_desc: "減去一個負數，等於加上這個數的相反數",
      step1_note: "💡 <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">負負得正</span>：兩個負號相遇變成正號",
      step2_title: "確認分母相同",
      step2_desc: "兩個分數的分母都是 8，可以直接計算分子",
      step2_note: "✓ <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">只需計算分子</span>",
      step3_title: "計算分子",
      step3_desc: "將分子相加：-5 + 9 = 4",
      step3_note: "📝 <span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">-5 + 9 = 4</span>（負數加正數）",
      step4_title: "判斷是否需要約分",
      step4_desc: "找出分子和分母的公因數",
      step4_note: "🔍 4 和 8 的<span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">最大公因數是 4</span>",
      step5_title: "約分得到最簡分數",
      step5_desc: "分子和分母同時除以最大公因數 4",
      step5_note: "✨ 約分後得到<span class=\"highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]\">最簡分數</span>",
      answer_label: "最終答案：",
      footer_text: "© 2024 數學學習工具 | 使用 Chiron GoRound TC 字型",
      primary_color: "#4db8a0",
      secondary_color: "#7fc7af",
      background_color: "#f8fffe",
      text_color: "#2d5f52",
      accent_color: "#d0f0e8"
    };

    // (注意：onConfigChange 函數中的樣式更新現在會與 Tailwind 衝突)
    // (但由於它是 SDK 的一部分，我們保留它)
    async function onConfigChange(config) {
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('step1-title').textContent = config.step1_title || defaultConfig.step1_title;
      document.getElementById('step1-desc').textContent = config.step1_desc || defaultConfig.step1_desc;
      document.getElementById('step1-note').innerHTML = config.step1_note || defaultConfig.step1_note;
      document.getElementById('step2-title').textContent = config.step2_title || defaultConfig.step2_title;
      document.getElementById('step2-desc').textContent = config.step2_desc || defaultConfig.step2_desc;
      document.getElementById('step2-note').innerHTML = config.step2_note || defaultConfig.step2_note;
      document.getElementById('step3-title').textContent = config.step3_title || defaultConfig.step3_title;
      document.getElementById('step3-desc').textContent = config.step3_desc || defaultConfig.step3_desc;
      document.getElementById('step3-note').innerHTML = config.step3_note || defaultConfig.step3_note;
      document.getElementById('step4-title').textContent = config.step4_title || defaultConfig.step4_title;
      document.getElementById('step4-desc').textContent = config.step4_desc || defaultConfig.step4_desc;
      document.getElementById('step4-note').innerHTML = config.step4_note || defaultConfig.step4_note;
      document.getElementById('step5-title').textContent = config.step5_title || defaultConfig.step5_title;
      document.getElementById('step5-desc').textContent = config.step5_desc || defaultConfig.step5_desc;
      document.getElementById('step5-note').innerHTML = config.step5_note || defaultConfig.step5_note;
      document.getElementById('answer-label').textContent = config.answer_label || defaultConfig.answer_label;
      document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;

      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;

      // 這些 JS 驅動的樣式會覆蓋 Tailwind，這是 SDK 的預期行為
      document.body.style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${accentColor} 100%)`;
      document.querySelector('h1').style.color = primaryColor;
      document.querySelector('.lg\\:w-80').style.background = `linear-gradient(180deg, ${secondaryColor} 0%, ${primaryColor} 100%)`; // 選擇器更新為 Tailwind 的
      document.querySelector('.flex-1').style.background = backgroundColor;
      
      document.querySelectorAll('.problem').forEach(problem => {
        problem.style.color = textColor;
      });
      
      document.querySelectorAll('.problem-number').forEach(num => {
        num.style.color = primaryColor;
      });
      
      document.querySelectorAll('.step').forEach(step => {
        step.style.borderLeftColor = primaryColor;
      });
      
      document.querySelectorAll('.step-number').forEach(num => {
        num.style.background = primaryColor;
      });
      
      document.querySelectorAll('.step-title').forEach(title => {
        title.style.color = primaryColor;
      });
      
      document.querySelectorAll('.step-content').forEach(content => {
        content.style.color = textColor;
      });
      
      document.querySelectorAll('.highlight').forEach(highlight => {
        highlight.style.background = accentColor;
        highlight.style.color = textColor;
      });
      
      document.querySelectorAll('.math-expression').forEach(expr => {
        expr.style.background = accentColor;
      });
      
      document.querySelectorAll('.final-answer').forEach(answer => {
        answer.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      });
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || defaultConfig.main_title],
        ["step1_title", config.step1_title || defaultConfig.step1_title],
        ["step1_desc", config.step1_desc || defaultConfig.step1_desc],
        ["step1_note", config.step1_note || defaultConfig.step1_note],
        ["step2_title", config.step2_title || defaultConfig.step2_title],
        ["step2_desc", config.step2_desc || defaultConfig.step2_desc],
        ["step2_note", config.step2_note || defaultConfig.step2_note],
        ["step3_title", config.step3_title || defaultConfig.step3_title],
        ["step3_desc", config.step3_desc || defaultConfig.step3_desc],
        ["step3_note", config.step3_note || defaultConfig.step3_note],
        ["step4_title", config.step4_title || defaultConfig.step4_title],
        ["step4_desc", config.step4_desc || defaultConfig.step4_desc],
        ["step4_note", config.step4_note || defaultConfig.step4_note],
        ["step5_title", config.step5_title || defaultConfig.step5_title],
        ["step5_desc", config.step5_desc || defaultConfig.step5_desc],
        ["step5_note", config.step5_note || defaultConfig.step5_note],
        ["answer_label", config.answer_label || defaultConfig.answer_label],
        ["footer_text", config.footer_text || defaultConfig.footer_text]
      ]);
    }

    function showProblem(problemNumber) {
      // 移除所有題目的 active 狀態
      document.querySelectorAll('.problem').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.problem-content').forEach(p => p.classList.remove('active'));
      
      // 添加選中題目的 active 狀態
      document.querySelectorAll('.problem')[problemNumber - 1].classList.add('active');
      document.getElementById('problem' + problemNumber).classList.add('active');
      
      // 重新渲染數學符號
      setTimeout(() => {
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ],
          throwOnError: false
        });
      }, 50); // 給予一點延遲確保 DOM 更新
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        throwOnError: false
      });
    });

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
</body>
</html>