<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†æ•¸çš„å››å‰‡é‹ç®—</title>
    <link rel="icon" href="dog.png" type="image/png">
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- è¼‰å…¥ KaTeX (æ•¸å­¸å…¬å¼) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" xintegrity="sha384-KiWOvVjnN8qwKMvhioyej1N4Kfc8JsurIYCFTYdjCNq1lWMnYDPvrHotKcSESSZN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" xintegrity="sha384-hIoBPJpTadx52GjLhpKmqxNtUVAAiY9bS+eCacT5nLzIPhOUPXmKqtSgwGsaCdgM" crossorigin="anonymous"></script>

    <!-- è¼‰å…¥ Chiron GoRound TC å­—å‹ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: "Chiron GoRound TC", sans-serif;
            font-weight: 400;
            font-style: normal;
            /* é¿å… KaTeX å­—å‹è¢«è¦†è“‹ */
            --katex-font-family: 'KaTeX_Main', serif;
        }
        
        /* è‡ªå®šç¾©åˆ†æ•¸æ¨£å¼ (èˆŠ) */
        .fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            margin: 0 0.5rem;
        }
        .fraction .numerator {
            border-bottom: 2px solid black;
            padding: 0 0.25rem;
            display: block;
        }
        .fraction .denominator {
            padding: 0 0.25rem;
            display: block;
        }
        /* è² è™Ÿæ¨£å¼ (èˆŠ) */
        .negative-sign {
            font-size: 1.5rem;
            font-weight: bold;
            vertical-align: middle;
            margin-right: 0.1rem;
        }
        /* éš±è— radio button (èˆŠ) */
        input[type="radio"] {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }
        /* è‡ªå®šç¾© radio button æ¨™ç±¤ (èˆŠ) */
        input[type="radio"] + label {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border: 2px solid #cbd5e1;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            margin: 0 0.25rem;
            display: inline-block;
        }
        /* é¸ä¸­æ™‚çš„æ¨£å¼ (èˆŠ) */
        input[type="radio"]:checked + label {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        /* æ¯”è¼ƒç¬¦è™Ÿä¸‹æ‹‰é¸å–® (èˆŠ) */
        select.comparison-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 8l4 4 4-4"/></svg>');
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        /* --- ä»¥ä¸‹ç‚ºæ–°åŠ å…¥çš„æ¨£å¼ --- */

        /* è¢å…‰ç­† highlight æ•ˆæœ */
        .highlight {
            background-color: #fef08a; /* Tailwind amber-200 */
            padding: 0.1em 0.25em;
            border-radius: 0.25em;
            font-weight: 600;
        }

        /* éš±è—/é¡¯ç¤º çš„ CSS class */
        .hidden {
            display: none;
        }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            padding: 0.6rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: none;
            cursor: pointer;
        }
        .btn-primary {
            background-color: #0284c7; /* sky-600 */
            color: white;
        }
        .btn-primary:hover {
            background-color: #0369a1; /* sky-700 */
        }
        .btn-primary:disabled {
            background-color: #e0f2fe; /* sky-100 */
            color: #7dd3fc; /* sky-300 */
            cursor: not-allowed;
        }
        .btn-secondary {
            background-color: #e5e7eb; /* gray-200 */
            color: #374151; /* gray-700 */
        }
        .btn-secondary:hover {
            background-color: #d1d5db; /* gray-300 */
        }
        
        /* è¼¸å…¥æ¡†æ¨£å¼ */
        .select-symbol {
            font-size: 1.5rem; /* 2xl */
            border: 2px solid #cbd5e1; /* gray-300 */
            border-radius: 0.5rem; /* lg */
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            padding: 0.25rem 0.5rem;
            font-family: "Chiron GoRound TC", sans-serif;
            font-weight: 700;
        }
        
        /* æ•¸å­¸å…¬å¼çš„å®¹å™¨ */
        .math-display {
            font-size: 1.875rem; /* 3xl */
            padding: 0 0.5rem;
            color: #1e3a8a; /* blue-900 */
        }
        
        /* å­¸ç¿’å¡ç‰‡ */
        .learning-card {
            background-color: white;
            padding: 1.5rem;
            border-radius: 1rem; /* xl */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            margin-bottom: 2rem;
        }
        
        /* æç¤ºæ¡† */
        .hint-box {
            color: #0c4a6e; /* sky-900 */
            background-color: #f0f9ff; /* sky-50 */
            padding: 0.75rem 1rem;
            border-radius: 0.5rem; /* lg */
            margin-bottom: 1rem;
            border: 1px solid #bae6fd; /* sky-200 */
        }
        
        /* å›é¥‹è¨Šæ¯ */
        .feedback {
            margin-top: 1rem;
            text-align: center;
            font-size: 1.125rem; /* lg */
            font-weight: 600;
            height: 2rem; /* ä¿æŒç©ºé–“ï¼Œé¿å…è·³å‹• */
        }
        .feedback-success {
            color: #15803d; /* green-700 */
        }
        .feedback-error {
            color: #b91c1c; /* red-700 */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="flex min-h-screen">
        <!-- å°è¦½åˆ— (Sidebar) -->
        <nav class="w-60 bg-gray-800 text-white p-6 fixed h-full shadow-lg">
            <h2 class="text-2xl font-semibold mb-8 text-white">åˆ†æ•¸çš„å››å‰‡é‹ç®—</h2>
            <ul class="space-y-4">
                <li>
                    <a href="#concept1" class="text-lg text-gray-300 hover:text-white transition-colors duration-200 block p-2 rounded-md hover:bg-gray-700">
                        ä¸€ã€æœ€ç°¡åˆ†æ•¸
                    </a>
                </li>
                <li>
                    <a href="#concept2" class="text-lg text-gray-300 hover:text-white transition-colors duration-200 block p-2 rounded-md hover:bg-gray-700">
                        äºŒã€æ­£åˆ†æ•¸çš„æ¯”è¼ƒ
                    </a>
                </li>
                <li>
                    <a href="#concept3" class="text-lg text-gray-300 hover:text-white transition-colors duration-200 block p-2 rounded-md hover:bg-gray-700">
                        ä¸‰ã€è² åˆ†æ•¸çš„æ¯”è¼ƒ
                    </a>
                </li>
            </ul>
        </nav>

        <!-- ä¸»è¦å…§å®¹ -->
        <main class="flex-1 ml-60 p-8">
            
            <!-- Section 1: æœ€ç°¡åˆ†æ•¸ -->
            <div id="concept1" class="bg-white p-6 sm:p-10 rounded-xl shadow-lg w-full max-w-2xl mb-10">
                
                <div class="flex justify-between items-start mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">ä¸€ã€æœ€ç°¡åˆ†æ•¸</h1>
                    <span class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full whitespace-nowrap">å°æ‡‰èª²æœ¬ï¼šP.129 éš¨å ‚</span>
                </div>
                
                <p class="text-lg text-gray-700 mb-8">
                    åˆ¤æ–·ä¸‹åˆ—å„åˆ†æ•¸æ˜¯å¦ç‚ºæœ€ç°¡åˆ†æ•¸ï¼Œå¦‚æœä¸æ˜¯ï¼Œè«‹åŒ–æˆæœ€ç°¡åˆ†æ•¸ã€‚
                </p>

                <!-- å•é¡Œåˆ—è¡¨ 1 -->
                <div class="space-y-8">
                    <!-- å•é¡Œ 1 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="1">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center">
                                <span class="text-xl font-semibold mr-2">1.</span>
                                <span class="negative-sign">-</span>
                                <div class="fraction text-xl"><span class="numerator">4</span><span class="denominator">5</span></div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <input type="radio" id="q1-yes" name="q1-simple" value="yes"><label for="q1-yes">æ˜¯</label>
                                <input type="radio" id="q1-no" name="q1-simple" value="no"><label for="q1-no">å¦</label>
                            </div>
                            <div class="flex items-center w-full sm:w-auto mt-4 sm:mt-0">
                                <label for="q1-simplified" class="text-gray-700 mr-2 whitespace-nowrap">åŒ–ç°¡å¾Œï¼š</label>
                                <input type="text" id="q1-simplified" name="q1-simplified" class="form-input w-full max-w-xs border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <div id="feedback-1" class="text-lg font-medium"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="1">æª¢æ ¸</button>
                        </div>
                    </div>
                    <!-- å•é¡Œ 2 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="2">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center">
                                <span class="text-xl font-semibold mr-2">2.</span>
                                <div class="fraction text-xl"><span class="numerator">55</span><span class="denominator">66</span></div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <input type="radio" id="q2-yes" name="q2-simple" value="yes"><label for="q2-yes">æ˜¯</label>
                                <input type="radio" id="q2-no" name="q2-simple" value="no"><label for="q2-no">å¦</label>
                            </div>
                            <div class="flex items-center w-full sm:w-auto mt-4 sm:mt-0">
                                <label for="q2-simplified" class="text-gray-700 mr-2 whitespace-nowrap">åŒ–ç°¡å¾Œï¼š</label>
                                <input type="text" id="q2-simplified" name="q2-simplified" class="form-input w-full max-w-xs border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <div id="feedback-2" class="text-lg font-medium"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="2">æª¢æ ¸</button>
                        </div>
                    </div>
                    <!-- å•é¡Œ 3 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="3">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center">
                                <span class="text-xl font-semibold mr-2">3.</span>
                                <div class="fraction text-xl"><span class="numerator">39</span><span class="denominator">91</span></div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <input type="radio" id="q3-yes" name="q3-simple" value="yes"><label for="q3-yes">æ˜¯</label>
                                <input type="radio" id="q3-no" name="q3-simple" value="no"><label for="q3-no">å¦</label>
                            </div>
                            <div class="flex items-center w-full sm:w-auto mt-4 sm:mt-0">
                                <label for="q3-simplified" class="text-gray-700 mr-2 whitespace-nowrap">åŒ–ç°¡å¾Œï¼š</label>
                                <input type="text" id="q3-simplified" name="q3-simplified" class="form-input w-full max-w-xs border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <div id="feedback-3" class="text-lg font-medium"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="3">æª¢æ ¸</button>
                        </div>
                    </div>
                    <!-- å•é¡Œ 4 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="4">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center">
                                <span class="text-xl font-semibold mr-2">4.</span>
                                <span class="negative-sign">-</span>
                                <div class="fraction text-xl"><span class="numerator">25</span><span class="denominator">36</span></div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <input type="radio" id="q4-yes" name="q4-simple" value="yes"><label for="q4-yes">æ˜¯</label>
                                <input type="radio" id="q4-no" name="q4-simple" value="no"><label for="q4-no">å¦</label>
                            </div>
                            <div class="flex items-center w-full sm:w-auto mt-4 sm:mt-0">
                                <label for="q4-simplified" class="text-gray-700 mr-2 whitespace-nowrap">åŒ–ç°¡å¾Œï¼š</label>
                                <input type="text" id="q4-simplified" name="q4-simplified" class="form-input w-full max-w-xs border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <div id="feedback-4" class="text-lg font-medium"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="4">æª¢æ ¸</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: æ­£åˆ†æ•¸çš„æ¯”è¼ƒå¤§å° -->
            <div id="concept2" class="bg-white p-6 sm:p-10 rounded-xl shadow-lg w-full max-w-2xl mb-10">
                <div class="flex justify-between items-start mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">äºŒã€æ­£åˆ†æ•¸çš„æ¯”è¼ƒå¤§å°</h1>
                    <span class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full whitespace-nowrap">å°æ‡‰èª²æœ¬ï¼šP.130 ä¾‹ 1</span>
                </div>
                
                <p class="text-lg text-gray-700 mb-8">
                    æ¯”è¼ƒä¸‹åˆ—å„çµ„åˆ†æ•¸çš„å¤§å°ã€‚
                </p>

                <!-- å•é¡Œåˆ—è¡¨ 2 -->
                <div class="space-y-8">
                    <!-- å•é¡Œ 5 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="5">
                        <div class="flex flex-wrap items-center justify-center gap-4">
                            <span class="text-xl font-semibold mr-2 sm:mr-4">1.</span>
                            <div class="fraction text-xl"><span class="numerator">1</span><span class="denominator">3</span></div>
                            <select id="q5-compare" name="q5-compare" class="comparison-select border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xl font-bold p-2 h-12 w-20 text-center">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <div class="fraction text-xl"><span class="numerator">1</span><span class="denominator">4</span></div>
                        </div>
                        <div class="mt-3 text-center">
                            <div id="feedback-5" class="text-lg font-medium text-center mb-3"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="5">æª¢æ ¸</button>
                        </div>
                    </div>
                    <!-- å•é¡Œ 6 -->
                    <div class="question-item p-4 border border-gray-200 rounded-lg" data-question-id="6">
                        <div class="flex flex-wrap items-center justify-center gap-4">
                            <span class="text-xl font-semibold mr-2 sm:mr-4">2.</span>
                            <div class="fraction text-xl"><span class="numerator">9</span><span class="denominator">11</span></div>
                            <select id="q6-compare" name="q6-compare" class="comparison-select border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xl font-bold p-2 h-12 w-20 text-center">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <div class="fraction text-xl"><span class="numerator">6</span><span class="denominator">11</span></div>
                        </div>
                        <div class="mt-3 text-center">
                            <div id="feedback-6" class="text-lg font-medium text-center mb-3"></div>
                            <button class="check-single-btn bg-blue-500 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition-transform active:scale-95" data-question-id="6">æª¢æ ¸</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: è² åˆ†æ•¸çš„æ¯”è¼ƒå¤§å° (æ–°åŠ å…¥çš„) -->
            <div id="concept3" class="w-full max-w-2xl mb-10">
                <!-- æ¨™é¡Œ -->
                <header class="text-center my-6">
                    <h1 class="text-4xl font-bold text-sky-800">è² åˆ†æ•¸çš„æ¯”è¼ƒå¤§å°</h1>
                    <p class="text-lg text-gray-600 mt-2">å°æ‡‰èª²æœ¬ï¼šP.131 ä¾‹ 2</p>
                </header>
        
                <!-- 
                    å¡ç‰‡ 1ï¼šç¬¬ 1 é¡Œ
                    æ¯”è¼ƒ -2/5 å’Œ -2/7 (åŒåˆ†å­)
                -->
                <div class="learning-card">
                    <!-- é¡Œç›®åç¨± -->
                    <h3 class="text-2xl font-bold mb-4 flex items-center">
                        ç¬¬ 1 é¡Œï¼šæ¯”è¼ƒ <span id="q1-math" class="math-display"></span>
                    </h3>
        
                    <!-- é€²åº¦æ¢ -->
                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                        <div id="progress1" class="bg-sky-500 h-3 rounded-full" style="width: 33.3%; transition: width 0.5s;"></div>
                    </div>
                    <p id="progress-text1" class="text-sm text-gray-500 text-center mb-4">ç¬¬ 1 æ­¥ / å…± 3 æ­¥</p>
        
                    <!-- æ­¥é©Ÿ 1-1ï¼šæ¯”è¼ƒæ­£æ•¸ -->
                    <div id="p1-step1">
                        <p class="text-lg mb-4">
                            <b>æ­¥é©Ÿ 1ï¼š</b>å…ˆå¿˜æ‰<span class="highlight">è² è™Ÿ</span>ï¼Œæˆ‘å€‘ä¾†æ¯”è¼ƒå®ƒå€‘çš„ã€Œæ­£æ•¸ã€ï¼š
                        </p>
                        <div class="hint-box">
                            <b>å°æç¤ºğŸ’¡ï¼š</b>ç•¶ã€Œåˆ†å­ã€ç›¸åŒæ™‚ (éƒ½æ˜¯ 2)ï¼Œã€Œåˆ†æ¯ã€è¶Š <b class="text-red-600">å°</b>ï¼Œä»£è¡¨åˆ‡å¾—è¶Š <b class="text-red-600">å¤§</b> å¡Šï¼Œæ‰€ä»¥å€¼å°±è¶Š <b class="text-red-600">å¤§</b>ã€‚
                        </div>
                        <div class="flex items-center justify-center space-x-2 sm:space-x-4 my-6">
                            <span id="p1-s1-q1" class="math-display"></span>
                            <select id="p1-s1-answer" class="select-symbol">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <span id="p1-s1-q2" class="math-display"></span>
                            <button onclick="checkAnswer('p1', 1)" class="btn btn-primary">æª¢æŸ¥ç­”æ¡ˆ</button>
                        </div>
                    </div>
        
                    <!-- æ­¥é©Ÿ 1-2ï¼šå¥—ç”¨è² æ•¸è¦å‰‡ -->
                    <div id="p1-step2" class="hidden">
                        <p class="text-lg mb-4">
                            <b>æ­¥é©Ÿ 2ï¼š</b>å¤ªæ£’äº†ï¼<span id="p1-s1-result" class="highlight"></span>
                        </p>
                        <p class="text-lg mb-4">
                            ç¾åœ¨ï¼Œæˆ‘å€‘æŠŠ<span class="highlight">è² è™Ÿ</span>åŠ å›å»ã€‚
                        </p>
                        <div class="hint-box">
                            <b>é‡é»è§€å¿µğŸ’¡ï¼š</b>æ­£æ•¸æ™‚è¶Šå¤§ï¼ŒåŠ ä¸Šè² è™Ÿå¾Œï¼Œåè€Œæœƒè¶Š <b class="text-red-600">å°</b>ã€‚
                            (å¤§å°é—œä¿‚æœƒ<b class="text-red-600">å®Œå…¨é¡›å€’</b>ï¼)
                        </div>
                        <div class="flex items-center justify-center space-x-2 sm:space-x-4 my-6">
                            <span id="p1-s2-q1" class="math-display"></span>
                            <select id="p1-s2-answer" class="select-symbol">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <span id="p1-s2-q2" class="math-display"></span>
                            <button onclick="checkAnswer('p1', 2)" class="btn btn-primary">æª¢æŸ¥ç­”æ¡ˆ</button>
                        </div>
                    </div>
                    
                    <!-- æ­¥é©Ÿ 1-3ï¼šå®Œæˆç¸½çµ -->
                    <div id="p1-step3" class="hidden text-center">
                        <h4 class="text-2xl font-bold text-green-700 mb-4">ğŸ‰ åšå¾—å¥½ï¼ç¬¬ä¸€é¡Œå®Œæˆäº†ï¼</h4>
                        <p class="text-lg bg-green-50 p-4 rounded-lg">
                            ç¸½çµï¼šå› ç‚º <span id="p1-final-positive" class="font-bold"></span>ï¼Œ
                            <br>
                            æ‰€ä»¥ <span id="p1-final-negative" class="font-bold"></span>ã€‚
                        </p>
                        <button onclick="resetProblem('p1')" class="btn btn-secondary mt-6">å†åšä¸€æ¬¡</button>
                    </div>
        
                    <!-- å›é¥‹è¨Šæ¯å€ -->
                    <div id="feedback-p1" class="feedback"></div>
                </div>
        
                <!-- 
                    å¡ç‰‡ 2ï¼šç¬¬ 3 é¡Œ
                    æ¯”è¼ƒ -4/5 å’Œ -3/4 (ä¸åŒåˆ†å­åˆ†æ¯)
                -->
                <div class="learning-card">
                    <!-- é¡Œç›®åç¨± -->
                    <h3 class="text-2xl font-bold mb-4 flex items-center">
                        ç¬¬ 3 é¡Œï¼šæ¯”è¼ƒ <span id="q3-math" class="math-display"></span>
                    </h3>
        
                    <!-- é€²åº¦æ¢ -->
                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                        <div id="progress3" class="bg-sky-500 h-3 rounded-full" style="width: 33.3%; transition: width 0.5s;"></div>
                    </div>
                    <p id="progress-text3" class="text-sm text-gray-500 text-center mb-4">ç¬¬ 1 æ­¥ / å…± 3 æ­¥</p>
        
                    <!-- æ­¥é©Ÿ 3-1ï¼šæ¯”è¼ƒæ­£æ•¸ -->
                    <div id="p3-step1">
                        <p class="text-lg mb-4">
                            <b>æ­¥é©Ÿ 1ï¼š</b>å…ˆå¿˜æ‰<span class="highlight">è² è™Ÿ</span>ï¼Œæ¯”è¼ƒå®ƒå€‘çš„ã€Œæ­£æ•¸ã€ï¼š
                        </p>
                        <div class="hint-box">
                            <b>å°æç¤ºğŸ’¡ï¼š</b>åˆ†æ¯å’Œåˆ†å­éƒ½ä¸ä¸€æ¨£æ™‚ï¼Œè¦å…ˆã€Œ<b>é€šåˆ†</b>ã€ï¼
                            <br>
                            5 å’Œ 4 çš„å…¬åˆ†æ¯æ˜¯ <b>20</b>ã€‚
                            <div class="mt-2 flex justify-around">
                                <span id="p3-s1-convert1" class="font-bold"></span>
                                <span id="p3-s1-convert2" class="font-bold"></span>
                            </div>
                        </div>
                        <div class="flex items-center justify-center space-x-2 sm:space-x-4 my-6">
                            <span id="p3-s1-q1" class="math-display"></span>
                            <select id="p3-s1-answer" class="select-symbol">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <span id="p3-s1-q2" class="math-display"></span>
                            <button onclick="checkAnswer('p3', 1)" class="btn btn-primary">æª¢æŸ¥ç­”æ¡ˆ</button>
                        </div>
                    </div>
        
                    <!-- æ­¥é©Ÿ 3-2ï¼šå¥—ç”¨è² æ•¸è¦å‰‡ -->
                    <div id="p3-step2" class="hidden">
                        <p class="text-lg mb-4">
                            <b>æ­¥é©Ÿ 2ï¼š</b>å®Œå…¨æ­£ç¢ºï¼<span id="p3-s1-result" class="highlight"></span>
                        </p>
                        <p class="text-lg mb-4">
                            ç¾åœ¨ï¼Œæˆ‘å€‘æŠŠ<span class="highlight">è² è™Ÿ</span>åŠ å›å»ã€‚
                        </p>
                        <div class="hint-box">
                            <b>é‡é»è§€å¿µğŸ’¡ï¼š</b>å¤§å°é—œä¿‚æœƒ<b class="text-red-600">å®Œå…¨é¡›å€’</b>ï¼
                        </div>
                        <div class="flex items-center justify-center space-x-2 sm:space-x-4 my-6">
                            <span id="p3-s2-q1" class="math-display"></span>
                            <select id="p3-s2-answer" class="select-symbol">
                                <option value="">?</option>
                                <option value=">">&gt;</option>
                                <option value="<">&lt;</option>
                                <option value="=">=</option>
                            </select>
                            <span id="p3-s2-q2" class="math-display"></span>
                            <button onclick="checkAnswer('p3', 2)" class="btn btn-primary">æª¢æŸ¥ç­”æ¡ˆ</button>
                        </div>
                    </div>
                    
                    <!-- æ­¥é©Ÿ 3-3ï¼šå®Œæˆç¸½çµ -->
                    <div id="p3-step3" class="hidden text-center">
                        <h4 class="text-2xl font-bold text-green-700 mb-4">ğŸ‰ è¶…å²å®³ï¼ä½ ä¹Ÿå®Œæˆå›‰ï¼</h4>
                        <p class="text-lg bg-green-50 p-4 rounded-lg">
                            ç¸½çµï¼šå› ç‚º <span id="p3-final-positive" class="font-bold"></span>ï¼Œ
                            <br>
                            æ‰€ä»¥ <span id="p3-final-negative" class="font-bold"></span>ã€‚
                        </p>
                        <button onclick="resetProblem('p3')" class="btn btn-secondary mt-6">å†åšä¸€æ¬¡</button>
                    </div>
        
                    <!-- å›é¥‹è¨Šæ¯å€ -->
                    <div id="feedback-p3" class="feedback"></div>
                </div>
            </div>


            <!-- å…¨å±€é‡æ–°ä½œç­”æŒ‰éˆ• -->
            <div class="mt-10 text-center max-w-2xl">
                <button id="reset-btn" class="bg-gray-500 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-600 transition-colors duration-200 shadow-md">
                    å…¨éƒ¨é‡æ–°ä½œç­”
                </button>
            </div>

        </main>
    </div>

    <script>
        // --- èˆŠçš„ SCRIPT (Section 1 & 2) ---

        // æ­£ç¢ºç­”æ¡ˆ (Section 1 & 2)
        const correctAnswers = {
            q1: { isSimplest: "yes", simplified: "" },
            q2: { isSimplest: "no", simplified: "5/6" },
            q3: { isSimplest: "no", simplified: "3/7" },
            q4: { isSimplest: "yes", simplified: "" },
            q5: { compare: ">" }, // 1/3 > 1/4
            q6: { compare: ">" }  // 9/11 > 6/11
        };
        
        const resetButton = document.getElementById('reset-btn');

        // é€é¡Œæª¢æ ¸çš„äº‹ä»¶ç›£è½ (Section 1 & 2)
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('check-single-btn')) {
                const questionId = e.target.getAttribute('data-question-id');
                checkQuestion(questionId);
            }
        });

        // æª¢æ ¸å–®ä¸€å•é¡Œçš„å‡½æ•¸ (Section 1 & 2)
        function checkQuestion(id) {
            const questionId = `q${id}`;
            const answer = correctAnswers[questionId];
            const feedbackEl = document.getElementById(`feedback-${id}`);
            const questionItemEl = feedbackEl.closest('.question-item');
            let isCorrect = false;

            if (id <= 4) { // è™•ç†æœ€ç°¡åˆ†æ•¸å•é¡Œ (1-4)
                const selectedRadio = document.querySelector(`input[name="${questionId}-simple"]:checked`);
                const userIsSimplest = selectedRadio ? selectedRadio.value : null;
                const userSimplified = document.getElementById(`${questionId}-simplified`).value.trim().replace(/\s+/g, '');

                if (answer.isSimplest === "yes") {
                    isCorrect = userIsSimplest === "yes";
                } else {
                    const simplifiedAnswerCheck = userSimplified === answer.simplified;
                    isCorrect = (userIsSimplest === "no" && simplifiedAnswerCheck);
                }

                // é¡¯ç¤ºå›é¥‹
                if (isCorrect) {
                    feedbackEl.textContent = 'âœ”ï¸ ç­”å°äº†ï¼';
                    feedbackEl.className = 'text-lg font-medium text-green-600';
                    questionItemEl.classList.remove('border-red-400');
                    questionItemEl.classList.add('border-green-400');
                } else {
                    feedbackEl.textContent = `âŒ ç­”éŒ¯äº†ã€‚æ­£ç¢ºç­”æ¡ˆï¼š${answer.isSimplest === 'yes' ? 'æ˜¯' : 'å¦'}${answer.simplified ? 'ï¼ŒåŒ–ç°¡ç‚º ' + answer.simplified : ''}`;
                    feedbackEl.className = 'text-lg font-medium text-red-600';
                    questionItemEl.classList.remove('border-green-400');
                    questionItemEl.classList.add('border-red-400');
                }

            } else { // è™•ç†æ¯”è¼ƒå¤§å°å•é¡Œ (5-6)ï¼Œä½¿ç”¨ä¸‹æ‹‰é¸å–®
                const compareSelect = document.getElementById(`${questionId}-compare`);
                const userCompare = compareSelect.value;

                isCorrect = (userCompare === answer.compare);

                if (isCorrect) {
                    feedbackEl.textContent = 'âœ”ï¸ ç­”å°äº†ï¼';
                    feedbackEl.className = 'text-lg font-medium text-center text-green-600 mb-3';
                    questionItemEl.classList.remove('border-red-400');
                    questionItemEl.classList.add('border-green-400');
                } else {
                    feedbackEl.textContent = `âŒ ç­”éŒ¯äº†ã€‚æ­£ç¢ºç­”æ¡ˆï¼š${answer.compare}`;
                    feedbackEl.className = 'text-lg font-medium text-center text-red-600 mb-3';
                    questionItemEl.classList.remove('border-green-400');
                    questionItemEl.classList.add('border-red-400');
                }
            }
        }


        // å…¨å±€é‡æ–°ä½œç­” (Section 1 & 2 & 3)
        resetButton.addEventListener('click', () => {
            // --- é‡è¨­ Section 1 & 2 ---
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('select.comparison-select').forEach(select => {
                select.selectedIndex = 0; 
            });
            for (let i = 1; i <= 6; i++) {
                const feedbackEl = document.getElementById(`feedback-${i}`);
                if (feedbackEl) {
                    if (i <= 4) {
                        feedbackEl.textContent = '';
                        feedbackEl.className = 'text-lg font-medium';
                    } else {
                        feedbackEl.textContent = '';
                        feedbackEl.className = 'text-lg font-medium text-center mb-3';
                    }
                    const questionItemEl = feedbackEl.closest('.question-item');
                    questionItemEl.classList.remove('border-green-400', 'border-red-400');
                    questionItemEl.classList.add('border-gray-200');
                }
            }
            for (let i = 1; i <= 4; i++) {
                const simplifiedInput = document.getElementById(`q${i}-simplified`);
                if(simplifiedInput) {
                    simplifiedInput.disabled = false;
                    simplifiedInput.classList.remove('bg-gray-100');
                }
            }
            // --- é‡è¨­ Section 3 ---
            resetProblem('p1');
            resetProblem('p3');
        });

        // "æ˜¯/å¦" Radio
        document.querySelectorAll('input[name$="-simple"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const qNum = e.target.name.split('-')[0]; // 'q1', 'q2', etc.
                const simplifiedInput = document.getElementById(`${qNum}-simplified`);
                
                if (e.target.value === 'yes') {
                    simplifiedInput.value = '';
                    simplifiedInput.disabled = true;
                    simplifiedInput.classList.add('bg-gray-100');
                } else {
                    simplifiedInput.disabled = false;
                    simplifiedInput.classList.remove('bg-gray-100');
                }
            });
        });

        // è‡ªå®šç¾© alert å‡½æ•¸ (ç›®å‰æœªä½¿ç”¨)
        function showCustomAlert(message) {
            const backdrop = document.createElement('div');
            backdrop.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            const alertBox = document.createElement('div');
            alertBox.className = 'bg-white p-8 rounded-lg shadow-lg text-center max-w-sm';
            const messageEl = document.createElement('p');
            messageEl.textContent = message;
            messageEl.className = 'text-lg font-medium text-gray-800 mb-6';
            const closeButton = document.createElement('button');
            closeButton.textContent = 'å¤ªæ£’äº†ï¼';
            closeButton.className = 'bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200';
            alertBox.appendChild(messageEl);
            alertBox.appendChild(closeButton);
            backdrop.appendChild(alertBox);
            document.body.appendChild(backdrop);
            closeButton.onclick = () => document.body.removeChild(backdrop);
            backdrop.onclick = (e) => {
                if (e.target === backdrop) {
                    document.body.removeChild(backdrop);
                }
            };
        }

        // --- æ–°åŠ å…¥çš„ SCRIPT (Section 3) ---

        // ç­”æ¡ˆå„²å­˜ (Section 3)
        const answers = {
            p1: { step1: '>', step2: '<' },
            p3: { step1: '>', step2: '<' }
        };

        // é¡¯ç¤ºæ•¸å­¸å…¬å¼ (ä½¿ç”¨ KaTeX)
        function renderMath() {
            try {
                // å¡ç‰‡ 1 çš„é¡Œç›®
                katex.render("-\\frac{2}{5} \\square -\\frac{2}{7}", document.getElementById('q1-math'), { throwOnError: false });
                katex.render("\\frac{2}{5}", document.getElementById('p1-s1-q1'), { throwOnError: false });
                katex.render("\\frac{2}{7}", document.getElementById('p1-s1-q2'), { throwOnError: false });
                katex.render("-\\frac{2}{5}", document.getElementById('p1-s2-q1'), { throwOnError: false });
                katex.render("-\\frac{2}{7}", document.getElementById('p1-s2-q2'), { throwOnError: false });
                // å¡ç‰‡ 1 çš„çµæœ
                katex.render("\\frac{2}{5} > \\frac{2}{7}", document.getElementById('p1-s1-result'), { throwOnError: false });
                katex.render("\\frac{2}{5} > \\frac{2}{7}", document.getElementById('p1-final-positive'), { throwOnError: false });
                katex.render("-\\frac{2}{5} < -\\frac{2}{7}", document.getElementById('p1-final-negative'), { throwOnError: false });

                // å¡ç‰‡ 3 çš„é¡Œç›®
                katex.render("-\\frac{4}{5} \\square -\\frac{3}{4}", document.getElementById('q3-math'), { throwOnError: false });
                katex.render("\\frac{4}{5} = \\frac{16}{20}", document.getElementById('p3-s1-convert1'), { throwOnError: false });
                katex.render("\\frac{3}{4} = \\frac{15}{20}", document.getElementById('p3-s1-convert2'), { throwOnError: false });
                katex.render("\\frac{4}{5}", document.getElementById('p3-s1-q1'), { throwOnError: false });
                katex.render("\\frac{3}{4}", document.getElementById('p3-s1-q2'), { throwOnError: false });
                katex.render("-\\frac{4}{5}", document.getElementById('p3-s2-q1'), { throwOnError: false });
                katex.render("-\\frac{3}{4}", document.getElementById('p3-s2-q2'), { throwOnError: false });
                // å¡ç‰‡ 3 çš„çµæœ
                katex.render("\\frac{4}{5} > \\frac{3}{4}", document.getElementById('p3-s1-result'), { throwOnError: false });
                katex.render("\\frac{4}{5} > \\frac{3}{4}", document.getElementById('p3-final-positive'), { throwOnError: false });
                katex.render("-\\frac{4}{5} < -\\frac{3}{4}", document.getElementById('p3-final-negative'), { throwOnError: false });

            } catch (err) {
                console.error("KaTeX rendering error:", err);
            }
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', renderMath);

        // é¡¯ç¤ºå›é¥‹è¨Šæ¯ (Section 3)
        function showFeedback(problemId, message, isSuccess) {
            const feedbackEl = document.getElementById(`feedback-${problemId}`);
            feedbackEl.textContent = message;
            feedbackEl.className = 'feedback ' + (isSuccess ? 'feedback-success' : 'feedback-error');
            
            // éŒ¯èª¤è¨Šæ¯çŸ­æš«éœ‡å‹•æç¤º
            if (!isSuccess) {
                const card = feedbackEl.closest('.learning-card');
                card.style.transition = 'transform 0.1s';
                card.style.transform = 'translateX(5px)';
                setTimeout(() => { 
                    card.style.transform = 'translateX(-5px)'; 
                    setTimeout(() => { card.style.transform = ''; }, 100);
                }, 100);
            }
        }
        
        // éš±è—å›é¥‹è¨Šæ¯ (Section 3)
        function hideFeedback(problemId) {
            const feedbackEl = document.getElementById(`feedback-${problemId}`);
            feedbackEl.textContent = '';
        }

        // æª¢æŸ¥ç­”æ¡ˆçš„é€šç”¨å‡½å¼ (Section 3)
        function checkAnswer(problemId, step) {
            const userAnswer = document.getElementById(`${problemId}-s${step}-answer`).value;
            const correctAnswer = answers[problemId][`step${step}`];
            
            // éš±è—èˆŠçš„å›é¥‹
            hideFeedback(problemId);

            if (userAnswer === "") {
                showFeedback(problemId, 'è«‹é¸æ“‡ä¸€å€‹ç­”æ¡ˆå–”ï¼', false);
                return;
            }

            if (userAnswer === correctAnswer) {
                // ç­”æ¡ˆæ­£ç¢º
                showFeedback(problemId, 'å¤ªæ£’äº†ï¼ç¹¼çºŒåŠ æ²¹ï½', true);
                
                // ç¦ç”¨æŒ‰éˆ•é¿å…é‡è¤‡é»æ“Š
                const button = document.querySelector(`button[onclick="checkAnswer('${problemId}', ${step})"]`);
                button.disabled = true;

                // å»¶é² 1.5 ç§’å¾Œé€²å…¥ä¸‹ä¸€æ­¥
                setTimeout(() => {
                    hideFeedback(problemId);
                    
                    // éš±è—ç›®å‰æ­¥é©Ÿ
                    document.getElementById(`${problemId}-step${step}`).classList.add('hidden');
                    
                    const nextStep = step + 1;
                    const nextStepEl = document.getElementById(`${problemId}-step${nextStep}`);
                    
                    if (nextStepEl) {
                        // é¡¯ç¤ºä¸‹ä¸€æ­¥
                        nextStepEl.classList.remove('hidden');
                        // æ›´æ–°é€²åº¦æ¢
                        const progressPercentage = (nextStep / 3) * 100;
                        document.getElementById(`progress${problemId[1]}`).style.width = `${progressPercentage}%`;
                        document.getElementById(`progress-text${problemId[1]}`).textContent = `ç¬¬ ${nextStep} æ­¥ / å…± 3 æ­¥`;
                    }
                    
                }, 1500);

            } else {
                // ç­”æ¡ˆéŒ¯èª¤
                let hint = 'å—¯... å†æƒ³ä¸€æƒ³ï¼Ÿ';
                if (problemId === 'p1' && step === 1) hint = 'å†æƒ³ä¸€æƒ³ï¼Ÿåˆ†æ¯è¶Šå°ï¼Œå€¼è¶Šå¤§å–”ï¼';
                if (problemId === 'p3' && step === 1) hint = 'ä¸å°å–”ï¼Œé€šåˆ†å¾Œå†æ¯”è¼ƒçœ‹çœ‹ï¼';
                if (step === 2) hint = 'è¨˜å¾—å–”ï¼ŒåŠ ä¸Šè² è™Ÿï¼Œå¤§å°è¦é¡›å€’ï¼';
                
                showFeedback(problemId, hint, false);
            }
        }
        
        // é‡ç½®å•é¡Œ (Section 3)
        function resetProblem(problemId) {
            // éš±è—æ­¥é©Ÿ 2 å’Œ 3ï¼Œé¡¯ç¤ºæ­¥é©Ÿ 1
            document.getElementById(`${problemId}-step1`).classList.remove('hidden');
            document.getElementById(`${problemId}-step2`).classList.add('hidden');
            document.getElementById(`${problemId}-step3`).classList.add('hidden');
            
            // é‡è¨­é€²åº¦æ¢
            document.getElementById(`progress${problemId[1]}`).style.width = '33.3%';
            document.getElementById(`progress-text${problemId[1]}`).textContent = 'ç¬¬ 1 æ­¥ / å…± 3 æ­¥';
            
            // æ¸…ç©ºç­”æ¡ˆ
            const s1Answer = document.getElementById(`${problemId}-s1-answer`);
            if (s1Answer) s1Answer.value = '';
            
            const s2Answer = document.getElementById(`${problemId}-s2-answer`);
            if (s2Answer) s2Answer.value = '';
            
            // é‡æ–°å•Ÿç”¨æŒ‰éˆ•
            const buttons = document.querySelectorAll(`.learning-card button[onclick*="${problemId}"]`);
            buttons.forEach(btn => { btn.disabled = false; });
            
            // æ¸…ç©ºå›é¥‹
            hideFeedback(problemId);
        }

    </script>
</body>
</html>