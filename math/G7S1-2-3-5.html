<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç•°åˆ†æ¯åˆ†æ•¸é‹ç®—</title>
  <!-- KaTeX for Math Rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- SDK Scripts (from original) -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>

  <!-- Minimal styles for custom font and dynamic classes -->
  <style>
    /* æ‡‰ç”¨è‡ªè¨‚å­—é«” */
    body {
      font-family: 'Chiron GoRound TC', 'Noto Sans TC', sans-serif;
    }
    
    /* ç”¨æ–¼ JS åˆ‡æ›çš„å‹•æ…‹é¡åˆ¥ */
    .problem-content {
      display: none;
    }
    
    .problem-content.active {
      display: block;
    }

    /* .active ç‹€æ…‹çš„æ¨£å¼ */
    .problem.active {
      transform: translateX(4px);
      background: rgba(255, 255, 255, 0.95);
      border-color: #4db8a0;
      border-width: 3px;
      box-shadow: 0 6px 16px rgba(77, 184, 160, 0.4);
    }
    
    .problem.active .problem-number {
      color: #4db8a0;
      font-weight: 700;
    }
    
    .problem.active .katex {
      color: #2d5f52;
    }

    /* æ–°å¢çš„ hidden é¡åˆ¥ */
    .hidden {
      display: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-[#a8e6cf] to-[#dcedc1]">

  <!-- 
    ä¸»è¦å®¹å™¨
    - é è¨­ç‚ºå‚ç›´æ’åˆ— (è¡Œå‹•è£ç½®)
    - lg (1024px) ä»¥ä¸Šè®Šç‚ºæ°´å¹³æ’åˆ—
  -->
  <div class="flex flex-col lg:flex-row min-h-screen w-full bg-white shadow-none">

    <!-- 
      å´é‚Šæ¬„ (é¡Œç›®é¸æ“‡å€)
      - åœ¨ lg è£ç½®ä¸Šå›ºå®šå¯¬åº¦ç‚º 320px
      - åœ¨è¡Œå‹•è£ç½®ä¸Šå¯¬åº¦ç‚º 100%
    -->
    <div class="w-full lg:w-80 flex-shrink-0 bg-gradient-to-b from-[#a8e6cf] to-[#7fc7af] shadow-lg lg:shadow-xl flex flex-col">
      <h1 id="main-title" class="text-[#4db8a0] text-center text-3xl font-bold pt-8 pb-4 px-6">
        ç•°åˆ†æ¯çš„åˆ†æ•¸åŠ æ¸›
      </h1>
      <p class="text-center text-white/90 text-base px-6 pb-4">
        é»é¸é¡Œç›®æŸ¥çœ‹è©³ç´°è§£é¡Œæ­¥é©Ÿ
      </p>

      <!-- 
        é¡Œç›®ç¶²æ ¼
        - é è¨­ç‚ºæ°´å¹³æ»¾å‹• (è¡Œå‹•è£ç½®)
        - lg ä»¥ä¸Šè®Šç‚ºå‚ç›´æ’åˆ—å’Œæ»¾å‹•
      -->
      <div class="flex flex-row lg:flex-col gap-4 p-6 overflow-x-auto lg:overflow-x-hidden lg:overflow-y-auto">
        
        <!-- é¡Œç›® 1 -->
        <div class="problem active min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(1)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 1
          </div>
          <div class="math-display text-[1.5em]">
            $$\frac{5}{6} - \frac{4}{7}$$
          </div>
        </div>
        
        <!-- é¡Œç›® 2 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(2)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 2
          </div>
          <div class="math-display text-[1.5em]">
            $$\frac{9}{5} - \frac{5}{3}$$
          </div>
        </div>

        <!-- é¡Œç›® 3 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(3)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 3
          </div>
          <div class="math-display text-[1.5em]">
            $$\frac{3}{8} - \left(-\frac{4}{7}\right)$$
          </div>
        </div>

        <!-- é¡Œç›® 4 -->
        <div class="problem min-w-[200px] lg:min-w-0 flex-shrink-0 text-center text-lg text-[#2d5f52] p-5 bg-white/50 rounded-xl border-2 border-transparent transition-all duration-300 cursor-pointer hover:translate-x-1 hover:shadow-lg hover:border-[#4db8a0] hover:bg-white/80" onclick="showProblem(4)">
          <div class="problem-number font-semibold text-[#5fc9b0] mb-3 text-sm">
            é¡Œç›® 4
          </div>
          <div class="math-display text-[1.5em]">
            $$\frac{5}{8} - \left(-\frac{3}{4}\right)$$
          </div>
        </div>

      </div>
    </div> <!-- çµæŸ .sidebar -->

    <!-- 
      å…§å®¹å€åŸŸ (æ­¥é©Ÿè§£æå€)
      - flex-1 è®“å®ƒå¡«æ»¿å‰©é¤˜ç©ºé–“
      - p-6 (padding) åœ¨ md (768px) ä»¥ä¸Šè®Šç‚º p-12ï¼Œåœ¨ lg (1024px) ä»¥ä¸Šè®Šç‚º p-16
    -->
    <div class="flex-1 p-6 md:p-12 lg:p-16 bg-[#f8fffe] overflow-y-auto">

      <!-- é¡Œç›® 1 å…§å®¹ -->
      <div id="problem1" class="problem-content active">
        <div class="steps mt-8">
          
          <!-- æ­¥é©Ÿ 1 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span id="step1-title">æ‰¾å‡ºå…¬åˆ†æ¯</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step1-desc">åˆ†æ¯ 6 å’Œ 7 çš„æœ€å°å…¬å€æ•¸æ˜¯ 42ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{5}{6} - \frac{4}{7}$$
              </div>
              <p id="step1-note">ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">LCM(6, 7) = 42</span></p>
            </div>
          </div>

          <!-- æ­¥é©Ÿ 2 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span id="step2-title">é€²è¡Œæ“´åˆ†ï¼ˆé€šåˆ†ï¼‰</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step2-desc">å°‡å…©å€‹åˆ†æ•¸éƒ½è½‰æ›æˆä»¥ 42 ç‚ºåˆ†æ¯çš„åˆ†æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(\frac{5 \times 7}{6 \times 7}\right) - \left(\frac{4 \times 6}{7 \times 6}\right) = \frac{35}{42} - \frac{24}{42}$$
              </div>
              <p id="step2-note">âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åˆ†å­å’Œåˆ†æ¯åŒä¹˜ä»¥ä¸€å€‹æ•¸</span></p>
            </div>
          </div>
          
          <!-- æ­¥é©Ÿ 3 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span id="step3-title">è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step3-desc">åˆ†æ¯ç›¸åŒï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­ï¼š35 - 24 = 11</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{35 - 24}{42} = \frac{11}{42}$$
              </div>
              <p id="step3-note">ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">35 - 24 = 11</span></p>
            </div>
          </div>
          
          <!-- æ­¥é©Ÿ 4 -->
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span id="step4-title">åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p id="step4-desc">11 å’Œ 42 æ²’æœ‰å¤§æ–¼ 1 çš„å…¬å› æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{11}{42}$$
              </div>
              <p id="step4-note">ğŸ” <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">é€™å·²ç¶“æ˜¯æœ€ç°¡åˆ†æ•¸</span></p>
            </div>
          </div>
          
          <!-- æœ€çµ‚ç­”æ¡ˆ -->
          <div id="final-answer-1" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>
              <span id="answer-label">æœ€çµ‚ç­”æ¡ˆï¼š</span>
            </div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{11}{42}$$
            </div>
          </div>

          <!-- æ§åˆ¶æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
            <button id="next-step-1" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
              ä¸‹ä¸€æ­¥
            </button>
            <button id="reset-step-1" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
              é‡è¨­
            </button>
          </div>

        </div> <!-- çµæŸ .steps -->
      </div> <!-- çµæŸ #problem1 -->

      <!-- é¡Œç›® 2 å…§å®¹ -->
      <div id="problem2" class="problem-content">
        <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>æ‰¾å‡ºå…¬åˆ†æ¯</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ 5 å’Œ 3 çš„æœ€å°å…¬å€æ•¸æ˜¯ 15ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{9}{5} - \frac{5}{3}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">LCM(5, 3) = 15</span></p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>é€²è¡Œæ“´åˆ†ï¼ˆé€šåˆ†ï¼‰</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å°‡å…©å€‹åˆ†æ•¸éƒ½è½‰æ›æˆä»¥ 15 ç‚ºåˆ†æ¯çš„åˆ†æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(\frac{9 \times 3}{5 \times 3}\right) - \left(\frac{5 \times 5}{3 \times 5}\right) = \frac{27}{15} - \frac{25}{15}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åˆ†åˆ¥ä¹˜ä»¥ 3 å’Œ 5</span></p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ç›¸åŒï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­ï¼š27 - 25 = 2</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{27 - 25}{15} = \frac{2}{15}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">27 - 25 = 2</span></p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>2 å’Œ 15 æ²’æœ‰å¤§æ–¼ 1 çš„å…¬å› æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{2}{15}$$
              </div>
              <p>ğŸ” <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">é€™å·²ç¶“æ˜¯æœ€ç°¡åˆ†æ•¸</span></p>
            </div>
          </div>

          <div id="final-answer-2" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{2}{15}$$
            </div>
          </div>

          <!-- æ§åˆ¶æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
            <button id="next-step-2" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
              ä¸‹ä¸€æ­¥
            </button>
            <button id="reset-step-2" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
              é‡è¨­
            </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem2 -->

      <!-- é¡Œç›® 3 å…§å®¹ -->
      <div id="problem3" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>ç†è§£ã€Œè² è² å¾—æ­£ã€</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æ¸›å»ä¸€å€‹è² æ•¸ï¼Œç­‰æ–¼åŠ ä¸Šé€™å€‹æ•¸çš„ç›¸åæ•¸ï¼ˆæ­£æ•¸ï¼‰ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{3}{8} - \left(-\frac{4}{7}\right) = \frac{3}{8} + \frac{4}{7}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">è² è² å¾—æ­£</span>ï¼šå…©å€‹è² è™Ÿç›¸é‡è®Šæˆæ­£è™Ÿ</p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>æ‰¾å‡ºå…¬åˆ†æ¯</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ 8 å’Œ 7 çš„æœ€å°å…¬å€æ•¸æ˜¯ 56ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{3}{8} + \frac{4}{7}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">LCM(8, 7) = 56</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>é€²è¡Œæ“´åˆ†ï¼ˆé€šåˆ†ï¼‰</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>å°‡å…©å€‹åˆ†æ•¸éƒ½è½‰æ›æˆä»¥ 56 ç‚ºåˆ†æ¯çš„åˆ†æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\left(\frac{3 \times 7}{8 \times 7}\right) + \left(\frac{4 \times 8}{7 \times 8}\right) = \frac{21}{56} + \frac{32}{56}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åˆ†åˆ¥ä¹˜ä»¥ 7 å’Œ 8</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ç›¸åŒï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­ï¼š21 + 32 = 53</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{21 + 32}{56} = \frac{53}{56}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">21 + 32 = 53</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span>åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>53 æ˜¯è³ªæ•¸ï¼Œä¸” 56 ä¸æ˜¯ 53 çš„å€æ•¸ï¼Œæ‰€ä»¥ç„¡æ³•ç´„åˆ†ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{53}{56}$$
              </div>
              <p>ğŸ” <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">é€™å·²ç¶“æ˜¯æœ€ç°¡åˆ†æ•¸</span></p>
            </div>
          </div>

          <div id="final-answer-3" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{53}{56}$$
            </div>
          </div>

          <!-- æ§åˆ¶æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
            <button id="next-step-3" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
              ä¸‹ä¸€æ­¥
            </button>
            <button id="reset-step-3" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
              é‡è¨­
            </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem3 -->

      <!-- é¡Œç›® 4 å…§å®¹ -->
      <div id="problem4" class="problem-content">
         <div class="steps mt-8">
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">1</span>
              <span>ç†è§£ã€Œè² è² å¾—æ­£ã€</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>æ¸›å»ä¸€å€‹è² æ•¸ï¼Œç­‰æ–¼åŠ ä¸Šé€™å€‹æ•¸çš„ç›¸åæ•¸ï¼ˆæ­£æ•¸ï¼‰ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{5}{8} - \left(-\frac{3}{4}\right) = \frac{5}{8} + \frac{3}{4}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">è² è² å¾—æ­£</span>ï¼šå…©å€‹è² è™Ÿç›¸é‡è®Šæˆæ­£è™Ÿ</p>
            </div>
          </div>

          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">2</span>
              <span>æ‰¾å‡ºå…¬åˆ†æ¯</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ 8 å’Œ 4 çš„æœ€å°å…¬å€æ•¸æ˜¯ 8ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{5}{8} + \frac{3}{4}$$
              </div>
              <p>ğŸ’¡ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">LCM(8, 4) = 8</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">3</span>
              <span>é€²è¡Œæ“´åˆ†ï¼ˆé€šåˆ†ï¼‰</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>ç¬¬ä¸€å€‹åˆ†æ•¸ $\frac{5}{8}$ ä¸éœ€è¦æ”¹è®Šã€‚å°‡ $\frac{3}{4}$ è½‰æ›æˆä»¥ 8 ç‚ºåˆ†æ¯çš„åˆ†æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{5}{8} + \left(\frac{3 \times 2}{4 \times 2}\right) = \frac{5}{8} + \frac{6}{8}$$
              </div>
              <p>âœ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">åªéœ€æ“´åˆ†ç¬¬äºŒå€‹åˆ†æ•¸</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">4</span>
              <span>è¨ˆç®—åˆ†å­</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>åˆ†æ¯ç›¸åŒï¼Œå¯ä»¥ç›´æ¥è¨ˆç®—åˆ†å­ï¼š5 + 6 = 11</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{5 + 6}{8} = \frac{11}{8}$$
              </div>
              <p>ğŸ“ <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">5 + 6 = 11</span></p>
            </div>
          </div>
          
          <div class="step hidden bg-white rounded-2xl p-6 mb-5 border-l-[6px] border-[#4db8a0] transition-all duration-300 shadow-md hover:translate-x-2 hover:shadow-lg">
            <div class="step-title text-[#4db8a0] text-xl font-bold mb-3 flex items-center">
              <span class="step-number inline-flex items-center justify-center bg-[#4db8a0] text-white w-9 h-9 rounded-full font-bold mr-3 text-lg">5</span>
              <span>åˆ¤æ–·æ˜¯å¦éœ€è¦ç´„åˆ†</span>
            </div>
            <div class="step-content text-[#2d5f52] text-lg leading-relaxed ml-0 md:ml-12">
              <p>11 å’Œ 8 æ²’æœ‰å¤§æ–¼ 1 çš„å…¬å› æ•¸ã€‚</p>
              <div class="math-expression bg-[#f0faf8] p-5 rounded-xl my-4 text-center text-xl border-2 border-[#d0f0e8] [&_.katex]:text-[1.6em]">
                $$\frac{11}{8}$$
              </div>
              <p>ğŸ” <span class="highlight bg-[#d0f0e8] px-2 py-1 rounded-md font-medium text-[#2d5f52]">é€™å·²ç¶“æ˜¯æœ€ç°¡åˆ†æ•¸</span> (æˆ–å¯å¯«ç‚º $1\frac{3}{8}$)</p>
            </div>
          </div>

          <div id="final-answer-4" class="final-answer hidden bg-gradient-to-r from-[#4db8a0] to-[#7fc7af] text-white p-8 rounded-2xl text-center mt-8 text-2xl font-bold shadow-lg">
            <div>æœ€çµ‚ç­”æ¡ˆï¼š</div>
            <div class="math-display [&_.katex]:text-[2em]">
              $$\frac{11}{8}$$
            </div>
          </div>

          <!-- æ§åˆ¶æŒ‰éˆ• -->
          <div class="controls mt-6 flex justify-center gap-4">
            <button id="next-step-4" class="bg-[#4db8a0] text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#3a9c88] transition-all">
              ä¸‹ä¸€æ­¥
            </button>
            <button id="reset-step-4" class="hidden bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-all">
              é‡è¨­
            </button>
          </div>

        </div>
      </div> <!-- çµæŸ #problem4 -->
      
    </div> <!-- çµæŸ .content-area -->
  </div> <!-- çµæŸ .container -->

  <!-- é è…³ -->
  <div id="footer-text" class="text-center text-[#2d5f52]/70 p-4 text-sm bg-[#a8e6cf]/30">
    Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹
  </div>

  <!-- 
    ============================================================
    = JAVASCRIPT - (å·²æ›´æ–°äº’å‹•é‚è¼¯)
    ============================================================
  -->
  <script>
    // SDK å‡½æ•¸ (èˆ‡ä¹‹å‰ç›¸åŒ)
    async function onConfigChange(config) {
      document.getElementById('main-title').textContent = config.main_title || "ç•°åˆ†æ¯çš„åˆ†æ•¸åŠ æ¸›";
      document.getElementById('footer-text').textContent = config.footer_text || "Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹";

      const primaryColor = config.primary_color || "#4db8a0";
      const secondaryColor = config.secondary_color || "#7fc7af";
      const backgroundColor = config.background_color || "#f8fffe";
      const textColor = config.text_color || "#2d5f52";
      const accentColor = config.accent_color || "#d0f0e8";

      document.body.style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${accentColor} 100%)`;
      document.querySelector('h1').style.color = primaryColor;
      document.querySelector('.lg\\:w-80').style.background = `linear-gradient(180deg, ${secondaryColor} 0%, ${primaryColor} 100%)`;
      document.querySelector('.flex-1').style.background = backgroundColor;
      
      document.querySelectorAll('.problem').forEach(problem => { problem.style.color = textColor; });
      document.querySelectorAll('.problem-number').forEach(num => { num.style.color = primaryColor; });
      document.querySelectorAll('.step').forEach(step => { step.style.borderLeftColor = primaryColor; });
      document.querySelectorAll('.step-number').forEach(num => { num.style.background = primaryColor; });
      document.querySelectorAll('.step-title').forEach(title => { title.style.color = primaryColor; });
      document.querySelectorAll('.step-content').forEach(content => { content.style.color = textColor; });
      document.querySelectorAll('.highlight').forEach(highlight => { highlight.style.background = accentColor; highlight.style.color = textColor; });
      document.querySelectorAll('.math-expression').forEach(expr => { expr.style.background = accentColor; });
      document.querySelectorAll('.final-answer').forEach(answer => { answer.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`; });
    }

    function mapToCapabilities(config) {
      const defaults = window.elementSdk?.defaultConfig || {
        primary_color: "#4db8a0",
        secondary_color: "#7fc7af",
        background_color: "#f8fffe",
        text_color: "#2d5f52",
        accent_color: "#d0f0e8"
      };
      return {
        recolorables: [
          { get: () => config.primary_color || defaults.primary_color, set: (value) => { config.primary_color = value; window.elementSdk.setConfig({ primary_color: value }); } },
          { get: () => config.secondary_color || defaults.secondary_color, set: (value) => { config.secondary_color = value; window.elementSdk.setConfig({ secondary_color: value }); } },
          { get: () => config.background_color || defaults.background_color, set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); } },
          { get: () => config.text_color || defaults.text_color, set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); } },
          { get: () => config.accent_color || defaults.accent_color, set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); } }
        ],
        borderables: [], fontEditable: undefined, fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || "ç•°åˆ†æ¯çš„åˆ†æ•¸åŠ æ¸›"],
        ["footer_text", config.footer_text || "Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹"]
      ]);
    }

    // --- äº’å‹•å¼æ­¥é©Ÿé‚è¼¯ ---

    // å„²å­˜æ¯å€‹é¡Œç›®çš„ç›®å‰æ­¥é©Ÿ
    let currentStepState = { 1: 0, 2: 0, 3: 0, 4: 0 };

    /**
     * é¡¯ç¤ºé¸å®šçš„é¡Œç›®å…§å®¹ï¼Œä¸¦é‡è¨­å…¶æ­¥é©Ÿ
     */
    function showProblem(problemNumber) {
      // ç§»é™¤æ‰€æœ‰é¡Œç›®çš„ active ç‹€æ…‹
      document.querySelectorAll('.problem').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.problem-content').forEach(p => p.classList.remove('active'));
      
      // æ·»åŠ é¸ä¸­é¡Œç›®çš„ active ç‹€æ…‹
      document.querySelectorAll('.problem')[problemNumber - 1].classList.add('active');
      document.getElementById('problem' + problemNumber).classList.add('active');
      
      // é‡è¨­æ–°é¸ä¸­é¡Œç›®çš„æ­¥é©Ÿ
      resetSteps(problemNumber);

      // é‡æ–°æ¸²æŸ“æ•¸å­¸ç¬¦è™Ÿ
      setTimeout(() => {
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ],
          throwOnError: false
        });
      }, 50); 
    }

    /**
     * é‡è¨­æŒ‡å®šé¡Œç›®çš„æ‰€æœ‰æ­¥é©Ÿå’ŒæŒ‰éˆ•
     */
    function resetSteps(problemNumber) {
      currentStepState[problemNumber] = 0;

      // éš±è—æ‰€æœ‰æ­¥é©Ÿ
      document.querySelectorAll(`#problem${problemNumber} .step`).forEach(step => {
        step.classList.add('hidden');
      });

      // éš±è—æœ€çµ‚ç­”æ¡ˆ
      document.querySelector(`#final-answer-${problemNumber}`).classList.add('hidden');

      // é¡¯ç¤º "ä¸‹ä¸€æ­¥" æŒ‰éˆ•
      const nextButton = document.querySelector(`#next-step-${problemNumber}`);
      if (nextButton) nextButton.classList.remove('hidden');

      // éš±è— "é‡è¨­" æŒ‰éˆ•
      const resetButton = document.querySelector(`#reset-step-${problemNumber}`);
      if (resetButton) resetButton.classList.add('hidden');
    }

    /**
     * é¡¯ç¤ºæŒ‡å®šé¡Œç›®çš„ä¸‹ä¸€æ­¥
     */
    function showNextStep(problemNumber) {
      const steps = document.querySelectorAll(`#problem${problemNumber} .step`);
      const current = currentStepState[problemNumber];

      if (current < steps.length) {
        // é¡¯ç¤ºä¸‹ä¸€æ­¥
        steps[current].classList.remove('hidden');
        currentStepState[problemNumber]++;
      }

      // æª¢æŸ¥æ˜¯å¦å·²é¡¯ç¤ºæ‰€æœ‰æ­¥é©Ÿ
      if (currentStepState[problemNumber] === steps.length) {
        // é¡¯ç¤ºæœ€çµ‚ç­”æ¡ˆ
        document.querySelector(`#final-answer-${problemNumber}`).classList.remove('hidden');
        
        // éš±è— "ä¸‹ä¸€æ­¥" æŒ‰éˆ•
        document.querySelector(`#next-step-${problemNumber}`).classList.add('hidden');
        
        // é¡¯ç¤º "é‡è¨­" æŒ‰éˆ•
        document.querySelector(`#reset-step-${problemNumber}`).classList.remove('hidden');
      }
      
      // é¡¯ç¤ºå¾Œé‡æ–°æ¸²æŸ“æ•¸å­¸
      renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ],
          throwOnError: false
      });
    }

    /**
     * DOM è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œçš„åˆå§‹åŒ–
     */
    document.addEventListener('DOMContentLoaded', () => {
      // åˆå§‹æ¸²æŸ“æ•¸å­¸
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        throwOnError: false
      });

      // è¨­ç½®æ‰€æœ‰æŒ‰éˆ•çš„ç›£è½å™¨
      for (let i = 1; i <= 4; i++) {
        const nextButton = document.querySelector(`#next-step-${i}`);
        const resetButton = document.querySelector(`#reset-step-${i}`);

        if (nextButton) {
          nextButton.addEventListener('click', () => showNextStep(i));
        }
        if (resetButton) {
          resetButton.addEventListener('click', () => resetSteps(i));
        }

        // åˆå§‹é‡è¨­æ‰€æœ‰é¡Œç›® (é™¤äº†ç¬¬ä¸€å€‹ï¼Œå› ç‚º showProblem æœƒè™•ç†)
        if (i !== 1) {
          resetSteps(i);
        }
      }
      
      // ç¢ºä¿ç¬¬ä¸€å€‹å•é¡Œåœ¨è¼‰å…¥æ™‚è¢«æ­£ç¢ºé‡è¨­
      resetSteps(1);
    });

    // SDK åˆå§‹åŒ–
    if (window.elementSdk) {
      const simplifiedDefaultConfig = {
        main_title: "ç•°åˆ†æ¯çš„åˆ†æ•¸åŠ æ¸›",
        footer_text: "Â© 2024 æ•¸å­¸å­¸ç¿’å·¥å…· | ä½¿ç”¨ Chiron GoRound TC å­—å‹",
        primary_color: "#4db8a0",
        secondary_color: "#7fc7af",
        background_color: "#f8fffe",
        text_color: "#2d5f52",
        accent_color: "#d0f0e8"
      };

      window.elementSdk.init({
        defaultConfig: simplifiedDefaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
</body>
</html>