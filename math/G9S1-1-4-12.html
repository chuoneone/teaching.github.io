<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動學習單：相似三角形的應用</title>
    <link rel="icon" href="dog.png" type="image/png">
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入指定的字型 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <style>
        /* 設定全頁字型與基本樣式 */
        body {
            font-family: "Chiron GoRound TC", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
        }

        /* 螢光筆效果 */
        .highlight {
            background: linear-gradient(to top, #fef08a 60%, transparent 60%);
            padding: 0 0.2rem;
            font-weight: 600;
        }

        /* 步驟容器的過渡效果 */
        .step-container {
            transition: all 0.5s ease-in-out;
        }

        /* 鎖定狀態的樣式 */
        .step-locked {
            opacity: 0.4;
            pointer-events: none;
            background-color: #f3f4f6; /* 鎖定時 slightly grey out */
        }
        
        .step-completed {
            background-color: #f0fdf4; /* Light green for completed steps */
            border-color: #bbf7d0;
        }

        /* 回饋訊息的樣式 */
        .feedback-message {
            transition: opacity 0.3s;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 500;
            border: 1px solid transparent;
        }
        .feedback-correct {
            background-color: #d1fae5;
            color: #065f46;
            border-color: #6ee7b7;
        }
        .feedback-incorrect {
            background-color: #fee2e2;
            color: #991b1b;
            border-color: #fca5a5;
        }

        /* 輸入框樣式 */
        .answer-input {
            text-align: center;
            font-size: 1.125rem;
            border-radius: 0.375rem;
            border: 2px solid #d1d5db;
            padding: 0.5rem;
        }
        .answer-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        
        /* 題庫導覽按鈕 */
        .nav-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        .nav-btn.active {
            background-color: #3b82f6;
            color: white;
            border-color: #1d4ed8;
        }
        .nav-btn:not(.active) {
            background-color: #e5e7eb;
            color: #4b5563;
        }
    </style>
</head>
<body class="bg-blue-50 flex items-center justify-center min-h-screen p-2 sm:p-4">

    <div class="w-full max-w-4xl bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8">
        
        <!-- 題庫導覽 -->
        <div id="question-nav" class="flex justify-center items-center flex-wrap gap-3 mb-6 border-b pb-4">
            <!-- Nav buttons will be inserted by JS -->
        </div>

        <!-- 標題 -->
        <div class="text-center mb-6">
            <h1 id="main-title" class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800">相似三角形的應用</h1>
            <p class="text-slate-500 mt-2 text-base sm:text-lg">互動式解題練習</p>
        </div>

        <!-- 題目區塊 -->
        <div class="bg-slate-100 p-4 sm:p-5 rounded-lg mb-8">
            <p id="prompt-text" class="text-slate-700 leading-relaxed text-base sm:text-lg">
                <!-- Question prompt will be loaded here by JS -->
            </p>
        </div>
        
        <!-- 全局回饋訊息區 -->
        <div id="global-feedback" class="text-center h-16 mb-4"></div>

        <!-- 主要內容區：圖形 + 步驟 -->
        <div class="flex flex-col md:flex-row gap-8">

            <!-- 左側：圖形與圖形填答 -->
            <div class="md:w-1/2 flex flex-col items-center">
                 <div id="step0" class="step-container w-full p-4 sm:p-5 border rounded-lg bg-white shadow">
                    <h3 id="step0-title" class="font-bold text-xl text-slate-700 mb-2 text-center">
                        第 1 步
                    </h3>
                    <p class="text-base text-slate-500 mb-4 text-center">請先根據題目，在圖形中填入已知的數字。</p>
                    
                    <!-- SVG 圖形 (響應式網格) -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Triangle ABC -->
                        <div class="text-center">
                            <svg viewBox="0 0 100 100" class="mx-auto w-full max-w-[150px]">
                                <polygon points="50,10 10,90 90,90" fill="#e0f2fe" stroke="#0284c7" stroke-width="1"/>
                                <line x1="50" y1="10" x2="50" y2="90" stroke="#0284c7" stroke-width="1" />
                                <rect x="45" y="85" width="5" height="5" fill="none" stroke="#0284c7" stroke-width="1" />
                                <text id="svg_A" x="48" y="8" font-size="10">A</text>
                                <text id="svg_B" x="5" y="98" font-size="10">B</text>
                                <text id="svg_C" x="88" y="98" font-size="10">C</text>
                                <text id="svg_D" x="52" y="55" font-size="10">D</text>
                            </svg>
                            <div class="mt-2 space-y-2">
                                <div id="input-container-1" class="flex items-center justify-center gap-2"><span id="label_s0_1">BC =</span> <input id="s0_1" type="text" class="answer-input w-24"></div>
                                <div id="input-container-2" class="flex items-center justify-center gap-2"><span id="label_s0_2">AD =</span> <input id="s0_2" type="text" class="answer-input w-24"></div>
                            </div>
                        </div>
                        <!-- Triangle A'B'C' -->
                        <div class="text-center">
                           <svg viewBox="0 0 120 120" class="mx-auto w-full max-w-[180px]">
                                <polygon points="60,10 10,110 110,110" fill="#fee2e2" stroke="#dc2626" stroke-width="1"/>
                                <line x1="60" y1="10" x2="60" y2="110" stroke="#dc2626" stroke-width="1" />
                                <rect x="54" y="104" width="6" height="6" fill="none" stroke="#dc2626" stroke-width="1" />
                                <text id="svg_A2" x="57" y="8" font-size="12">A'</text>
                                <text id="svg_B2" x="0" y="118" font-size="12">B'</text>
                                <text id="svg_C2" x="105" y="118" font-size="12">C'</text>
                                <text id="svg_D2" x="63" y="65" font-size="12">D'</text>
                           </svg>
                           <div class="mt-2 space-y-2">
                                <div id="input-container-3" class="flex items-center justify-center gap-2"><span id="label_s0_3">B'C' =</span> <input id="s0_3" type="text" class="answer-input w-24"></div>
                                <div id="input-container-4" class="flex items-center justify-center gap-2"><span id="label_s0_4">A'D' =</span> <input id="s0_4" type="text" class="answer-input w-24"></div>
                            </div>
                        </div>
                    </div>
                     <div class="text-center mt-6">
                         <button id="check-s0-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">確認圖形</button>
                     </div>
                </div>
            </div>

            <!-- 右側：解題步驟 -->
            <div class="md:w-1/2 space-y-4">
                
                <!-- 步驟一 -->
                <div id="step1" class="step-container p-4 sm:p-5 border rounded-lg step-locked">
                    <h3 id="step1-title" class="font-bold text-xl text-slate-700 mb-2">第 2 步：寫出比例式</h3>
                    <p id="step1-hint" class="text-base text-slate-500 mb-4">
                        提示：相似三角形的<span class="highlight">對應邊長</span>和<span class="highlight">對應高的長度</span>會成比例。
                        <br>
                        <span id="s1-proportion-hint"></span>
                    </p>
                    <div class="flex items-center justify-center flex-wrap gap-2 bg-slate-100 p-4 rounded-md">
                        <input id="s1_1" type="text" class="answer-input w-16">
                        <span class="font-bold text-lg">:</span>
                        <input id="s1_2" type="text" class="answer-input w-16">
                        <span class="font-bold text-lg hidden sm:inline">=</span>
                        <input id="s1_3" type="text" class="answer-input w-16">
                        <span class="font-bold text-lg">:</span>
                        <input id="s1_4" type="text" class="answer-input w-16">
                    </div>
                    <div class="text-center mt-4">
                        <button id="check-s1-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">檢查答案</button>
                    </div>
                </div>

                <!-- 步驟二 -->
                <div id="step2" class="step-container p-4 sm:p-5 border rounded-lg step-locked">
                    <h3 id="step2-title" class="font-bold text-xl text-slate-700 mb-2">第 3 步：寫出方程式</h3>
                    <p class="text-base text-slate-500 mb-4">利用<span class="highlight">「內項乘積 = 外項乘積」</span>的原理。</p>
                    <div class="flex items-center justify-center flex-wrap gap-2 bg-slate-100 p-4 rounded-md">
                        <input id="s2_1" type="text" class="answer-input w-24">
                        <span class="font-bold text-lg">=</span>
                        <input id="s2_2" type="text" class="answer-input w-24">
                    </div>
                    <div class="text-center mt-4">
                        <button id="check-s2-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">檢查答案</button>
                    </div>
                </div>
                
                <!-- 步驟三 -->
                <div id="step3" class="step-container p-4 sm:p-5 border rounded-lg step-locked">
                    <h3 id="step3-title" class="font-bold text-xl text-slate-700 mb-2">第 4 步：算出最終答案</h3>
                    <p id="s3-hint" class="text-base text-slate-500 mb-4">
                        請根據上一步的方程式，計算出 x 的值。
                    </p>
                     <div class="flex items-center justify-center space-x-2 bg-slate-100 p-4 rounded-md">
                        <span class="font-mono font-bold text-lg">x =</span>
                        <input id="s3_1" type="number" class="answer-input w-24" placeholder="最終答案">
                    </div>
                    <div class="text-center mt-4">
                        <button id="check-s3-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">提交最終答案</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 完成訊息 -->
        <div id="completion-message" class="text-center mt-8 p-6 bg-green-100 border-2 border-green-400 rounded-lg hidden">
            <h2 class="text-2xl sm:text-3xl font-bold text-green-700">恭喜你，完全答對了！</h2>
            <p class="mt-2 text-green-600 text-lg">你真是個幾何小高手！繼續加油～</p>
            <button id="reset-btn" class="mt-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">再做一次</button>
        </div>
    </div>

    <script>
        const questions = [
            { // 第 1 題
                title: "相似三角形的對應高",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △A'B'C'，如果 <span class="highlight">BC = 12</span>，<span class="highlight">B'C' = 18</span>，<span class="highlight">AD = 8</span>，求 <span class="highlight">A'D'</span> 的長度。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "D", svg_A2: "A'", svg_B2: "B'", svg_C2: "C'", svg_D2: "D'" },
                    input: { label_s0_1: "BC =", label_s0_2: "AD =", label_s0_3: "B'C' =", label_s0_4: "A'D' =" }
                },
                proportionHint: `( <span class="font-mono">BC : B'C' = AD : A'D'</span> )`,
                answers: {
                    step0: { s0_1: "12", s0_2: "8", s0_3: "18", s0_4: "x" },
                    step1: { s1_1: "12", s1_2: "18", s1_3: "8", s1_4: "x" },
                    step2: { s2_1: "12x", s2_2: "144" },
                    step3: { s3_1: "12" }
                },
                hiddenInputs: []
            },
            { // 第 2 題
                title: "相似三角形的對應高",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △A'B'C'，如果 <span class="highlight">AD = 10</span>，<span class="highlight">A'D' = 12</span>，<span class="highlight">BC = 15</span>，求 <span class="highlight">B'C'</span> 的長度。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "D", svg_A2: "A'", svg_B2: "B'", svg_C2: "C'", svg_D2: "D'" },
                    input: { label_s0_1: "BC =", label_s0_2: "AD =", label_s0_3: "B'C' =", label_s0_4: "A'D' =" }
                },
                proportionHint: `( <span class="font-mono">BC : B'C' = AD : A'D'</span> )`,
                answers: {
                    step0: { s0_2: "10", s0_1: "15", s0_4: "12", s0_3: "x"},
                    step1: { s1_1: "15", s1_2: "x", s1_3: "10", s1_4: "12" },
                    step2: { s2_1: "10x", s2_2: "180" },
                    step3: { s3_1: "18" }
                },
                hiddenInputs: []
            },
            { // 第 3 題
                title: "相似三角形的對應高",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △DEF，AG ⊥ BC，DH ⊥ EF，若 <span class="highlight">AG : DH = 5 : 7</span>，<span class="highlight">EF = 35</span>，求 <span class="highlight">BC</span>。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "G", svg_A2: "D", svg_B2: "E", svg_C2: "F", svg_D2: "H" },
                    input: { label_s0_1: "BC =", label_s0_3: "EF =" }
                },
                proportionHint: `( <span class="font-mono">BC : EF = AG : DH</span> )`,
                answers: {
                    step0: { s0_1: "x", s0_3: "35" },
                    step1: { s1_1: "x", s1_2: "35", s1_3: "5", s1_4: "7" },
                    step2: { s2_1: "7x", s2_2: "175" },
                    step3: { s3_1: "25" }
                },
                hiddenInputs: ['input-container-2', 'input-container-4']
            },
            { // 第 4 題
                title: "相似三角形的面積比",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △DEF，若 <span class="highlight">BC : EF = 3 : 4</span>，且 <span class="highlight">△ABC 的面積為 27</span>，求 <span class="highlight">△DEF 的面積</span>。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "G", svg_A2: "D", svg_B2: "E", svg_C2: "F", svg_D2: "H" },
                    input: { label_s0_1: "△ABC 面積 =", label_s0_3: "△DEF 面積 =" }
                },
                stepTitles: { step1: "第 2 步：寫出面積比與邊長平方比" },
                stepHints: { step1: `提示：相似三角形的<span class="highlight">面積比</span>會等於<span class="highlight">對應邊長的平方比</span>。`},
                proportionHint: `( <span class="font-mono">△ABC 面積 : △DEF 面積 = BC² : EF²</span> )`,
                answers: {
                    step0: { s0_1: "27", s0_3: "x" },
                    step1: { s1_1: "27", s1_2: "x", s1_3: "9", s1_4: "16" },
                    step2: { s2_1: "9x", s2_2: "432" },
                    step3: { s3_1: "48" }
                },
                hiddenInputs: ['input-container-2', 'input-container-4']
            },
            { // 第 5 題
                title: "相似三角形的面積比",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △DEF，若 <span class="highlight">BC : EF = 2 : 3</span>，且 <span class="highlight">△DEF 的面積為 81</span>，求 <span class="highlight">△ABC 的面積</span>。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "G", svg_A2: "D", svg_B2: "E", svg_C2: "F", svg_D2: "H" },
                    input: { label_s0_1: "△ABC 面積 =", label_s0_3: "△DEF 面積 =" }
                },
                stepTitles: { step1: "第 2 步：寫出面積比與邊長平方比" },
                stepHints: { step1: `提示：相似三角形的<span class="highlight">面積比</span>會等於<span class="highlight">對應邊長的平方比</span>。`},
                proportionHint: `( <span class="font-mono">△ABC 面積 : △DEF 面積 = BC² : EF²</span> )`,
                answers: {
                    step0: { s0_1: "x", s0_3: "81" },
                    step1: { s1_1: "x", s1_2: "81", s1_3: "4", s1_4: "9" },
                    step2: { s2_1: "9x", s2_2: "324" },
                    step3: { s3_1: "36" }
                },
                hiddenInputs: ['input-container-2', 'input-container-4']
            },
            { // 第 6 題
                title: "相似三角形的面積比",
                prompt: `<strong>題目：</strong>如圖，△ABC ~ △DEF，若 <span class="highlight">AC : DF = 7 : 8</span>，且 <span class="highlight">△ABC 的面積為 98</span>，求 <span class="highlight">△DEF 的面積</span>。`,
                labels: {
                    svg: { svg_A: "A", svg_B: "B", svg_C: "C", svg_D: "G", svg_A2: "D", svg_B2: "E", svg_C2: "F", svg_D2: "H" },
                    input: { label_s0_1: "△ABC 面積 =", label_s0_3: "△DEF 面積 =" }
                },
                stepTitles: { step1: "第 2 步：寫出面積比與邊長平方比" },
                stepHints: { step1: `提示：相似三角形的<span class="highlight">面積比</span>會等於<span class="highlight">對應邊長的平方比</span>。`},
                proportionHint: `( <span class="font-mono">△ABC 面積 : △DEF 面積 = AC² : DF²</span> )`,
                answers: {
                    step0: { s0_1: "98", s0_3: "x" },
                    step1: { s1_1: "98", s1_2: "x", s1_3: "49", s1_4: "64" },
                    step2: { s2_1: "49x", s2_2: "6272" },
                    step3: { s3_1: "128" }
                },
                hiddenInputs: ['input-container-2', 'input-container-4']
            }
        ];
        let currentQuestionIndex = 0;

        // DOM 元素
        const dom = {
            feedback: document.getElementById('global-feedback'),
            completion: document.getElementById('completion-message'),
            mainTitle: document.getElementById('main-title'),
            promptText: document.getElementById('prompt-text'),
            s1ProportionHint: document.getElementById('s1-proportion-hint'),
            stepContainers: {
                s0: document.getElementById('step0'),
                s1: document.getElementById('step1'),
                s2: document.getElementById('step2'),
                s3: document.getElementById('step3'),
            },
            stepTitles: {
                s1: document.getElementById('step1-title'),
            },
            stepHints: {
                s1: document.getElementById('step1-hint'),
            }
        };

        // 顯示回饋訊息
        function showFeedback(message, isCorrect) {
            dom.feedback.innerHTML = `<div class="feedback-message ${isCorrect ? 'feedback-correct' : 'feedback-incorrect'}">${message}</div>`;
            setTimeout(() => { dom.feedback.innerHTML = ''; }, 3000);
        }
        
        // 設定步驟狀態
        function setStepState(stepIndex, state) {
            const step = dom.stepContainers[`s${stepIndex}`];
            const inputs = step.querySelectorAll('input');
            const button = step.querySelector('button');

            step.classList.remove('step-locked', 'step-completed');

            if (state === 'locked') {
                step.classList.add('step-locked');
                inputs.forEach(input => input.disabled = true);
                if (button) button.disabled = true;
            } else if (state === 'completed') {
                step.classList.add('step-completed');
                inputs.forEach(input => input.disabled = true);
                 if (button) button.disabled = true;
            } else { // active
                inputs.forEach(input => input.disabled = false);
                if (button) button.disabled = false;
                const firstInput = step.querySelector('input:not([readonly])');
                if (firstInput) firstInput.focus();
            }
        }

        // 檢查答案
        function checkStep(stepIndex) {
            const stepKey = `step${stepIndex}`;
            const correct = questions[currentQuestionIndex].answers[stepKey];
            let allCorrect = true;

            if (stepIndex === 0) {
                 for (const key in correct) {
                    const inputEl = document.getElementById(key);
                    if (!inputEl || inputEl.value.trim().toLowerCase().replace(/\s/g, '') !== correct[key]) {
                        allCorrect = false;
                        break;
                    }
                }
            } else {
                 const inputs = document.querySelectorAll(`#step${stepIndex} input`);
                 const correctValues = Object.values(correct);
                 if (inputs.length !== correctValues.length) {
                     allCorrect = false;
                 } else {
                    for(let i=0; i < inputs.length; i++) {
                        if(inputs[i].value.trim().toLowerCase().replace(/\s/g, '') !== correctValues[i]) {
                            allCorrect = false;
                            break;
                        }
                    }
                 }
            }
            
            if (allCorrect) {
                const isLastStep = stepIndex === 3;
                showFeedback(isLastStep ? "恭喜完成！" : "太棒了！繼續加油～", true);
                setStepState(stepIndex, 'completed');
                
                if (!isLastStep) {
                    setStepState(stepIndex + 1, 'active');
                } else {
                    dom.completion.classList.remove('hidden');
                    dom.completion.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            } else {
                showFeedback('答案好像不太對喔，再檢查一下！', false);
            }
        }

        function resetCurrentQuestion() {
            // 清空所有輸入框並移除完成樣式
            Object.values(dom.stepContainers).forEach(step => {
                 step.classList.remove('step-completed');
                 step.querySelectorAll('input').forEach(input => {
                    input.value = '';
                });
            });
            
            // 隱藏完成訊息並重置步驟鎖
            dom.completion.classList.add('hidden');
            setStepState(0, 'active');
            setStepState(1, 'locked');
            setStepState(2, 'locked');
            setStepState(3, 'locked');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function loadQuestion(index) {
            currentQuestionIndex = index;
            const qd = questions[index];

            // 更新標題和提示
            dom.mainTitle.innerText = qd.title || "相似三角形的應用";
            dom.promptText.innerHTML = qd.prompt;
            dom.s1ProportionHint.innerHTML = qd.proportionHint;
            
            // 更新步驟標題和提示
            dom.stepTitles.s1.innerText = qd.stepTitles?.step1 || "第 2 步：寫出比例式";
            dom.stepHints.s1.innerHTML = qd.stepHints?.step1 || `提示：相似三角形的<span class="highlight">對應邊長</span>和<span class="highlight">對應高的長度</span>會成比例。<br>${qd.proportionHint}`;

            // 更新 SVG 和輸入框標籤
            for (const id in qd.labels.svg) {
                document.getElementById(id).textContent = qd.labels.svg[id];
            }
            for (const id in qd.labels.input) {
                document.getElementById(id).textContent = qd.labels.input[id];
            }
            
            // 顯示/隱藏輸入框
            ['input-container-1', 'input-container-2', 'input-container-3', 'input-container-4'].forEach(id => {
                document.getElementById(id).style.display = 'flex';
            });
            if (qd.hiddenInputs && qd.hiddenInputs.length > 0) {
                qd.hiddenInputs.forEach(id => {
                    document.getElementById(id).style.display = 'none';
                });
            }

            // 更新導覽按鈕
            document.querySelectorAll('#question-nav .nav-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });

            resetCurrentQuestion();
            showFeedback(`第 ${index + 1} 題載入完成！`, true);
        }

        // 初始化
        function initialize() {
            const navContainer = document.getElementById('question-nav');
            questions.forEach((q, i) => {
                const btn = document.createElement('button');
                btn.className = 'nav-btn';
                btn.innerText = `第 ${i + 1} 題`;
                btn.onclick = () => loadQuestion(i);
                navContainer.appendChild(btn);
            });
            
            document.getElementById('check-s0-btn').onclick = () => checkStep(0);
            document.getElementById('check-s1-btn').onclick = () => checkStep(1);
            document.getElementById('check-s2-btn').onclick = () => checkStep(2);
            document.getElementById('check-s3-btn').onclick = () => checkStep(3);

            document.querySelectorAll('.step-container').forEach(container => {
                container.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        const checkButton = container.querySelector('button');
                        if (checkButton && !checkButton.disabled) {
                            checkButton.click();
                        }
                    }
                });
            });

            document.getElementById('reset-btn').onclick = resetCurrentQuestion;
            
            loadQuestion(0);
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>

