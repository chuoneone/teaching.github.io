<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一、平方根與面積</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .keyboard-btn {
            transition: all 0.1s ease-in-out;
        }
        .keyboard-btn:active {
            transform: scale(0.95);
        }
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-blue-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-6xl mx-auto">
        <!-- Top Navigation Bar -->
        <div class="bg-white p-4 rounded-2xl shadow-lg mb-4 flex justify-between items-center">
            <button id="prevButton" class="nav-btn bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg text-lg transition-transform transform hover:scale-105">
                上一題
            </button>
            <h1 id="question-title" class="text-xl sm:text-3xl font-bold text-blue-800 text-center"></h1>
            <button id="nextButton" class="nav-btn bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg text-lg transition-transform transform hover:scale-105">
                下一題
            </button>
        </div>

        <!-- Main Content Area (Split Screen) -->
        <div class="flex flex-col md:flex-row gap-4">
            
            <!-- Left Panel: Question -->
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full md:w-1/2 flex flex-col justify-center items-center min-h-[60vh]">
                
                <!-- Question Type 1: Area to Side -->
                <div id="q-type-area-to-side" class="hidden">
                    <!-- Graphic -->
                    <div class="my-6 flex justify-center items-center gap-0">
                         <div class="w-32 h-32 sm:w-40 sm:h-40 bg-blue-100 border-2 border-gray-500 flex justify-center items-center">
                            <span id="area-display" class="text-4xl sm:text-5xl font-bold text-gray-800"></span>
                         </div>
                         <div class="relative w-12 h-32 sm:h-40">
                             <svg class="absolute left-[-24px] top-0 h-full w-10 text-gray-700" viewbox="0 0 10 40" preserveAspectRatio="none">
                                <path d="M 5 0 C 20 10, 20 30, 5 40" stroke="black" fill="transparent" stroke-width="1.5"/>
                             </svg>
                             <span class="absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 text-2xl sm:text-3xl font-bold text-gray-700">?</span>
                         </div>
                    </div>
                    <!-- Question Text -->
                    <p class="text-lg sm:text-xl my-6 text-gray-800 text-center">
                        一個正方形的面積為 <span id="area-text"></span>，<br>其邊長可以記為？
                    </p>
                </div>
            
                <!-- Question Type 2: Side to Area -->
                <div id="q-type-side-to-area" class="hidden text-center">
                    <!-- Graphic -->
                    <div class="my-6 flex justify-center items-center gap-0">
                         <div class="relative w-32 h-32 sm:w-40 sm:h-40">
                            <!-- Top Label & Bracket -->
                            <div class="absolute -top-10 left-0 w-full flex flex-col items-center">
                                <span id="side-text-top" class="text-xl font-bold text-gray-700"></span>
                                <svg class="h-6 w-full text-gray-700 -mt-1" viewBox="0 0 40 10" preserveAspectRatio="none">
                                    <path d="M 0 5 C 10 15, 30 15, 40 5" stroke="black" fill="transparent" stroke-width="1.5"/>
                                </svg>
                            </div>
                            <!-- The Square itself -->
                            <div class="w-full h-full bg-blue-100 border-2 border-gray-500 flex justify-center items-center">
                               <span class="text-4xl sm:text-5xl font-bold text-gray-800">?</span>
                            </div>
                        </div>
                        <!-- Right bracket and label -->
                        <div class="relative w-12 h-32 sm:h-40">
                             <svg class="absolute left-[-24px] top-0 h-full w-10 text-gray-700" viewBox="0 0 10 40" preserveAspectRatio="none">
                               <path d="M 5 0 C 20 10, 20 30, 5 40" stroke="black" fill="transparent" stroke-width="1.5"/>
                            </svg>
                            <span id="side-text-right" class="absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-700 whitespace-nowrap"></span>
                        </div>
                    </div>
                    <!-- Question Text -->
                    <p class="text-lg sm:text-xl my-6 text-gray-800 text-center">
                        一個邊長為 <span id="side-text-question"></span> 的正方形，<br>其面積為？
                    </p>
                </div>
            </div>

            <!-- Right Panel: Answer & Keyboard -->
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full md:w-1/2 flex flex-col justify-center items-center min-h-[60vh]">
                 <!-- Input -->
                <div class="w-full max-w-xs mx-auto">
                    <input id="answerInput" type="text" class="border-2 border-gray-300 rounded-lg p-2 mb-4 text-2xl text-center w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="請點擊下方鍵盤作答">
                    
                    <!-- Check Button -->
                    <button id="checkButton" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-xl transition-transform transform hover:scale-105">
                        檢查答案
                    </button>

                    <!-- Feedback Message -->
                    <p id="result" class="mt-4 text-xl font-semibold h-7 text-center transition-opacity duration-300"></p>
                </div>

                <!-- On-screen Keyboard -->
                <div id="keyboard" class="mt-8 grid grid-cols-4 gap-2 w-full max-w-xs mx-auto">
                    <button data-key="1" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">1</button>
                    <button data-key="2" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">2</button>
                    <button data-key="3" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">3</button>
                    <button data-key="√" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-blue-200 hover:bg-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-400">√</button>
                    <button data-key="4" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">4</button>
                    <button data-key="5" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">5</button>
                    <button data-key="6" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">6</button>
                    <button data-key="7" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">7</button>
                    <button data-key="8" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">8</button>
                    <button data-key="9" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">9</button>
                    <button data-key="0" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">0</button>
                    <button data-action="clear" class="keyboard-btn py-3 px-2 text-xl font-bold rounded-lg bg-red-500 hover:bg-red-600 text-white">C</button>
                    <button data-action="backspace" class="keyboard-btn col-span-4 py-3 px-2 text-xl font-bold rounded-lg bg-orange-400 hover:bg-orange-500 text-white">退格 ←</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const questions = [
            // Type 1: Area to Side
            { type: 'areaToSide', value: 10, answer: '√10' },
            { type: 'areaToSide', value: 17, answer: '√17' },
            { type: 'areaToSide', value: 21, answer: '√21' },
            { type: 'areaToSide', value: 55, answer: '√55' },
            // Type 2: Side to Area
            { type: 'sideToArea', value: 7, answer: '7' },
            { type: 'sideToArea', value: 38, answer: '38' },
            { type: 'sideToArea', value: 71, answer: '71' }
        ];
        let currentQuestionIndex = 0;

        // --- DOM Elements ---
        const answerInput = document.getElementById('answerInput');
        const checkButton = document.getElementById('checkButton');
        const result = document.getElementById('result');
        const keyboard = document.getElementById('keyboard');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const questionTitle = document.getElementById('question-title');
        
        // --- Functions ---
        function renderQuestion() {
            const question = questions[currentQuestionIndex];
            const qTypeAreaToSide = document.getElementById('q-type-area-to-side');
            const qTypeSideToArea = document.getElementById('q-type-side-to-area');

            if (question.type === 'areaToSide') {
                qTypeAreaToSide.classList.remove('hidden');
                qTypeSideToArea.classList.add('hidden');

                document.getElementById('area-display').textContent = question.value;
                document.getElementById('area-text').textContent = question.value;
            } else if (question.type === 'sideToArea') {
                qTypeSideToArea.classList.remove('hidden');
                qTypeAreaToSide.classList.add('hidden');
                
                const sideLengthText = `√${question.value}`;
                document.getElementById('side-text-top').textContent = sideLengthText;
                document.getElementById('side-text-right').textContent = sideLengthText;
                document.getElementById('side-text-question').textContent = sideLengthText;
            }

            questionTitle.textContent = `第 ${currentQuestionIndex + 1} / ${questions.length} 題`;
            answerInput.value = '';
            result.textContent = '';

            // Update button states
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.disabled = currentQuestionIndex === questions.length - 1;
        }

        function checkAnswer() {
            const userAnswer = answerInput.value.trim().replace(/\s/g, '');
            const correctAnswer = questions[currentQuestionIndex].answer;

            if (userAnswer === correctAnswer) {
                result.textContent = '答對了！你真棒！👍';
                result.classList.remove('text-red-500');
                result.classList.add('text-green-600');
            } else if (userAnswer === '') {
                result.textContent = '請先輸入答案喔！';
                result.classList.remove('text-green-600');
                result.classList.add('text-red-500');
            } else {
                result.textContent = '再想一想喔！🤔';
                result.classList.remove('text-green-600');
                result.classList.add('text-red-500');
            }
        }

        // --- Event Listeners ---
        checkButton.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') checkAnswer();
        });

        keyboard.addEventListener('click', (event) => {
            if (!event.target.matches('button')) return;
            const key = event.target.dataset.key;
            const action = event.target.dataset.action;

            if (key) answerInput.value += key;
            else if (action === 'backspace') answerInput.value = answerInput.value.slice(0, -1);
            else if (action === 'clear') answerInput.value = '';
            
            answerInput.focus();
        });

        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        });

        // --- Initial Load ---
        renderQuestion();
    </script>
</body>
</html>

