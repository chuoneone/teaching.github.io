<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動學習：同類方根的判別</title>
    <link rel="icon" href="dog.png" type="image/png">
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 KaTeX 數學字型函式庫 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3NU" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzQC9Tj+vBWPxIeG+YiwLTAoQAyYxzGMMId" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURPlLJSytFmsNldqaIFAdj7sdMzoVnwUjM/rN6RIIKYEtdMdcUAejs" crossorigin="anonymous"></script>
    
    <!-- 引入 Chiron GoRound TC 字型 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <style>
      body {
        font-family: "Chiron GoRound TC", sans-serif;
        font-weight: 400;
        font-style: normal;
        /* 增加 line-height 讓數學公式有足夠空間 */
        line-height: 1.8;
      }
      
      /* 關鍵字螢光筆效果 */
      .highlight {
        background: linear-gradient(to top, #fef08a 60%, transparent 60%);
        padding: 0 0.2rem;
        font-weight: 600;
      }

      /* 選項卡片基礎樣式 */
      .option-card {
        border: 2px solid #e5e7eb; /* 淺灰色邊框 */
        border-radius: 0.75rem;
        padding: 1rem;
        text-align: center;
        font-size: 1.125rem; /* 稍大字體 */
        cursor: pointer;
        transition: all 0.2s ease-in-out;
      }
      .option-card:hover {
        border-color: #93c5fd; /* 懸停時變藍色 */
        background-color: #eff6ff;
      }
      
      /* 選項被選中時的樣式 */
      .option-card.selected {
        border-color: #3b82f6; /* 藍色邊框 */
        background-color: #dbeafe; /* 淺藍色背景 */
        font-weight: 600;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      
      /* 步驟鎖定時的樣式 */
      .step-locked {
        opacity: 0.5;
        pointer-events: none;
      }

      /* 回饋訊息框 */
      .feedback-box {
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        font-weight: 500;
        margin-top: 1rem;
        display: none; /* 預設隱藏 */
      }
      .feedback-correct {
        background-color: #d1fae5;
        color: #065f46;
        border: 1px solid #6ee7b7;
      }
      .feedback-incorrect {
        background-color: #fee2e2;
        color: #991b1b;
        border: 1px solid #fca5a5;
      }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 md:p-8">

    <main class="w-full max-w-2xl bg-white rounded-xl shadow-lg p-6 md:p-10 space-y-8 mb-20"> <!-- 增加 mb-20 避免被 footer 擋住 -->
        
        <h1 class="text-3xl md:text-4xl font-bold text-slate-800 text-center">
            七、同類方根的判別
        </h1>

        <!-- 步驟 0: 觀念說明 -->
        <div class="bg-indigo-50 border-l-4 border-indigo-400 p-5 rounded-lg">
            <h2 class="text-xl font-bold text-indigo-700 mb-2">
                什麼是<span class="highlight">同類方根</span>？
            </h2>
            <p class="text-lg text-slate-700">
                將方根化簡為「最簡根式」後，如果
                <span class="font-bold text-indigo-600">根號裡面的數字相同</span>，
                我們就稱它們為「同類方根」。
            </p>
            <p class="text-lg text-slate-600 mt-2">
                例如：$5\sqrt{7}$ 和 $3\sqrt{7}$ 就是同類方根。
            </p>
        </div>

        <!-- 步驟 1: 題目 (1) -->
        <div id="step-1" class="space-y-4 pt-4 border-t">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 1 步 / 共 10 步</div>
            
            <h2 class="text-xl font-bold text-slate-700">
                第 1 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
            </h2>
            
            <!-- 選項區 -->
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="1" data-value="A">(A) $3\sqrt{2}$</div>
                <div class="option-card" data-group="1" data-value="B">(B) $2\sqrt{6}$</div>
                <div class="option-card" data-group="1" data-value="C">(C) $5\sqrt{2}$</div>
                <div class="option-card" data-group="1" data-value="D">(D) $2\sqrt{3}$</div>
            </div>
            
            <!-- 檢查按鈕 -->
            <button id="check-btn-1" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            
            <!-- 回饋訊息區 -->
            <div id="feedback-1" class="feedback-box"></div>
        </div>

        <!-- 步驟 2: 題目 (2) -->
        <div id="step-2" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 2 步 / 共 10 步</div>
            
            <h2 class="text-xl font-bold text-slate-700">
                第 2 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
            </h2>
            
            <!-- 選項區 -->
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="2" data-value="A">(A) $3\sqrt{5}$</div>
                <div class="option-card" data-group="2" data-value="B">(B) $2\sqrt{3}$</div>
                <div class="option-card" data-group="2" data-value="C">(C) $\frac{\sqrt{3}}{2}$</div>
                <div class="option-card" data-group="2" data-value="D">(D) $\sqrt{6}$</div>
            </div>
            
            <!-- 檢查按鈕 -->
            <button id="check-btn-2" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            
            <!-- 回饋訊息區 -->
            <div id="feedback-2" class="feedback-box"></div>
        </div>
        
        <!-- 步驟 3: 題目 (3) -->
        <div id="step-3" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 3 步 / 共 10 步</div>
            
            <h2 class="text-xl font-bold text-slate-700">
                第 3 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
            </h2>
            
            <!-- 選項區 -->
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="3" data-value="A">(A) $2\sqrt{5}$</div>
                <div class="option-card" data-group="3" data-value="B">(B) $\frac{2\sqrt{5}}{5}$</div>
                <div class="option-card" data-group="3" data-value="C">(C) $5\sqrt{2}$</div>
                <div class="option-card" data-group="3" data-value="D">(D) $\sqrt{30}$</div>
            </div>
            
            <!-- 檢查按鈕 -->
            <button id="check-btn-3" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            
            <!-- 回饋訊息區 -->
            <div id="feedback-3" class="feedback-box"></div>
        </div>
        
        <!-- 步驟 4: 題目 (4) -->
        <div id="step-4" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 4 步 / 共 10 步</div>
            
            <h2 class="text-xl font-bold text-slate-700">
                第 4 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
            </h2>
            
            <!-- 選項區 -->
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="4" data-value="A">(A) $\sqrt{21}$</div>
                <div class="option-card" data-group="4" data-value="B">(B) $\frac{\sqrt{7}}{7}$</div>
                <div class="option-card" data-group="4" data-value="C">(C) $\sqrt{42}$</div>
                <div class="option-card" data-group="4" data-value="D">(D) $2\sqrt{7}$</div>
            </div>
            
            <!-- 檢查按鈕 -->
            <button id="check-btn-4" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            
            <!-- 回饋訊息區 -->
            <div id="feedback-4" class="feedback-box"></div>
        </div>

        <!-- 步驟 5: 題目 (5) - 新增 -->
        <div id="step-5" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 5 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 5 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="5" data-value="A">(A) $\frac{3\sqrt{2}}{2}$</div>
                <div class="option-card" data-group="5" data-value="B">(B) $4\sqrt{2}$</div>
                <div class="option-card" data-group="5" data-value="C">(C) $4\sqrt{3}$</div>
                <div class="option-card" data-group="5" data-value="D">(D) $\frac{\sqrt{6}}{2}$</div>
            </div>
            <button id="check-btn-5" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-5" class="feedback-box"></div>
        </div>

        <!-- 步驟 6: 題目 (7) - 新增 (跳過題號6) -->
        <div id="step-7" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 6 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 7 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
                <span class="text-base text-rose-500 font-medium">(提示：需要先化簡喔！)</span>
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="7" data-value="A">(A) $\sqrt{54}$</div>
                <div class="option-card" data-group="7" data-value="B">(B) $\sqrt{27}$</div>
                <div class="option-card" data-group="7" data-value="C">(C) $\frac{1}{\sqrt{3}}$</div>
                <div class="option-card" data-group="7" data-value="D">(D) $\sqrt{32}$</div>
            </div>
            <button id="check-btn-7" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-7" class="feedback-box"></div>
        </div>

        <!-- 步驟 7: 題目 (8) - 新增 -->
        <div id="step-8" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 7 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 8 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
                <span class="text-base text-rose-500 font-medium">(提示：需要先化簡喔！)</span>
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="8" data-value="A">(A) $\sqrt{14}$</div>
                <div class="option-card" data-group="8" data-value="B">(B) $\sqrt{7}$</div>
                <div class="option-card" data-group="8" data-value="C">(C) $\sqrt{2}$</div>
                <div class="option-card" data-group="8" data-value="D">(D) $\sqrt{98}$</div>
            </div>
            <button id="check-btn-8" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-8" class="feedback-box"></div>
        </div>

        <!-- 步驟 8: 題目 (9) - 新增 -->
        <div id="step-9" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 8 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 9 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
                <span class="text-base text-rose-500 font-medium">(提示：需要先化簡喔！)</span>
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="9" data-value="A">(A) $\sqrt{20}$</div>
                <div class="option-card" data-group="9" data-value="B">(B) $\frac{3}{\sqrt{5}}$</div>
                <div class="option-card" data-group="9" data-value="C">(C) $\sqrt{25}$</div>
                <div class="option-card" data-group="9" data-value="D">(D) $\sqrt{10}$</div>
            </div>
            <button id="check-btn-9" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-9" class="feedback-box"></div>
        </div>

        <!-- 步驟 9: 題目 (10) - 新增 -->
        <div id="step-10" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 9 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 10 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
                <span class="text-base text-rose-500 font-medium">(提示：需要先化簡喔！)</span>
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="10" data-value="A">(A) $\sqrt{13}$</div>
                <div class="option-card" data-group="10" data-value="B">(B) $\sqrt{26}$</div>
                <div class="option-card" data-group="10" data-value="C">(C) $\sqrt{39}$</div>
                <div class="option-card" data-group="10" data-value="D">(D) $\sqrt{52}$</div>
            </div>
            <button id="check-btn-10" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-10" class="feedback-box"></div>
        </div>

        <!-- 步驟 10: 題目 (11) - 新增 -->
        <div id="step-11" class="space-y-4 pt-4 border-t step-locked">
            <!-- 進度提示 -->
            <div class="text-sm font-medium text-gray-500 text-right">第 10 步 / 共 10 步</div>
            <h2 class="text-xl font-bold text-slate-700">
                第 11 題：請點選下面選項中，所有的<span class="highlight">同類方根</span>。
                <span class="text-base text-rose-500 font-medium">(提示：需要先化簡喔！)</span>
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="option-card" data-group="11" data-value="A">(A) $\sqrt{\frac{6}{5}}$</div>
                <div class="option-card" data-group="11" data-value="B">(B) $\sqrt{18}$</div>
                <div class="option-card" data-group="11" data-value="C">(C) $\sqrt{22}$</div>
                <div class="option-card" data-group="11" data-value="D">(D) $\sqrt{\frac{9}{2}}$</div>
            </div>
            <button id="check-btn-11" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">
                檢查答案
            </button>
            <div id="feedback-11" class="feedback-box"></div>
        </div>


        <!-- 完成訊息 -->
        <div id="completion-message" class="text-center p-6 bg-green-100 border-2 border-green-400 rounded-lg" style="display: none;">
            <h2 class="text-3xl font-bold text-green-700">恭喜你，全部答對了！</h2>
            <p class="mt-2 text-green-600 text-lg">你已經學會判別同類方根了！</p>
            <button id="reset-btn" class="mt-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg transition-colors text-lg">
                再練習一次
            </button>
        </div>

    </main>

    <!-- 頁尾固定區塊 -->
    <footer class="fixed bottom-0 left-0 w-full text-center text-gray-400 text-sm bg-white bg-opacity-80 py-2 border-t border-gray-200 backdrop-blur-sm">
        © 2025 特教米克師｜採用 
        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW" target="_blank" class="text-sky-600 hover:underline">
            CC BY-NC-SA 4.0 創用CC授權
        </a>｜非商業用途歡迎轉載或改編，請保留署名並附上原始連結。
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        
        // 觸發 KaTeX 渲染數學公式
        renderMathInElement(document.body, {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
          ]
        });

        // 獲取所有需要的 DOM 元素
        const step1 = document.getElementById('step-1');
        const step2 = document.getElementById('step-2');
        const step3 = document.getElementById('step-3');
        const step4 = document.getElementById('step-4');
        const step5 = document.getElementById('step-5'); // 新增
        const step7 = document.getElementById('step-7'); // 新增
        const step8 = document.getElementById('step-8'); // 新增
        const step9 = document.getElementById('step-9'); // 新增
        const step10 = document.getElementById('step-10'); // 新增
        const step11 = document.getElementById('step-11'); // 新增

        const checkBtn1 = document.getElementById('check-btn-1');
        const checkBtn2 = document.getElementById('check-btn-2');
        const checkBtn3 = document.getElementById('check-btn-3');
        const checkBtn4 = document.getElementById('check-btn-4');
        const checkBtn5 = document.getElementById('check-btn-5'); // 新增
        const checkBtn7 = document.getElementById('check-btn-7'); // 新增
        const checkBtn8 = document.getElementById('check-btn-8'); // 新增
        const checkBtn9 = document.getElementById('check-btn-9'); // 新增
        const checkBtn10 = document.getElementById('check-btn-10'); // 新增
        const checkBtn11 = document.getElementById('check-btn-11'); // 新增

        const feedback1 = document.getElementById('feedback-1');
        const feedback2 = document.getElementById('feedback-2');
        const feedback3 = document.getElementById('feedback-3');
        const feedback4 = document.getElementById('feedback-4');
        const feedback5 = document.getElementById('feedback-5'); // 新增
        const feedback7 = document.getElementById('feedback-7'); // 新增
        const feedback8 = document.getElementById('feedback-8'); // 新增
        const feedback9 = document.getElementById('feedback-9'); // 新增
        const feedback10 = document.getElementById('feedback-10'); // 新增
        const feedback11 = document.getElementById('feedback-11'); // 新增

        const completionMessage = document.getElementById('completion-message');
        const resetBtn = document.getElementById('reset-btn');
        const allOptionCards = document.querySelectorAll('.option-card');

        // 幫所有選項卡片加上點擊事件
        allOptionCards.forEach(card => {
          card.addEventListener('click', () => {
            // 只有在步驟尚未鎖定時才允許切換
            if (!card.closest('.step-locked')) {
              card.classList.toggle('selected');
            }
          });
        });

        // 顯示回饋訊息的輔助函式
        function showFeedback(element, message, isCorrect) {
          element.innerHTML = message;
          element.className = 'feedback-box'; // 重置 class
          if (isCorrect) {
            element.classList.add('feedback-correct');
          } else {
            element.classList.add('feedback-incorrect');
          }
          element.style.display = 'block';
          
          // 重新觸發 KaTeX 渲染 (因為回饋訊息裡可能有公式)
          renderMathInElement(element, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
          });
        }

        // 檢查按鈕 1 的邏輯
        checkBtn1.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-1 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          
          const isCorrect = selectedValues.length === 2 && 
                              selectedValues.includes('A') && 
                              selectedValues.includes('C');

          if (isCorrect) {
            showFeedback(feedback1, '太棒了！ $3\\sqrt{2}$ 和 $5\\sqrt{2}$ 根號裡都是 2，是同類方根。', true);
            step1.classList.add('step-locked');
            checkBtn1.disabled = true;
            step2.classList.remove('step-locked');
            step2.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback1, '不對喔，再想一想。同類方根，根號裡的數字要一樣。', false);
          }
        });

        // 檢查按鈕 2 的邏輯
        checkBtn2.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-2 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);

          const isCorrect = selectedValues.length === 2 && 
                              selectedValues.includes('B') && 
                              selectedValues.includes('C');
          
          if (isCorrect) {
            showFeedback(feedback2, '做得好！ $2\\sqrt{3}$ 和 $\\frac{\\sqrt{3}}{2}$ 根號裡都是 3，是同類方根。', true);
            step2.classList.add('step-locked');
            checkBtn2.disabled = true;
            step3.classList.remove('step-locked'); // 解鎖步驟 3
            step3.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback2, '快答對了，檢查一下根號裡的數字。', false);
          }
        });
        
        // 檢查按鈕 3 的邏輯
        checkBtn3.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-3 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);

          const isCorrect = selectedValues.length === 2 && 
                              selectedValues.includes('A') && 
                              selectedValues.includes('B');
          
          if (isCorrect) {
            showFeedback(feedback3, '答對了！ $2\\sqrt{5}$ 和 $\\frac{2\\sqrt{5}}{5}$ 根號裡都是 5，是同類方根。', true);
            step3.classList.add('step-locked');
            checkBtn3.disabled = true;
            step4.classList.remove('step-locked'); // 解鎖步驟 4
            step4.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback3, '不對喔，仔細看看根號裡的數字。', false);
          }
        });
        
        // 檢查按鈕 4 的邏輯
        checkBtn4.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-4 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);

          const isCorrect = selectedValues.length === 2 && 
                              selectedValues.includes('B') && 
                              selectedValues.includes('D');
          
          if (isCorrect) {
            showFeedback(feedback4, '太厲害了！ $\\frac{\\sqrt{7}}{7}$ 和 $2\\sqrt{7}$ 根號裡都是 7，是同類方根。', true);
            step4.classList.add('step-locked');
            checkBtn4.disabled = true;
            step5.classList.remove('step-locked'); // *** 修改：解鎖步驟 5 ***
            step5.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback4, '再檢查一下，哪兩個選項的根號裡都是 7 呢？', false);
          }
        });

        // 檢查按鈕 5 的邏輯 (新增)
        checkBtn5.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-5 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('A') && selectedValues.includes('B');
          
          if (isCorrect) {
            showFeedback(feedback5, '答對了！ $\\frac{3\\sqrt{2}}{2}$ 和 $4\\sqrt{2}$ 根號裡都是 2。', true);
            step5.classList.add('step-locked');
            checkBtn5.disabled = true;
            step7.classList.remove('step-locked'); // 解鎖步驟 7
            step7.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback5, '不對喔，仔細看看根號裡的數字。', false);
          }
        });

        // 檢查按鈕 7 的邏輯 (新增)
        checkBtn7.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-7 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('B') && selectedValues.includes('C');
          
          if (isCorrect) {
            showFeedback(feedback7, '太棒了！ $\\sqrt{27} = 3\\sqrt{3}$ 且 $\\frac{1}{\\sqrt{3}} = \\frac{\\sqrt{3}}{3}$，根號裡都是 3。', true);
            step7.classList.add('step-locked');
            checkBtn7.disabled = true;
            step8.classList.remove('step-locked'); // 解鎖步驟 8
            step8.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback7, '這個要先化簡喔！ $\\sqrt{27} = ?$ 且 $\\frac{1}{\\sqrt{3}} = ?$ ', false);
          }
        });

        // 檢查按鈕 8 的邏輯 (新增)
        checkBtn8.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-8 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('C') && selectedValues.includes('D');
          
          if (isCorrect) {
            showFeedback(feedback8, '答對了！ $\\sqrt{98} = 7\\sqrt{2}$，和 $\\sqrt{2}$ 是同類方根。', true);
            step8.classList.add('step-locked');
            checkBtn8.disabled = true;
            step9.classList.remove('step-locked'); // 解鎖步驟 9
            step9.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback8, '化簡看看 $\\sqrt{98}$ 是多少？', false);
          }
        });

        // 檢查按鈕 9 的邏輯 (新增)
        checkBtn9.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-9 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('A') && selectedValues.includes('B');
          
          if (isCorrect) {
            showFeedback(feedback9, '做得好！ $\\sqrt{20} = 2\\sqrt{5}$ 且 $\\frac{3}{\\sqrt{5}} = \\frac{3\\sqrt{5}}{5}$，根號裡都是 5。', true);
            step9.classList.add('step-locked');
            checkBtn9.disabled = true;
            step10.classList.remove('step-locked'); // 解鎖步驟 10
            step10.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback9, '化簡看看 $\\sqrt{20}$ 和 $\\frac{3}{\\sqrt{5}}$。 (C) $\\sqrt{25}=5$ 不是方根喔！', false);
          }
        });

        // 檢查按鈕 10 的邏輯 (新增)
        checkBtn10.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-10 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('A') && selectedValues.includes('D');
          
          if (isCorrect) {
            showFeedback(feedback10, '沒錯！ $\\sqrt{52} = \\sqrt{4 \\times 13} = 2\\sqrt{13}$，和 $\\sqrt{13}$ 是同類方根。', true);
            step10.classList.add('step-locked');
            checkBtn10.disabled = true;
            step11.classList.remove('step-locked'); // 解鎖步驟 11
            step11.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback10, '化簡看看 $\\sqrt{52}$ 是多少？', false);
          }
        });

        // 檢查按鈕 11 的邏輯 (新增)
        checkBtn11.addEventListener('click', () => {
          const selectedOptions = document.querySelectorAll('#step-11 .option-card.selected');
          const selectedValues = Array.from(selectedOptions).map(el => el.dataset.value);
          const isCorrect = selectedValues.length === 2 && selectedValues.includes('B') && selectedValues.includes('D');
          
          if (isCorrect) {
            showFeedback(feedback11, '恭喜！ $\\sqrt{18} = 3\\sqrt{2}$ 且 $\\sqrt{\\frac{9}{2}} = \\frac{3\\sqrt{2}}{2}$，根號裡都是 2。', true);
            step11.classList.add('step-locked');
            checkBtn11.disabled = true;
            // *** 修改：這是最後一步，顯示完成訊息 ***
            completionMessage.style.display = 'block';
            completionMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            showFeedback(feedback11, '最後一題了！化簡看看 $\\sqrt{18}$ 和 $\\sqrt{\\frac{9}{2}}$。', false);
          }
        });
        
        // 重置按鈕的邏輯
        resetBtn.addEventListener('click', () => {
            // 隱藏完成訊息和回饋
            completionMessage.style.display = 'none';
            feedback1.style.display = 'none';
            feedback2.style.display = 'none';
            feedback3.style.display = 'none';
            feedback4.style.display = 'none';
            feedback5.style.display = 'none'; // 新增
            feedback7.style.display = 'none'; // 新增
            feedback8.style.display = 'none'; // 新增
            feedback9.style.display = 'none'; // 新增
            feedback10.style.display = 'none'; // 新增
            feedback11.style.display = 'none'; // 新增
            
            // 移除所有選項的 'selected' 狀態
            allOptionCards.forEach(card => card.classList.remove('selected'));
            
            // 解鎖步驟 1 並啟用按鈕
            step1.classList.remove('step-locked');
            checkBtn1.disabled = false;
            
            // 鎖定步驟 2, 3, 4, 5, 7, 8, 9, 10, 11 並啟用按鈕
            step2.classList.add('step-locked');
            checkBtn2.disabled = false;
            step3.classList.add('step-locked');
            checkBtn3.disabled = false;
            step4.classList.add('step-locked');
            checkBtn4.disabled = false;
            step5.classList.add('step-locked'); // 新增
            checkBtn5.disabled = false; // 新增
            step7.classList.add('step-locked'); // 新增
            checkBtn7.disabled = false; // 新增
            step8.classList.add('step-locked'); // 新增
            checkBtn8.disabled = false; // 新增
            step9.classList.add('step-locked'); // 新增
            checkBtn9.disabled = false; // 新增
            step10.classList.add('step-locked'); // 新增
            checkBtn10.disabled = false; // 新增
            step11.classList.add('step-locked'); // 新增
            checkBtn11.disabled = false; // 新增
            
            // 滾動回頂部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      });
    </script>

</body>
</html>


